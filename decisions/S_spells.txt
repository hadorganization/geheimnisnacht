decisions = { 
	spirit_reinforcements = {
				is_high_prio = yes

						potential = {
								age = 16
								NOT = { has_character_modifier = magic_cooldown }
								trait = creature_forestspirit

								OR = {
									any_current_enemy = {
											at_location = ROOT
											in_command = yes
											}
				
									any_current_enemy = {
											any_vassal = {
													at_location = ROOT
													in_command = yes
													}
												}
								any_current_enemy = {
										any_vassal = {
												any_vassal = {
														at_location = ROOT
														in_command = yes
														}
												}
											}
								any_current_enemy = {
										any_vassal = {
											any_vassal = {
												any_vassal = { at_location = ROOT
														in_command = yes
														}
												}
											}
										}
								any_current_enemy = {
											any_vassal = {
												any_vassal = {
													any_vassal = {
														any_vassal = {
															at_location = ROOT
															in_command = yes
															}
														}
													}
												}
											}
										}
									}

								allow = {
										age = 16
										NOT = { has_character_modifier = magic_cooldown }
										trait = creature_forestspirit

										OR = {
											any_current_enemy = {
													at_location = ROOT
													in_command = yes
													}
				
											any_current_enemy = {
														any_vassal = {
															at_location = ROOT
															in_command = yes
															}
														}
											any_current_enemy = {
													any_vassal = {
														any_vassal = {
																at_location = ROOT
																in_command = yes
															}
														}
													}
										any_current_enemy = {
												any_vassal = {
													any_vassal = { any_vassal = { at_location = ROOT
																	in_command = yes }
															}
														}
													}
										any_current_enemy = {
												any_vassal = {
													any_vassal = {
														any_vassal = { any_vassal = { at_location = ROOT
																		in_command = yes }
																}
															}
														}
													}
											}
										}

								effect = {
									ROOT = {  add_character_modifier = { name = magic_cooldown
														duration = 100
														hidden = yes }
									character_event = { id = asrai.40 days = 60 } 
								location = {
										ROOT = { spawn_unit = { province = PREV
													troops = { magical_spells = { 250 250 } }
													earmark = spirit_troops
													}
											}
										}

								}
							}
	
				ai_will_do = {
						factor = 1000
						}
	
				}
	walk_between_worlds = {
			is_high_prio = yes
				potential = {
						age = 16
						is_incapacitated_trigger = no
						NOT = { has_character_modifier = magic_cooldown }
						trait = asrai_spellsinger
						trait = creature_elf
						in_command = yes
						OR = { has_character_modifier = magic_power_1
							has_character_modifier = magic_power_2
							has_character_modifier = magic_power_3
							has_character_modifier = magic_power_4
							}
						}
		allow = {
			in_command = yes
		}
		
		effect = {
			if = { limit = { religion = asrai_cadai 
						NOT = { trait = creature_forestspirit } }
				piety = -100 }
			add_character_modifier = { name = magic_cooldown
						duration = 300
						hidden = yes }
		hidden_tooltip = { 
				random_list = { 50 = { character_event = { id = aicleanup.010 } }
						50 = {  add_trait = woodwalking
							character_event = { id = aicleanup.011 days = 100 random = 30 }
							modifier = { factor = 1.25
									has_character_modifier = magic_power_2
									}
							modifier = { factor = 1.5
									has_character_modifier = magic_power_3
									}
							modifier = { factor = 2
									has_character_modifier = magic_power_4
									}
							modifier = { factor = 1.25
									trait = genius
									}
							modifier = { factor = 0.75
									trait = dim
									}
							modifier = { factor = 0.5
									trait = slow
									}
							modifier = { factor = 0.25
									trait = idiot
									}
							modifier = { factor = 0.5
									trait = imbecile
									}
							modifier = { factor = 0.75
									trait = wroth
									}
							modifier = { factor = 0.75
									trait = slothful
									}
							modifier = { factor = 0.75
									trait = infirm
									}
							 }
						 }
			} #closeshiddentooltip
		}
		
		revoke_allowed = { always = yes }
		
		ai_will_do = { factor = 1	
			modifier = {
				factor = 0.1
				trait = brave
			}	
			modifier = {
				factor = 0.5
				religion = asrai_cadai
				NOT = { piety = 250 }
			}
		 }
	 }
# Slaaneshi/Atharti/CoP remove imperfection
# removes scar, disfigured, fat, undernourished, any mutation
	hide_deformity_spells = {
				potential = {
						is_incapacitated_trigger = no
						age = 16
						NOT = { has_character_modifier = hds_magic_cooldown }
						OR = { trait = lore_dark_magic
							trait = lore_tzeentch
							trait = lore_slaanesh }
						OR = { trait = scarred
							trait = disfigured
							trait = fat
							trait = undernourished
							trait = mut_spines
							trait = mut_horns
							trait = mut_scales
							trait = mut_thirdeye
							trait = mut_tongue
							trait = mut_crests }
						OR = { has_character_modifier = magic_power_1
							has_character_modifier = magic_power_2
							has_character_modifier = magic_power_3
							has_character_modifier = magic_power_4
							}
						}
		allow = {
			OR = { trait = lore_dark_magic
				trait = lore_tzeentch
				trait = lore_slaanesh }
		}
		
		effect = {
			if = { limit = { religion = asrai_cadai 
						NOT = { trait = creature_forestspirit } }
				piety = -200 }
			add_character_modifier = { name = hds_magic_cooldown
						duration = 600
						hidden = yes }
		hidden_tooltip = { 
				random_list = { 25 = { character_event = { id = aicleanup.010 } }
						75 = {  character_event = { id = spleasure.90 }
							modifier = { factor = 1.25
									has_character_modifier = magic_power_2
									}
							modifier = { factor = 1.5
									has_character_modifier = magic_power_3
									}
							modifier = { factor = 2
									has_character_modifier = magic_power_4
									}
							modifier = { factor = 1.25
									trait = genius
									}
							modifier = { factor = 0.75
									trait = dim
									}
							modifier = { factor = 0.5
									trait = slow
									}
							modifier = { factor = 0.25
									trait = idiot
									}
							modifier = { factor = 0.5
									trait = imbecile
									}
							modifier = { factor = 0.75
									trait = wroth
									}
							modifier = { factor = 0.75
									trait = slothful
									}
							modifier = { factor = 0.75
									trait = infirm
									}
							modifier = {
								factor = 0.5
								trait = hedge_wizard
								}
							 }
						 }
			} #closeshiddentooltip
		}
		
		revoke_allowed = { always = yes }
		
		ai_will_do = { factor = 0 }
	 }

	summon_demon = {	
		potential = {
				is_incapacitated_trigger = no
				NOT = { religion = asrai_cadai }
				NOT = { has_character_modifier = magic_cooldown_summoning }
			OR = { trait = lore_tzeentch
				trait = lore_nurgle
				trait = lore_slaanesh
				trait = lore_dark_magic
				trait = chaos_dwarf_sorcerer
				trait = lore_shadows
				trait = bray_shaman }	
			OR = {  has_character_modifier = magic_power_1
				has_character_modifier = magic_power_2
				has_character_modifier = magic_power_3
				has_character_modifier = magic_power_4 }
			 }
		allow = { prisoner = no
			piety = 450
			OR = {  has_character_modifier = magic_power_1
				has_character_modifier = magic_power_2
				has_character_modifier = magic_power_3
				has_character_modifier = magic_power_4 } }
		effect = {
			hidden_tooltip = { random = { chance = 20
							character_event = { id = mutation.1 days = 100 random = 100 } }
				add_character_modifier = { name = magic_cooldown_summoning
							duration = 300
							hidden = yes }
				character_event = { id = schaos.27 } } #receive event and decide what to do
				piety = -450
			} #closes effect

		revoke_allowed = { always = no }
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0.15
				}
			modifier = {
				factor = 1.5
				war = yes
			}
			modifier = {
				factor = 1.5
				religion = tzeentch
				}
			modifier = {
				factor = 0
				any_courtier = { OR = { trait = tzeentch_demon
							trait = nurgle_demon
							trait = slaanesh_demon
							trait = khorne_demon } }
				}
			modifier = {
				factor = 1.75
				prestige = 750
				}
			modifier = {
				factor = 2
				piety = 1000
				}
			modifier = {
				factor = 0.001
				trait = content
				}
			modifier = {
				factor = 1.2
				trait = cruel
				}
			modifier = {
				factor = 1.75
				trait = ambitious
				}
			modifier = {
				factor = 0.25
				has_character_modifier = magic_power_2
				NOT = { trait = ambitious }
				}
			modifier = {
				factor = 0.05
				has_character_modifier = magic_power_1
				NOT = { trait = ambitious }
				}
			modifier = {
				factor = 0
				trait = creature_elf
				}
			modifier = {
				factor = 2
				OR = { trait = tzeentch_demon
					trait = nurgle_demon
					trait = slaanesh_demon }
				}
			}
		} #closes decision

	summon_demon_other = { #if you're not a mage yourself, but have a mage in your court
		potential = { is_ruler = yes
				ai = no
				age = 12
				is_incapacitated_trigger = no
				NOT = { religion = asrai_cadai }
				NOT = { has_character_modifier = magic_power_1 }
				NOT = { has_character_modifier = magic_power_2 }
				NOT = { has_character_modifier = magic_power_3 }
				NOT = { has_character_modifier = magic_power_4 }
		any_courtier = { NOT = { has_character_modifier = magic_cooldown_summoning }
					NOT = { trait = incapable }
					NOT = { trait = incapacitated }
					NOT = { religion = asrai_cadai }
					prisoner = no
					age = 16
				OR = { trait = lore_tzeentch
					trait = lore_nurgle
					trait = lore_slaanesh
					trait = lore_dark_magic
					trait = chaos_dwarf_sorcerer
					trait = lore_shadows
					trait = bray_shaman }	
				OR = {  has_character_modifier = magic_power_1
					has_character_modifier = magic_power_2
					has_character_modifier = magic_power_3
					has_character_modifier = magic_power_4 }
			 	}
			 }
		allow = { prisoner = no
			piety = 450 }
		effect = {
			hidden_tooltip = { random_courtier = { limit = { NOT = { has_character_modifier = magic_cooldown_summoning }
									NOT = { trait = incapable }
									NOT = { trait = incapacitated }
									prisoner = no
								OR = { trait = lore_tzeentch
									trait = lore_nurgle
									trait = lore_slaanesh
									trait = lore_dark_magic
									trait = chaos_dwarf_sorcerer
									trait = lore_shadows
									trait = bray_shaman }	
								OR = {  has_character_modifier = magic_power_1
									has_character_modifier = magic_power_2
									has_character_modifier = magic_power_3
								has_character_modifier = magic_power_4 } }
							character_event = { id = schaos.84 } } } #mage decides if he wants to do it
				piety = -450
			} #closes effect

		revoke_allowed = { always = no }
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0.15
				}
			modifier = {
				factor = 1.5
				war = yes
			}
			modifier = {
				factor = 1.5
				religion = tzeentch
				}
			modifier = {
				factor = 0
				any_friend = { OR = { trait = tzeentch_demon
							trait = nurgle_demon
							trait = slaanesh_demon
							trait = khorne_demon } }
				}
			modifier = {
				factor = 1.75
				prestige = 750
				}
			modifier = {
				factor = 2
				piety = 1000
				}
			modifier = {
				factor = 0.001
				trait = content
				}
			modifier = {
				factor = 1.2
				trait = cruel
				}
			modifier = {
				factor = 1.75
				trait = ambitious
				}
			modifier = {
				factor = 0.25
				NOT = { trait = ambitious }
				}
			modifier = {
				factor = 0
				trait = creature_elf
				}
			modifier = {
				factor = 2
				OR = { trait = tzeentch_demon
					trait = nurgle_demon
					trait = slaanesh_demon }
				}
			}
		} #closes decision

	learn_magic_yourself = { #for private characters studying by themselves
		potential = {	is_ruler = yes
				higher_tier_than = BARON
				is_incapacitated_trigger = no
				age = 12
				NOT = { trait = witch_hunter }
				NOT = { religion = khorne }
				NOT = { trait = vampire_blood_hidden }
				NOT = { trait = vampire_blood_visible }
				NOT = { has_character_flag = taken_hedge_wizard_decision }
				OR = { independent = yes
					liege = { NOT = { religion = taalite } 
						NOT = { religion = ulrican }
						NOT = { religion = manannite } 
						NOT = { religion = shallyan }  
						NOT = { religion = myrmidian } 
						NOT = { religion = grail }
						NOT = { religion = sigmarite } } }
				OR = { trait = creature_human 
					trait = creature_amazon
					trait = creature_elf }
				OR = { is_female = yes
					NOT = { religion = ursun } }
				NOT = { top_liege = { trait = malekith } }
				NOT = { trait = hedge_wizard }
				NOT = { trait = incapable }
				NOT = { has_character_modifier = magic_power_1 }
				NOT = { has_character_modifier = magic_power_2 }
				NOT = { has_character_modifier = magic_power_3 }
				NOT = { has_character_modifier = magic_power_4 }
				is_vampire_trigger = no
		}
		
		allow = {
			learning = 15
			wealth = 500
		}
		
		effect = {
			wealth = -500
			add_trait = hedge_wizard
			hidden_tooltip = { set_character_flag = taken_hedge_wizard_decision
					if = { limit = { NOT = { age = 16 } }
						set_character_flag = learning_as_kid } 
					character_event = { id = sorcererapprentice.12 } #Start studying
					if = { limit = { religion_group = cadai_group
								e_ulthuan = { holder_scope  = { religion_group = cadai_group } } } 
							e_ulthuan = { holder_scope  = { opinion = { modifier = opinion_unauthorized_tutoring
													who = ROOT } } }
						} 
					if = { limit = { 	religion_group = cytharai_group
								is_female = yes
								e_naggaroth = { holder_scope  = { trait = malekith } } } 
							e_naggaroth = { holder_scope  = { opinion = { modifier = opinion_unauthorized_tutoring
													who = ROOT } } }
						} 
					if = { limit = { trait = creature_elf
								is_female = no
								e_naggaroth = { holder_scope  = { trait = malekith } } } 
							e_naggaroth = { holder_scope  = { opinion = { modifier = opinion_sorcerous_rival
													who = ROOT } } }
						} 
					 } 
		}
		
		revoke_allowed = { always = yes }
		
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0.001
				}
			modifier = {
				factor = 0.01
				NOT = { wealth = 800 }
				}
			modifier = {
				factor = 0
				NOT = { trait = ambitious }
				NOT = { trait = scholar }
				NOT = { trait = mystic }
				NOT = { trait = envious }
				NOT = { has_character_modifier = fake_mage } 
				}
		} #closesaiwilldo
	} #closesevent

	learn_necromancy_yourself = { #for private characters studying by themselves
		potential = {	is_ruler = yes
				higher_tier_than = BARON
				prisoner = no
				age = 16
				is_incapacitated_trigger = no
				NOT = { trait = witch_hunter }
				NOT = { religion = khorne }
				NOT = { has_character_flag = taken_hedge_wizard_decision }
				NOT = { has_character_flag = taken_necromancer_decision }
				OR = { independent = yes
					liege = { NOT = { religion = taalite } 
						NOT = { religion = ulrican }
						NOT = { religion = manannite } 
						NOT = { religion = shallyan }  
						NOT = { religion = myrmidian } 
						NOT = { religion = grail }
						NOT = { religion = sigmarite } 
						NOT = { religion = ursun } } }
				OR = { trait = creature_human
					trait = khemri_tomb_king }
				NOT = { top_liege = { trait = malekith } }
				NOT = { trait = king_settra }
				NOT = { trait = hedge_wizard }
				NOT = { trait = mage_apprentice }
				NOT = { trait = vampire_blood_visible }
				NOT = { trait = vampire_blood_hidden }
				NOT = { trait = vampire_jade_visible }
				NOT = { trait = vampire_jade_hidden }
				NOT = { trait = incapable }
				NOT = { has_character_modifier = magic_power_1 }
				NOT = { has_character_modifier = magic_power_2 }
				NOT = { has_character_modifier = magic_power_3 }
				NOT = { has_character_modifier = magic_power_4 }
				OR = { trait = vampire_lahmian_visible
					trait = vampire_carstein_visible
					# trait = vampire_blood_visible
					trait = vampire_strigoi_visible
					trait = vampire_necrarch_visible
					trait = vampire_jade_visible
					trait = vampire_mahtmasi_visible
					trait = vampire_lahmian_hidden
					trait = vampire_carstein_hidden
					# trait = vampire_blood_hidden
					trait = vampire_strigoi_hidden
					trait = vampire_necrarch_hidden
					trait = vampire_jade_hidden
					trait = vampire_mahtmasi_hidden
					trait = widowed
					trait = impaler
					trait = mystic
					religion = vampiric
					religion = nagashi
					religion = shadowmen
					has_character_modifier = the_necronomicon
					has_character_flag = undead_insight }
		}
		
		allow = {
			learning = 15
			wealth = 150
		}
		
		effect = {
			wealth = -150
			add_trait = hedge_wizard
			hidden_tooltip = { set_character_flag = taken_necromancer_decision 
					if = { limit = { NOT = { age = 16 } }
						set_character_flag = learning_as_kid } 
					character_event = { id = sorcererapprentice.15 } #Start studying
					if = { limit = { religion_group = cadai_group
								e_ulthuan = { holder_scope  = { religion_group = cadai_group } } } 
							e_ulthuan = { holder_scope  = { opinion = { modifier = opinion_unauthorized_tutoring
													who = ROOT } } }
						} 
					if = { limit = { 	religion_group = cytharai_group
								is_female = yes
								e_naggaroth = { holder_scope  = { trait = malekith } } } 
							e_naggaroth = { holder_scope  = { opinion = { modifier = opinion_unauthorized_tutoring
													who = ROOT } } }
						} 
					if = { limit = { trait = creature_elf
								is_female = no
								e_naggaroth = { holder_scope  = { trait = malekith } } } 
							e_naggaroth = { holder_scope  = { opinion = { modifier = opinion_sorcerous_rival
													who = ROOT } } }
						} 
					 } 
		}
		
		revoke_allowed = { always = yes }
		
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0.001
				}
			modifier = {
				factor = 0.01
				NOT = { wealth = 800 }
				}
			modifier = {
				factor = 10
				has_character_flag = undead_insight
				}
			modifier = {
				factor = 0
				NOT = { has_character_flag = undead_insight }
				NOT = { trait = ambitious }
				NOT = { trait = scholar }
				NOT = { trait = mystic }
				NOT = { trait = envious }
				NOT = { trait = cruel }
				NOT = { trait = depressed }
				NOT = { has_character_modifier = fake_mage } 
				}
		} #closesaiwilldo
	} #closesevent

	undead_summoning = {
		potential = {	is_ruler = yes
				higher_tier_than = BARON
				prisoner = no
				age = 16
				NOT = { trait = incapable }
				OR = { has_character_modifier = magic_power_1
					has_character_modifier = magic_power_2
					has_character_modifier = magic_power_3
					has_character_modifier = magic_power_4 }
				trait = lore_necromancy
		}
		
		allow = {
			piety = 150
				NOT = { has_character_modifier = magic_cooldown }
			location = { OR = { owner = { character = ROOT }
						owner = { top_liege = { character = ROOT } }
					 }
				NOT = { has_province_modifier = province_tainted_1 }
				NOT = { has_province_modifier = province_tainted_2 }
				NOT = { has_province_modifier = province_tainted_3 }
				NOT = { has_province_modifier = province_tainted_4 }
				NOT = { has_province_modifier = province_tainted_5 }
				NOT = { culture = nehekharan } }
				OR = { has_character_modifier = necromantic_power_1
					has_character_modifier = necromantic_power_2 
					has_character_modifier = necromantic_power_3 
					has_character_modifier = necromantic_power_4 
					has_character_modifier = necromantic_power_5 }
		}
		
		effect = {
			character_event = { id = svampires.11 }
			add_character_modifier = { name = magic_cooldown
						duration = 300
						hidden = yes }
		}
		
		revoke_allowed = { always = yes }
		
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				war = no
				}
			modifier = {
				factor = 10
				war = yes
				}
			modifier = {
				factor = 1.5
				has_character_modifier = necromantic_power_2 
				}
			modifier = {
				factor = 1.65
				has_character_modifier = necromantic_power_3 
				}
			modifier = {
				factor = 1.75
				has_character_modifier = necromantic_power_4 
				}
			modifier = {
				factor = 1.85
				has_character_modifier = necromantic_power_5 
				}
		} #closesaiwilldo
	} #closesevent

	hunt_demon_down = {
		potential = {
				prisoner = no
				is_ruler = yes
				higher_tier_than = BARON
				NOT = { religion_group = chaos_gods_group }
				NOT = { any_friend = { OR = { trait = khorne_demon
							trait = nurgle_demon
							trait = slaanesh_demon
							trait = tzeentch_demon } } }
				age = 12
				NOT = { trait = incapable }
				#has_any_opinion_modifier = opinion_demon_havoc
				any_courtier = { OR = { trait = khorne_demon
							trait = nurgle_demon
							trait = slaanesh_demon
							trait = tzeentch_demon } 
						is_ruler = no }
		}
		
		allow = {
			wealth = 150
		}
		
		effect = { wealth = -150
			hidden_tooltip = { random_courtier = { limit = { OR = { trait = khorne_demon
										trait = nurgle_demon
										trait = slaanesh_demon
										trait = tzeentch_demon } }
						character_event = { id = sdemons.4 days = 4 } } }
		}
		
		revoke_allowed = { always = yes }
		
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 1.5
				trait = brave
			}
			modifier = {
				factor = 1.25
				trait = wroth
			}
			modifier = {
				factor = 0.5
				trait = craven
			}
			modifier = {
				factor = 0.75
				trait = shy
			}
			modifier = {
				factor = 0.05
				is_cultist_trigger = yes
			}
		} #closesaiwilldo
	} #closesdecision
}
targetted_decisions = { 
	healing_spell = {
		filter = court
		ai_target_filter = court
		from_potential = { 
			trait = lore_high_magic
			NOT = { trait = incapable }
			NOT = { trait = infirm }
			is_incapacitated_trigger = no
			NOT = { has_character_modifier = magic_cooldown }
				OR = { has_character_modifier = magic_power_1
					has_character_modifier = magic_power_2
					has_character_modifier = magic_power_3
					has_character_modifier = magic_power_4 }
		}
		potential = {
				host = FROM
				OR = { trait = wounded
					trait = maimed
					trait = incapable
					trait = troubled_pregnancy
					trait = hard_pregnancy
					trait = disfigured }
			is_undead_trigger = no
		}
		
		allow = {
			
		}
		
		effect = {
			if = { limit = { FROM = { religion = asrai_cadai 
						NOT = { trait = creature_forestspirit } } }
				piety = -100 }
		hidden_tooltip = { 
			FROM = { add_character_modifier = { name = magic_cooldown
						duration = 300
						hidden = yes } }
			if = { limit = { trait = wounded }
				random_list = { 60 = { remove_trait = wounded }
						40 = { character_event = { id = aicleanup.010 } 
							modifier = { factor = 0.75
									FROM = { has_character_modifier = magic_power_2 }
									}
							modifier = { factor = 0.5
									FROM = { has_character_modifier = magic_power_3 }
									}
							modifier = { factor = 0.25
									FROM = { has_character_modifier = magic_power_4 }
									}
							modifier = { factor = 0.75
									FROM = { trait = genius }
									}
							modifier = { factor = 1.5
									FROM = { trait = dim }
									}
							modifier = { factor = 2
									FROM = { trait = slow }
									}
							modifier = { factor = 3
									FROM = { trait = idiot }
									}
							modifier = { factor = 4
									FROM = { trait = imbecile }
									}
							modifier = { factor = 1.25
									FROM = { trait = wroth }
									}
							modifier = { factor = 1.25
									FROM = { trait = slothful }
									}
								modifier = {
									factor = 1.5
									FROM = { trait = hedge_wizard }
									}
							 }
						 } 
				} #closesif
			if = { limit = { trait = maimed }
				random_list = { 50 = { remove_trait = maimed }
						50 = {  character_event = { id = aicleanup.010 } 
							modifier = { factor = 0.75
									FROM = { has_character_modifier = magic_power_2 }
									}
							modifier = { factor = 0.5
									FROM = { has_character_modifier = magic_power_3 }
									}
							modifier = { factor = 0.25
									FROM = { has_character_modifier = magic_power_4 }
									}
							modifier = { factor = 0.75
									FROM = { trait = genius }
									}
							modifier = { factor = 1.5
									FROM = { trait = dim }
									}
							modifier = { factor = 2
									FROM = { trait = slow }
									}
							modifier = { factor = 3
									FROM = { trait = idiot }
									}
							modifier = { factor = 4
									FROM = { trait = imbecile }
									}
							modifier = { factor = 1.25
									FROM = { trait = wroth }
									}
							modifier = { factor = 1.25
									FROM = { trait = slothful }
									}
								modifier = {
									factor = 1.5
									FROM = { trait = hedge_wizard }
									}
							 }
						 } 
				} #closesif
			if = { limit = { trait = incapable }
				random_list = { 40 = { remove_trait = incapable }
						60 = { character_event = { id = aicleanup.010 } 
							modifier = { factor = 0.75
									FROM = { has_character_modifier = magic_power_2 }
									}
							modifier = { factor = 0.5
									FROM = { has_character_modifier = magic_power_3 }
									}
							modifier = { factor = 0.25
									FROM = { has_character_modifier = magic_power_4 }
									}
							modifier = { factor = 0.75
									FROM = { trait = genius }
									}
							modifier = { factor = 1.5
									FROM = { trait = dim }
									}
							modifier = { factor = 2
									FROM = { trait = slow }
									}
							modifier = { factor = 3
									FROM = { trait = idiot }
									}
							modifier = { factor = 4
									FROM = { trait = imbecile }
									}
							modifier = { factor = 1.25
									FROM = { trait = wroth }
									}
							modifier = { factor = 1.25
									FROM = { trait = slothful }
									}
								modifier = {
									factor = 1.5
									FROM = { trait = hedge_wizard }
									}
							 }
						 } 
				} #closesif
			if = { limit = { trait = troubled_pregnancy }
				random_list = { 40 = { remove_trait = troubled_pregnancy }
						60 = {  character_event = { id = aicleanup.010 } 
							modifier = { factor = 0.75
									FROM = { has_character_modifier = magic_power_2 }
									}
							modifier = { factor = 0.5
									FROM = { has_character_modifier = magic_power_3 }
									}
							modifier = { factor = 0.25
									FROM = { has_character_modifier = magic_power_4 }
									}
							modifier = { factor = 0.75
									FROM = { trait = genius }
									}
							modifier = { factor = 1.5
									FROM = { trait = dim }
									}
							modifier = { factor = 2
									FROM = { trait = slow }
									}
							modifier = { factor = 3
									FROM = { trait = idiot }
									}
							modifier = { factor = 4
									FROM = { trait = imbecile }
									}
							modifier = { factor = 1.25
									FROM = { trait = wroth }
									}
							modifier = { factor = 1.25
									FROM = { trait = slothful }
									}
								modifier = {
									factor = 1.5
									FROM = { trait = hedge_wizard }
									}
							 }
						 } 
				} #closesif
			if = { limit = { trait = hard_pregnancy }
				random_list = { 50 = { remove_trait = hard_pregnancy }
						50 = {  character_event = { id = aicleanup.010 } 
							modifier = { factor = 0.75
									FROM = { has_character_modifier = magic_power_2 }
									}
							modifier = { factor = 0.5
									FROM = { has_character_modifier = magic_power_3 }
									}
							modifier = { factor = 0.25
									FROM = { has_character_modifier = magic_power_4 }
									}
							modifier = { factor = 0.75
									FROM = { trait = genius }
									}
							modifier = { factor = 1.5
									FROM = { trait = dim }
									}
							modifier = { factor = 2
									FROM = { trait = slow }
									}
							modifier = { factor = 3
									FROM = { trait = idiot }
									}
							modifier = { factor = 4
									FROM = { trait = imbecile }
									}
							modifier = { factor = 1.25
									FROM = { trait = wroth }
									}
							modifier = { factor = 1.25
									FROM = { trait = slothful }
									}
								modifier = {
									factor = 1.5
									FROM = { trait = hedge_wizard }
									}
							 }
						 } 
				} #closesif
			if = { limit = { trait = disfigured }
				random_list = { 50 = { remove_trait = disfigured }
						50 = {  character_event = { id = aicleanup.010 } 
							modifier = { factor = 0.75
									FROM = { has_character_modifier = magic_power_2 }
									}
							modifier = { factor = 0.5
									FROM = { has_character_modifier = magic_power_3 }
									}
							modifier = { factor = 0.25
									FROM = { has_character_modifier = magic_power_4 }
									}
							modifier = { factor = 0.75
									FROM = { trait = genius }
									}
							modifier = { factor = 1.5
									FROM = { trait = dim }
									}
							modifier = { factor = 2
									FROM = { trait = slow }
									}
							modifier = { factor = 3
									FROM = { trait = idiot }
									}
							modifier = { factor = 4
									FROM = { trait = imbecile }
									}
							modifier = { factor = 1.25
									FROM = { trait = wroth }
									}
							modifier = { factor = 1.25
									FROM = { trait = slothful }
									}
								modifier = {
									factor = 1.5
									FROM = { trait = hedge_wizard }
									}
							 }
						 } 
				} #closesif


			} #closeshiddentooltip
		}
		
		revoke_allowed = { always = yes }
		
		ai_will_do = { factor = 1
				
			modifier = {
				factor = 0
				NOT = { FROM = { trait = kind } }
				NOT = { FROM = { dynasty = ROOT } }
			}
			modifier = {
				factor = 0.1
				FROM = { trait = envious }
			}
			modifier = {
				factor = 0.25
				religion = asrai_cadai
				NOT = { piety = 250 }
			}
		 }

	}

	exorcism_spell = {
		filter = court
		ai_target_filter = court
		from_potential = { 
			
			OR = { trait = lore_high_magic
				trait = lore_light }
			NOT = { trait = incapable }
			NOT = { trait = infirm }
			NOT = { trait = troubled_pregnancy }
			NOT = { has_character_modifier = magic_cooldown }
				OR = { has_character_modifier = magic_power_1
					has_character_modifier = magic_power_2
					has_character_modifier = magic_power_3
					has_character_modifier = magic_power_4 }
		}
		potential = {
			 trait = possessed
			NOT = { culture_group = daemonic_group }
			is_undead_trigger = no
		}
		
		allow = {
			piety = 50
			
		}
		
		effect = {
			piety = -50
			if = { limit = { FROM = { religion = asrai_cadai 
						NOT = { trait = creature_forestspirit } } }
				piety = -100 }
		hidden_tooltip = { 
			FROM = { add_character_modifier = { name = magic_cooldown
						duration = 300
						hidden = yes } }
					
					random_list = { 40 = { character_event = { id = schaos.79 } #success
								
								modifier = { factor = 0.75
										ROOT = { trait = magic_potential_3 }
										}
								modifier = { factor = 0.5
										ROOT = { trait = magic_potential_4 }
										}
								modifier = { factor = 0.25
										FROM = { has_character_modifier = magic_power_1 }
										}
								modifier = { factor = 0.75
										FROM = { has_character_modifier = magic_power_2 }
										}
								modifier = { factor = 1.25
										FROM = { has_character_modifier = magic_power_3 }
										}
								modifier = { factor = 1.75
										FROM = { has_character_modifier = magic_power_4 }
										}
								modifier = { factor = 1.5
										FROM = { trait = magic_potential_3 }
										}
								modifier = { factor = 1.95
										FROM = { trait = magic_potential_4 }
										}
								modifier = { factor = 1.75
										FROM = { trait = genius }
										}
								modifier = { factor = 1.5
										FROM = { trait = brilliant }
										}
								modifier = { factor = 1.45
										FROM = { trait = smart }
										}
								modifier = { factor = 1.35
										FROM = { trait = quick }
										}
								modifier = { factor = 1.25
										FROM = { trait = bright }
										}
								modifier = { factor = 0.95
										FROM = { trait = dim }
										}
								modifier = { factor = 0.75
										FROM = { trait = dumb }
										}
								modifier = { factor = 0.5
										FROM = { trait = slow }
										}
								modifier = { factor = 0.45
										FROM = { trait = idiot }
										}
								modifier = { factor = 0.25
										FROM = { trait = imbecile }
										}
								modifier = {
									factor = 0.5
									FROM = { trait = hedge_wizard }
									}
								} 
							40 = { character_event = { id = schaos.80 } #failure
								} 
							20 = { character_event = { id = schaos.81 } #deadly failure
								} 
							}
			} #closeshiddentooltip
		}
		
		revoke_allowed = { always = yes }
		
		ai_will_do = { factor = 1
				
			modifier = {
				factor = 0.5
				NOT = { FROM = { trait = kind } }
				NOT = { FROM = { dynasty = ROOT } }
			}
			modifier = {
				factor = 0.1
				FROM = { trait = envious }
			}
			modifier = {
				factor = 0.25
				religion = asrai_cadai
				NOT = { piety = 250 }
			}
			modifier = {
				factor = 10
				FROM = { religion = sigmarite }
			}
			modifier = {
				factor = 2
				FROM = { liege = { character = ROOT } }
			}
			modifier = {
				factor = 2
				FROM = { trait = creature_elf }
			}
		 }

	}

	#the version for objects is a normal decision activated by having the proper traits
	vassal_possess_ritual = {
		filter = court
		ai_target_filter = court
	
		from_potential = {
				primary_title = { higher_tier_than = BARON }
				is_incapacitated_trigger = no
				NOT = { has_character_modifier = magic_cooldown_summoning }
			OR = { trait = lore_tzeentch
				trait = lore_nurgle
				trait = lore_slaanesh
				trait = lore_dark_magic
				trait = chaos_dwarf_sorcerer
				trait = lore_shadows
				trait = bray_shaman }	
			OR = { has_character_modifier = magic_power_3
				has_character_modifier = magic_power_4 }
			 }
		potential = {
			prisoner = yes
			is_pregnant = no
			host = { character = FROM }
				NOT = { trait = avatar_kurnous }
				NOT = { trait = avatar_isha }
				NOT = { trait = everqueen }
			OR = { trait = creature_elf
				trait = creature_chaos_dwarf
				trait = creature_dwarf
				trait = creature_human
				trait = creature_amazon
				trait = creature_beastman }
			is_vampire_trigger = no	
			}
		allow = { prisoner = yes
			FROM = { piety = 150
			OR = { has_character_modifier = magic_power_3
				has_character_modifier = magic_power_4 } } }
		effect = {
			hidden_tooltip = { 
			FROM = { 
			hidden_tooltip = { random = { chance = 20
							character_event = { id = mutation.1 days = 100 random = 100 } } }
				add_character_modifier = { name = magic_cooldown_summoning
							duration = 300
							hidden = yes }
				character_event = { id = schaos.17 } } } #receive event and decide what to do

				FROM = {
					remove_opinion = { who = ROOT modifier = opinion_traitor }
					remove_opinion = { who = ROOT modifier = opinion_rebel_traitor }
					remove_opinion = { who = ROOT modifier = opinion_dishonorable }
					}
				piety = -150
				FROM = { if = { limit = { NOT = { trait = cruel } }
						random = {
							chance = 70
							add_trait = cruel
							hidden_tooltip = { character_event = { id = 38259 } #Notify Cruel
									}
							}
						} #closes if
					} #closesfrom
			} #closes effect

		revoke_allowed = { always = no }
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0.15
				}
			modifier = {
				factor = 0.4
				reverse_opinion = { who = FROM value = 20 }
				}
			modifier = {
				factor = 0.25
				reverse_opinion = { who = FROM value = 40 }
				}
			modifier = {
				factor = 2
				NOT = { reverse_opinion = { who = FROM value = -75 } }
				}
			modifier = {
				factor = 0
				FROM = { war = yes }
			}
			modifier = {
				factor = 1.5
				FROM = { religion = tzeentch }
				}
			modifier = {
				factor = 0
				FROM = { any_courtier = { OR = { trait = tzeentch_demon
								trait = nurgle_demon
								trait = slaanesh_demon
								trait = khorne_demon } } }
				}
			modifier = {
				factor = 0.75
				prestige = 200
				}
			modifier = {
				factor = 0.05
				prestige = 1000
				}
			modifier = {
				factor = 0
				FROM = { trait = kind }
				}
			modifier = {
				factor = 2
				ROOT = { trait = cruel }
				}
			modifier = {
				factor = 0
				FROM = { trait = creature_elf }
				}
			modifier = {
				factor = 2
				FROM = { OR = { trait = tzeentch_demon
						trait = nurgle_demon
						trait = slaanesh_demon } }
				}
			}
		} #closes decision

	mage_ward_apprentice = {
		filter = realm
		ai_target_filter = realm
		from_potential = { 
			NOT = { trait = incapable }
			NOT = { trait = vampire_blood_visible }
			NOT = { trait = vampire_blood_hidden }
			NOT = { religion = asrai_cadai } #they have their own decision
			NOT = { religion = taalite }
			NOT = { religion = ulrican }
			NOT = { religion = manannite } 
			NOT = { religion = shallyan } 
			NOT = { religion = myrmidian } 
			NOT = { religion = grail }
			NOT = { religion = sigmarite }
 			OR = { ROOT = { is_female = no }
				AND = { NOT = { religion = ormazd }
     		 			NOT = { religion = kitabid }
     		 			NOT = { culture = ramaccan }
     		 			NOT = { culture = medean }
     		 			NOT = { culture = tevari }
    		  			NOT = { culture = cophic } } }
			OR = { is_female = yes
				NOT = { religion = ursun } } 
			OR = { trait = lore_ice 
				trait = lore_fire 
				trait = lore_beasts 
				trait = lore_metal 
				trait = lore_light 
				trait = lore_life 
				trait = lore_heavens 
				trait = lore_death 
				trait = lore_shadows
				trait = lore_dark_magic		#elves can teach to humans, but they will not learn the elven lores
				trait = lore_high_magic }
			OR = { trait = creature_elf 
				trait = creature_amazon
				trait = creature_human }
			NOT = { any_friend = { trait = mage_apprentice } } #just one at a time
		}
		potential = {
				guardian = { FROM = { character = PREV } }
				prisoner = no
				age = 10
				OR = { is_female = yes
					FROM = { NOT = { religion = ursun } } } 
				NOT = { age = 15 }
				OR = { trait = creature_elf 
					trait = creature_amazon
					trait = creature_human }
				NOT = { trait = mage_apprentice }
				NOT = { trait = incapable }
				NOT = { trait = hedge_wizard }
				NOT = { trait = vampire_blood_visible }
				NOT = { trait = vampire_blood_hidden }
				NOT = { has_character_modifier = apprenticeship_refused }
				NOT = { has_character_modifier = magic_power_1 }
				NOT = { has_character_modifier = magic_power_2 }
				NOT = { has_character_modifier = magic_power_3 }
				NOT = { has_character_modifier = magic_power_4 }
		}
		
		allow = {
			FROM = { learning = 14 } 
		}
		
		effect = {
			hidden_tooltip = { add_friend = FROM
					add_trait = mage_apprentice 
					FROM = { character_event = { id = sorcererapprentice.7 days = 350 } } #Start teaching
					if = { limit = { FROM = { religion_group = cadai_group } 
								e_ulthuan = { holder_scope  = { religion_group = cadai_group } } } 
							e_ulthuan = { holder_scope  = { opinion = { modifier = opinion_unauthorized_tutoring
													who = FROM } } }
						} 
					if = { limit = { FROM = { religion_group = cytharai_group
								is_female = yes } 
								e_naggaroth = { holder_scope  = { trait = malekith } } } 
							e_naggaroth = { holder_scope  = { opinion = { modifier = opinion_unauthorized_tutoring
													who = FROM } } }
						} 
					if = { limit = { trait = creature_elf
								is_female = no
								e_naggaroth = { holder_scope  = { trait = malekith } } } 
							e_naggaroth = { holder_scope  = { opinion = { modifier = opinion_sorcerous_rival
													who = ROOT } } }
						} 
					}
		}
		
		revoke_allowed = { always = yes }
		
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0.85
				NOT = { dynasty = FROM }
			}
			modifier = {
				factor = 0
				FROM = { culture = cathayan }
				is_female = yes
			}
			modifier = {
				factor = 0.85
				NOT = { culture = FROM }
			}
			modifier = {
				factor = 0.05
				NOT = { religion = FROM }
			}
			modifier = {
				factor = 0
				FROM = { religion = ursun }
				is_female = no
			}
			modifier = {
				factor = 0.75
				NOT = { father = { character = FROM } }
				NOT = { mother = { character = FROM } }
			}
			modifier = {
				factor = 50
				OR = { father = { character = FROM }
					mother = { character = FROM } }
			}
			modifier = {
				factor = 1.95
				OR = { FROM = { employer = { ROOT = { father = { character = PREVPREV } } } }
					FROM = { employer = { ROOT = { father = { character = PREVPREV } } } }
					 }
			}
			modifier = {
				factor = 1.35
				trait = quick
			}
			modifier = {
				factor = 1.25
				trait = bright
			}
			modifier = {
				factor = 1.5
				trait = smart
			}
			modifier = {
				factor = 1.75
				trait = quick
			}
			modifier = {
				factor = 1.95
				trait = brilliant
			}
			modifier = {
				factor = 2
				trait = genius
			}
			modifier = {
				factor = 0.85
				trait = dim
			}
			modifier = {
				factor = 0.75
				trait = dumb
			}
			modifier = {
				factor = 0.65
				trait = slow
			}
			modifier = {
				factor = 0.5
				trait = idiot
			}
			modifier = {
				factor = 0.45
				trait = imbecile
			}
			modifier = {
				factor = 1.5
				trait = gregarious
			}
			modifier = {
				factor = 1.5
				trait = ambitious
			}
			modifier = {
				factor = 1.75
				trait = diligent
			}
			modifier = {
				factor = 1.25
				trait = patient
			}
			modifier = {
				factor = 0.85
				trait = slothful
			}
			modifier = {
				factor = 0.5
				age = 14
			}
			modifier = {
				factor = 0.75
				FROM = { NOT = { religion = ROOT } }
			}
			modifier = {
				factor = 0.25
				FROM = { NOT = { opinion = { who = ROOT
						 value = -100 } } }
				}
			modifier = {
				factor = 0.75
				FROM = { NOT = { opinion = { who = ROOT
						 value = -80 } } }
				}
			modifier = {
				factor = 0.75
				FROM = { NOT = { opinion = { who = ROOT
						 value = -60 } } }
				}
			modifier = {
				factor = 0.75
				FROM = { NOT = { opinion = { who = ROOT
						 value = -40 } } }
				}
			modifier = {
				factor = 0.75
				FROM = { NOT = { opinion = { who = ROOT
						 value = -20 } } }
				}
			modifier = {
				factor = 0.75
				FROM = { NOT = { opinion = { who = ROOT
						 value = 0 } } }
				}
			modifier = {
				factor = 1.5
				FROM = { opinion = { who = ROOT
						 value = 20 }
					}
				}
			modifier = {
				factor = 1.65
				FROM = { opinion = { who = ROOT
						value = 40 }
					}
				}
			modifier = {
				factor = 1.75
				FROM = { opinion = { who = ROOT
						value = 60 }
					}
				}
			modifier = {
				factor = 1.85
				FROM = { opinion = { who = ROOT
						value = 80 }
					}
				}
			modifier = {
				factor = 1.5
				FROM = { opinion = { who = ROOT
						value = 100 }
					}
				}

		} #closesaiwilldo
	}

	chaosmage_ward_apprentice = {
		filter = realm
		ai_target_filter = realm
		from_potential = { 
			is_incapacitated_trigger = no
			religion_group = chaos_gods_group
			NOT = { religion = khorne }
			NOT = { religion = hashut }
			OR = { trait = lore_tzeentch
				trait = lore_nurgle
				trait = lore_slaanesh }
			NOT = { any_friend = { trait = mage_apprentice } } #just one at a time
		}
		potential = {
				guardian = { FROM = { character = PREV } }
				prisoner = no
				OR = { trait = creature_human
					trait = creature_amazon
					trait = creature_elf }
				age = 10
				is_vampire_trigger = no
				NOT = { age = 15 }
				NOT = { trait = mage_apprentice }
				NOT = { trait = incapable }
				NOT = { trait = hedge_wizard }
				NOT = { has_character_modifier = apprenticeship_refused }
				NOT = { has_character_modifier = magic_power_1 }
				NOT = { has_character_modifier = magic_power_2 }
				NOT = { has_character_modifier = magic_power_3 }
				NOT = { has_character_modifier = magic_power_4 }
		}
		
		allow = {
			FROM = { learning = 8 } 
		}
		
		effect = {
			hidden_tooltip = { add_friend = FROM
					add_trait = mage_apprentice 
					FROM = { character_event = { id = sorcererapprentice.9 days = 350 } } } #Start teaching
		}
		
		revoke_allowed = { always = yes }
		
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0.85
				NOT = { dynasty = FROM }
			}
			modifier = {
				factor = 0.85
				NOT = { culture = FROM }
			}
			modifier = {
				factor = 1.5
				NOT = { religion = FROM }
			}
			modifier = {
				factor = 0.75
				NOT = { father = { character = FROM } }
				NOT = { mother = { character = FROM } }
			}
			modifier = {
				factor = 50
				OR = { father = { character = FROM }
					mother = { character = FROM } }
			}
			modifier = {
				factor = 1.95
				OR = { FROM = { employer = { ROOT = { father = { character = PREVPREV } } } }
					FROM = { employer = { ROOT = { father = { character = PREVPREV } } } }
					 }
			}
			modifier = {
				factor = 1.35
				trait = quick
			}
			modifier = {
				factor = 1.25
				trait = bright
			}
			modifier = {
				factor = 1.5
				trait = smart
			}
			modifier = {
				factor = 1.75
				trait = quick
			}
			modifier = {
				factor = 1.95
				trait = brilliant
			}
			modifier = {
				factor = 2
				trait = genius
			}
			modifier = {
				factor = 0.85
				trait = dim
			}
			modifier = {
				factor = 0.75
				trait = dumb
			}
			modifier = {
				factor = 0.65
				trait = slow
			}
			modifier = {
				factor = 0.5
				trait = idiot
			}
			modifier = {
				factor = 0.45
				trait = imbecile
			}
			modifier = {
				factor = 1.5
				trait = gregarious
			}
			modifier = {
				factor = 1.5
				trait = ambitious
			}
			modifier = {
				factor = 1.75
				trait = diligent
			}
			modifier = {
				factor = 1.25
				trait = patient
			}
			modifier = {
				factor = 0.85
				trait = slothful
			}
			modifier = {
				factor = 0.5
				age = 14
			}
		} #closesaiwilldo
	}
	necromancer_ward_apprentice = {
		filter = realm
		ai_target_filter = realm
		from_potential = { 
			NOT = { trait = incapable }
			OR = {		trait = vampire_lahmian_visible
					trait = vampire_carstein_visible
					# trait = vampire_blood_visible
					trait = vampire_strigoi_visible
					trait = vampire_necrarch_visible
					# trait = vampire_jade_visible
					trait = vampire_mahtmasi_visible
					trait = vampire_lahmian_hidden
					trait = vampire_carstein_hidden
					# trait = vampire_blood_hidden
					trait = vampire_strigoi_hidden
					trait = vampire_necrarch_hidden
					# trait = vampire_jade_hidden
					trait = vampire_mahtmasi_hidden
					trait = lore_necromancy }
			OR = { trait = khemri_tomb_king 
				trait = creature_human }
			NOT = { any_friend = { trait = mage_apprentice } } #just one at a time
		}
		potential = {	
				NOT = { character = FROM }
			OR = { host = { character = FROM }
				guardian = { character = FROM }
				any_spouse = { character = FROM }
				any_lover = { character = FROM }
				any_friend = { character = FROM }
				mother = { character = FROM }
				father = { character = FROM } }
				age = 16
				OR = { trait = khemri_tomb_king 
					trait = creature_human }
				NOT = { trait = mage_apprentice }
				NOT = { trait = vampire_blood_hidden }
				NOT = { trait = vampire_blood_visible }
				NOT = { trait = incapable }
				NOT = { trait = hedge_wizard }
				NOT = { has_character_flag = taken_hedge_wizard_decision }
				NOT = { has_character_flag = taken_necromancer_decision }
				NOT = { has_character_modifier = apprenticeship_refused_necr }
				NOT = { has_character_modifier = magic_power_1 }
				NOT = { has_character_modifier = magic_power_2 }
				NOT = { has_character_modifier = magic_power_3 }
				NOT = { has_character_modifier = magic_power_4 }
				NOT = { trait = king_settra }
		}
		
		allow = {
			FROM = { learning = 14 } 
		}
		
		effect = { set_character_flag = taken_necromancer_decision
			character_event = { id = sorcererapprentice.17 }
		}
		
		revoke_allowed = { always = yes }
		
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0.85
				NOT = { dynasty = FROM }
			}
			modifier = {
				factor = 0.85
				NOT = { culture = FROM }
			}
			modifier = {
				factor = 0.05
				NOT = { religion_group = FROM }
			}
			modifier = {
				factor = 0.1
				trait = khemri_tomb_king
			}
			modifier = {
				factor = 0.1
				NOT = { learning = 12 }
			}
			modifier = {
				factor = 0.75
				NOT = { father = { character = FROM } }
				NOT = { mother = { character = FROM } }
			}
			modifier = {
				factor = 50
				OR = { father = { character = FROM }
					mother = { character = FROM } }
			}
			modifier = {
				factor = 1.95
				OR = { FROM = { employer = { ROOT = { father = { character = PREVPREV } } } }
					FROM = { employer = { ROOT = { father = { character = PREVPREV } } } }
					 }
			}
			modifier = {
				factor = 1.35
				trait = quick
			}
			modifier = {
				factor = 1.25
				trait = bright
			}
			modifier = {
				factor = 1.5
				trait = smart
			}
			modifier = {
				factor = 1.75
				trait = quick
			}
			modifier = {
				factor = 1.95
				trait = brilliant
			}
			modifier = {
				factor = 2
				trait = genius
			}
			modifier = {
				factor = 0.85
				trait = dim
			}
			modifier = {
				factor = 0.75
				trait = dumb
			}
			modifier = {
				factor = 0.65
				trait = slow
			}
			modifier = {
				factor = 0.5
				trait = idiot
			}
			modifier = {
				factor = 0.45
				trait = imbecile
			}
			modifier = {
				factor = 1.5
				trait = gregarious
			}
			modifier = {
				factor = 1.5
				trait = ambitious
			}
			modifier = {
				factor = 1.75
				trait = diligent
			}
			modifier = {
				factor = 1.25
				trait = patient
			}
			modifier = {
				factor = 0.85
				trait = slothful
			}
			modifier = {
				factor = 0.5
				age = 14
			}
			modifier = {
				factor = 0.75
				FROM = { NOT = { religion = ROOT } }
			}
			modifier = {
				factor = 0.25
				FROM = { NOT = { opinion = { who = ROOT
						 value = -100 } } }
				}
			modifier = {
				factor = 0.75
				FROM = { NOT = { opinion = { who = ROOT
						 value = -80 } } }
				}
			modifier = {
				factor = 0.75
				FROM = { NOT = { opinion = { who = ROOT
						 value = -60 } } }
				}
			modifier = {
				factor = 0.75
				FROM = { NOT = { opinion = { who = ROOT
						 value = -40 } } }
				}
			modifier = {
				factor = 0.75
				FROM = { NOT = { opinion = { who = ROOT
						 value = -20 } } }
				}
			modifier = {
				factor = 0.75
				FROM = { NOT = { opinion = { who = ROOT
						 value = 0 } } }
				}
			modifier = {
				factor = 1.5
				FROM = { opinion = { who = ROOT
						 value = 20 }
					}
				}
			modifier = {
				factor = 1.65
				FROM = { opinion = { who = ROOT
						value = 40 }
					}
				}
			modifier = {
				factor = 1.75
				FROM = { opinion = { who = ROOT
						value = 60 }
					}
				}
			modifier = {
				factor = 1.85
				FROM = { opinion = { who = ROOT
						value = 80 }
					}
				}
			modifier = {
				factor = 1.5
				FROM = { opinion = { who = ROOT
						value = 100 }
					}
				}

		} #closesaiwilldo
	}
	necro_execute_prisoner = {
		
		ai_target_filter = court
		from_potential = {
			is_ruler = yes
			NOT = { trait = incapable }
			trait = lore_necromancy
		}
	
		potential = {
			prisoner = yes
			host = { character = FROM }
			NOT = { trait = khorne_demon }
			NOT = { trait = nurgle_demon }
			NOT = { trait = slaanesh_demon }
			NOT = { trait = tzeentch_demon }
			is_undead_trigger = no
			NOT = { character = FROM }                            # Can't do this decision on yourself...

		}
		allow = {
			prisoner = yes
		}
		effect = {
		prisoner = no
		if = { limit = { is_invincible_trigger = yes }
				antideath_effect = yes
				break = yes }
		if = {
 limit = {
 OR = {
 trait = khorne_demon
					trait = nurgle_demon
					trait = slaanesh_demon
					trait = tzeentch_demon
 }
 }

			character_event = {
 id = sdemons.1 }
	
			break = yes 
}
			
death = {
				death_reason = death_execution
				killer = FROM
			}
			FROM = { character_event = {
 id = svampires.10 }
 }

		if = {
 limit = {
 dynasty = FROM
				FROM = {
 OR = {
 trait = creature_human
						trait = creature_amazon
						trait = creature_elf
						trait = creature_dwarf
						trait = creature_chaos_dwarf }
 }
 }

			FROM = {
 add_trait = kinslayer }
	
			 
}
		if = {
 limit = {
 liege = {
 character = FROM
 }
				FROM = { NOT = { has_opinion_modifier = { who = ROOT modifier = opinion_traitor } } 
					NOT = { has_opinion_modifier = { who = ROOT modifier = opinion_rebel_traitor } }
					NOT = { has_opinion_modifier = { who = ROOT modifier = opinion_dishonorable } }
					NOT = { has_opinion_modifier = { who = ROOT modifier = opinion_confirmed_heretic } }
					NOT = { has_opinion_modifier = { who = ROOT modifier = opinion_burned_by_asuryan } }
					religion = ROOT
						} #closesFROM
					 }
	
			
						FROM = { any_vassal = { limit = { religion = FROM }
									opinion = { modifier = opinion_tyrant
									who = FROM }
									} #closes anyvassal
								} #closes from
						FROM = { any_courtier = { limit = { religion = FROM
										is_landed = no }
									opinion = { modifier = opinion_tyrant
									who = FROM }
									} #closes anyvassal
								} #closes from
				 
} #closesif
		hidden_tooltip = { 		
			mother = {
				opinion = {
					who = FROM
					modifier = evil_murderer 
				}			
			}		
			father = {
				opinion = {
					who = FROM
					modifier = evil_murderer 
				}		
			}
			any_child = {
				limit = { 
					NOT = { character = FROM }
					NOT = { has_character_flag = evil_murderer }
				}	
				opinion = {
					who = FROM 
					modifier = evil_murderer 
				}				
			}	
			any_spouse = {
				limit = { 
					NOT = { character = FROM }
					opinion = { who = ROOT value = -25 }
				}	
				set_character_flag = murder_opinion_set
				opinion = {
					who = FROM 
					modifier = evil_murderer 
				}				
			}
			any_lover = {
				limit = { 
					NOT = { character = FROM }
				}	
				opinion = {
					who = FROM 
					modifier = evil_murderer 
				}				
			}
			any_friend = {
				limit = { 
					NOT = { character = FROM }
				}	
				opinion = {
					who = FROM 
					modifier = evil_murderer
				}				
			}
			any_dynasty_member = {
				limit = { 
					is_close_relative = ROOT
					NOT = { character = FROM }
				}	
				opinion = {
					who = FROM
					modifier = evil_murderer 
					}				
				}	
			}
		}
		revoke_allowed = {
			always = no
		}
		ai_will_do = {
			factor = 1
			
			modifier = {
				factor = 0.05 # Less likely to do it
			}
			modifier = {
				factor = 2
				war = yes
			}
			modifier = {
				factor = 0
				reverse_opinion = { who = FROM value = 50 }
			}
			modifier = {
				factor = 0.01
			FROM = { location = { NOT = { owner = { character = FROM } }
					NOT = { owner = { top_liege = { character = FROM } } } } }
				}
			modifier = {
				factor = 0 #Enemy has your relative
				FROM = {
					any_current_enemy = {
						dynasty = ROOT
						is_close_relative = ROOT
						any_courtier = {
							is_close_relative = FROM
							dynasty = FROM
						}
					}
				}	
			}
			modifier = {
				factor = 0.01
				FROM = { 
					OR = {
						trait = kind 
						trait = just
					}	
				}
			}
			modifier = {
				factor = 2
				FROM = { 
					OR = {
						trait = cruel
						trait = zealous
					}	
				}
			}	
			modifier = {
				factor = 1.5
				FROM = { trait = lunatic_3 }
			}
			modifier = {
				factor = 0.5
				FROM = { trait = patient }
			}
			modifier = {
				factor = 1.5
				FROM = { has_character_modifier = necromantic_power_1 }
			}
			modifier = {
				factor = 1.75
				FROM = { has_character_modifier = necromantic_power_2 }
			}
			modifier = {
				factor = 2
				FROM = { has_character_modifier = necromantic_power_3 }
			}
			modifier = {
				factor = 2.5
				FROM = { has_character_modifier = necromantic_power_4 }
			}
			modifier = {
				factor = 0
				FROM = { has_character_modifier = necromantic_power_5 }
			}
		} #aiwilldo
	} #decision

}