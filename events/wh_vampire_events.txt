namespace = svampires

# on death, give titles to heir.
# character_event = {

# 	id = svampires.0
# 	hide_window = yes

# 	is_triggered_only = yes
# 	trigger = {

# 			OR = {
# 			trait = vampire_lahmian_visible

# 			trait = vampire_carstein_visible
# 			trait = vampire_blood_visible

# 			trait = vampire_strigoi_visible
# 			trait = vampire_necrarch_visible

# 			trait = vampire_jade_visible
# 			trait = vampire_mahtmasi_visible

# 			trait = vampire_lahmian_hidden
# 			trait = vampire_carstein_hidden

# 			trait = vampire_blood_hidden
# 			trait = vampire_strigoi_hidden

# 			trait = vampire_necrarch_hidden
# 			trait = vampire_jade_hidden

# 			trait = vampire_mahtmasi_hidden }
# 						vampire_heir = {

# 							has_opinion_modifier = {
# 								modifier = opinion_chosen_fledgling

# 								who = ROOT
# 							}

# 						}
# 	}

# 	immediate = { vampire_heir = { limit = { has_opinion_modifier = {
# 								modifier = opinion_chosen_fledgling

# 								who = ROOT
# 								}

# 						}
# 				remove_trait = vampire_heir

# 				ROOT = { any_demesne_title = { grant_title = PREVPREV } } } }
# }

# On death of a Vampire ruler, any thralls he made who are not legitimized gain claims on his title
character_event = {
	id = svampires.1
	# desc = EVTDESCsvampires.1
	# picture = GFX_evt_vampire_blood
	hide_window = yes
	min_age = 16
 	capable_only = yes
	prisoner = no
	is_triggered_only = yes

	trigger = {
		is_visible_vampire_trigger = yes
		any_realm_character = {
			is_visible_vampire_trigger = yes
			NOT = {
				dynasty = ROOT
			}
		}
	}

	immediate = {
		log = "work event id = svampires.1 for [Root.GetBestName]"
		any_realm_character = {
			limit = {
				is_visible_vampire_trigger = yes
				NOT = {
					dynasty = ROOT
				}
			}
			character_event = {
				id = svampires.1001
			}
		}
	}
}

character_event = {
	id = svampires.1001
	hide_window = yes
	is_triggered_only = yes

	immediate = {
		log = "work event id = svampires.1001 for [Root.GetBestName]"
		FROM = {
			primary_title = {
				ROOT = {
					add_claim = PREV
				}
			}
		}
	}
}

# if someone in dynasty has 2+ duchy titles. (by-yearly event)
character_event = {
	id = svampires.2
	desc = EVTDESCsvampires.2
	picture = "GFX_evt_vampire_politics"
	min_age = 16
	is_triggered_only = yes

	trigger = {
		OR = {
			has_landed_title = no
			lower_tier_than = COUNT
		}
		is_visible_vampire_trigger = yes
		any_dynasty_member = {
			ROOT = {
				has_opinion_modifier = {
					modifier = opinion_sired_me
					who = PREV
				}
			}
			ROOT = {
				liege = {
					character = PREVPREV
				}
			}
			demesne_size = 2
			num_of_duke_titles = 2
			higher_tier_than = DUKE
		}
		NOT = {
			trait = incapable
		}
	}

	weight_multiplier = {
		factor = 1
		modifier = {
			factor = 10
			trait = ambitious
		}
		modifier = {
			factor = 5
			trait = proud
		}
		modifier = {
			factor = 0.8
			trait = stressed
		}
		modifier = {
			factor = 0.8
			trait = depressed
		}
		modifier = {
			factor = 0.5
			trait = lunatic_3
		}
		modifier = {
			factor = 0.75
			trait = lunatic_2
		}
		modifier = {
			factor = 0.95
			trait = lunatic_1
		}
		modifier = {
			factor = 0.75
			trait = possessed
		}
		modifier = {
			factor = 0.9
			trait = ill
		}
		modifier = {
			factor = 0.8
			trait = pneumonic
		}
		modifier = {
			factor = 0.8
			trait = syphilitic
		}
		modifier = {
			factor = 0.5
			trait = leper
		}
		modifier = {
			factor = 0.9
			trait = wounded
		}
		modifier = {
			factor = 0.8
			trait = maimed
		}
		modifier = {
			factor = 0.5
			trait = infirm
		}
		modifier = {
			factor = 0.4
			trait = incapable
		}
		modifier = {
			factor = 0.5
			trait = drunkard
		}
		modifier = {
			factor = 0.5
			trait = pneumonic
		}
		modifier = {
			factor = 0.5
			trait = has_bone_auge
		}
		modifier = {
			factor = 0.5
			trait = has_tomb_rot
		}
		# modifier = {
		# factor = 0.5
		# trait = has_creeping_buboes
		# }
		modifier = {
			factor = 0.5
			trait = has_typhus
		}
		modifier = {
			factor = 0.5
			trait = has_measles
		}
	}

	immediate = {
		log = "work event id = svampires.2 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTAsvampires.2
		random_dynasty_member = {
			limit = {
				ROOT = {
					has_opinion_modifier = {
						modifier = opinion_sired_me
						who = PREV
					}
				}
				ROOT = {
					liege = {
						character = PREVPREV
					}
				}
				demesne_size = 2
				num_of_duke_titles = 2
				higher_tier_than = DUKE
			}
			character_event = {
				id = svampires.3 days = 1 tooltip = EVTTOOLTIP66051
			}
		}
	}

	option = {
		name = EVTOPTBsvampires.2
		trigger = {
			ai = no
		}
	}
}

character_event = {
	id = svampires.3
	desc = EVTDESCsvampires.3
	picture = "GFX_evt_vampire_politics"
	is_triggered_only = yes

	# no need for notifactions back, landless character gets it anyway.
	immediate = {
		log = "work event id = svampires.3 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTAsvampires.3
		ai_chance = {
			factor = 1
			modifier = {
				factor = 2
				from = {
					diplomacy = 14
				}
			}
			modifier = {
				factor = 2
				from = {
					martial = 14
				}
			}
			modifier = {
				factor = 2
				from = {
					intrigue = 14
				}
			}
			modifier = {
				factor = 1.5
				opinion = {
					who = from
					value = 25
				}
			}
			modifier = {
				factor = 2
				opinion = {
					who = from
					value = 50
				}
			}
			modifier = {
				factor = 3
				opinion = {
					who = from
					value = 75
				}
			}
		}
		prestige = -5
		FROM = {
			character_event = {
				id = svampires.4
			}
		}
		random_demesne_title = {
			limit = {
				tier = DUKE
				NOT = {
					is_primary_holder_title = yes
				}
			}
			grant_title = FROM
		}
	}

	option = {
		name = EVTOPTBsvampires.3
		FROM = {
			character_event = {
				id = svampires.5
			}
		}
		ai_chance = {
			factor = 2
			modifier = {
				factor = 0
				opinion = {
					who = from
					value = 80
				}
			}
		}
		FROM = {
			opinion = {
				modifier = dynastic_refused_title
				who = ROOT
				years = 100
			}
		}
	}
}

character_event = {
	id = svampires.4
	desc = EVTDESCsvampires.4
	picture = "GFX_evt_vampire_politics"
	is_triggered_only = yes

	immediate = {
		log = "work event id = svampires.4 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTAsvampires.4
	}
}

character_event = {
	id = svampires.5
	desc = EVTDESCsvampires.5
	picture = "GFX_evt_vampire_politics"
	is_triggered_only = yes

	immediate = {
		log = "work event id = svampires.5 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTAsvampires.5
	}
}

# if someone in dynasty has 4+ county titles. (by-yearly event)
character_event = {
	id = svampires.6
	desc = EVTDESCsvampires.2
	picture = "GFX_evt_vampire_politics"
	min_age = 16
	is_triggered_only = yes

	trigger = {
		is_ruler = no
		is_visible_vampire_trigger = yes
		any_dynasty_member = {
			ROOT = {
				has_opinion_modifier = {
					modifier = opinion_sired_me
					who = PREV
				}
			}
			ROOT = {
				liege = {
					character = PREVPREV
				}
			}
			demesne_size = 4
			num_of_count_titles = 4
			higher_tier_than = COUNT
		}
		NOT = {
			trait = incapable
		}
	}

	weight_multiplier = {
		factor = 1
		modifier = {
			factor = 10
			trait = ambitious
		}
		modifier = {
			factor = 5
			trait = proud
		}
		modifier = {
			factor = 0.8
			trait = stressed
		}
		modifier = {
			factor = 0.8
			trait = depressed
		}
		modifier = {
			factor = 0.5
			trait = lunatic_3
		}
		modifier = {
			factor = 0.75
			trait = lunatic_2
		}
		modifier = {
			factor = 0.95
			trait = lunatic_1
		}
		modifier = {
			factor = 0.75
			trait = possessed
		}
		modifier = {
			factor = 0.9
			trait = ill
		}
		modifier = {
			factor = 0.8
			trait = pneumonic
		}
		modifier = {
			factor = 0.8
			trait = syphilitic
		}
		modifier = {
			factor = 0.5
			trait = leper
		}
		modifier = {
			factor = 0.9
			trait = wounded
		}
		modifier = {
			factor = 0.8
			trait = maimed
		}
		modifier = {
			factor = 0.5
			trait = infirm
		}
		modifier = {
			factor = 0.4
			trait = incapable
		}
		modifier = {
			factor = 0.5
			trait = drunkard
		}
		modifier = {
			factor = 0.5
			trait = pneumonic
		}
		modifier = {
			factor = 0.5
			trait = has_bone_auge
		}
		modifier = {
			factor = 0.5
			trait = has_tomb_rot
		}
		# modifier = {
		# factor = 0.5
		# trait = has_creeping_buboes
		# }
		modifier = {
			factor = 0.5
			trait = has_typhus
		}
		modifier = {
			factor = 0.5
			trait = has_measles
		}
	}

	immediate = {
		log = "work event id = svampires.6 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTAsvampires.2
		random_dynasty_member = {
			limit = {
				ROOT = {
					has_opinion_modifier = {
						modifier = opinion_sired_me
						who = PREV
					}
				}
				ROOT = {
					liege = {
						character = PREVPREV
					}
				}
				demesne_size = 4
				num_of_count_titles = 4
				higher_tier_than = COUNT
			}
			character_event = {
				id = svampires.7 days = 1 tooltip = EVTTOOLTIP66051
			}
		}
	}

	option = {
		name = EVTOPTBsvampires.2
		trigger = {
			ai = no
		}
	}
}

character_event = {
	id = svampires.7
	desc = EVTDESCsvampires.3
	picture = "GFX_evt_vampire_politics"
	is_triggered_only = yes

	# no need for notifactions back, landless character gets it anyway.
	immediate = {
		log = "work event id = svampires.7 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTAsvampires.3
		ai_chance = {
			factor = 1
			modifier = {
				factor = 2
				from = {
					diplomacy = 14
				}
			}
			modifier = {
				factor = 2
				from = {
					martial = 14
				}
			}
			modifier = {
				factor = 2
				from = {
					intrigue = 14
				}
			}
			modifier = {
				factor = 1.5
				opinion = {
					who = from
					value = 25
				}
			}
			modifier = {
				factor = 2
				opinion = {
					who = from
					value = 50
				}
			}
			modifier = {
				factor = 3
				opinion = {
					who = from
					value = 75
				}
			}
		}
		prestige = -5
		FROM = {
			character_event = {
				id = svampires.4
			}
		}
		random_demesne_title = {
			limit = {
				tier = COUNT
				NOT = {
					is_primary_holder_title = yes
				}
			}
			grant_title = FROM
		}
	}

	option = {
		name = EVTOPTBsvampires.3
		FROM = {
			character_event = {
				id = svampires.5
			}
		}
		ai_chance = {
			factor = 2
			modifier = {
				factor = 0
				opinion = {
					who = from
					value = 80
				}
			}
		}
		FROM = {
			opinion = {
				modifier = dynastic_refused_title
				who = ROOT
				years = 100
			}
		}
	}
}

# A random subject is turned into a vampire
character_event = {
	id = svampires.8
	title = UNDEATH
	picture = "GFX_evt_vampire_kiss"
	desc = EVTDESCsvampires8
	is_triggered_only = yes

	immediate = {
		log = "work event id = svampires.8 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTAsvampires8
		opinion = {
			modifier = opinion_sired_me
			who = FROMFROM
			months = 240000
		}
		FROMFROM = {
			character_event = {
				id = svampires.9
			}
		}
		ai_chance = {
			factor = 1
		}
	}
}

# A kid is turned into a vampire
character_event = {
	id = svampires.9
	title = UNDEATH
	desc = EVTDESCsvampires9
	picture = "GFX_evt_vampire_kiss"
	is_triggered_only = yes

	immediate = {
		log = "work event id = svampires.9 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTAsvampires9
		root_makes_from_vampire_effect = yes
		recalc_succession = yes
	}
}

# NECROMANCY STUFF
# A prisoner is turned into part of a necromantic ritual
character_event = {
	id = svampires.10
	picture = "GFX_evt_zombies"
	desc = EVTDESCsvampires10
	is_triggered_only = yes

	immediate = {
		log = "work event id = svampires.10 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTAsvampires10
		if = {
			limit = {
				has_character_modifier = necromantic_power_4
			}
			remove_character_modifier = necromantic_power_4
			add_character_modifier = {
				name = necromantic_power_5
				duration = 30
			}
		}
		if = {
			limit = {
				has_character_modifier = necromantic_power_3
			}
			remove_character_modifier = necromantic_power_3
			add_character_modifier = {
				name = necromantic_power_4
				duration = 30
			}
		}
		if = {
			limit = {
				has_character_modifier = necromantic_power_2
			}
			remove_character_modifier = necromantic_power_2
			add_character_modifier = {
				name = necromantic_power_3
				duration = 30
			}
		}
		if = {
			limit = {
				has_character_modifier = necromantic_power_1
			}
			remove_character_modifier = necromantic_power_1
			add_character_modifier = {
				name = necromantic_power_2
				duration = 30
			}
		}
		if = {
			limit = {
				NOT = {
					has_character_modifier = necromantic_power_1
				}
				NOT = {
					has_character_modifier = necromantic_power_2
				}
				NOT = {
					has_character_modifier = necromantic_power_3
				}
				NOT = {
					has_character_modifier = necromantic_power_4
				}
				NOT = {
					has_character_modifier = necromantic_power_5
				}
			}
			add_character_modifier = {
				name = necromantic_power_1
				duration = 30
			}
		}
	}
}

# Summon undead horde
character_event = {
	id = svampires.11
	picture = "GFX_evt_zombies"
	desc = EVTDESCsvampires11
	is_triggered_only = yes

	immediate = {
		log = "work event id = svampires.11 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTAsvampires11
		trigger = {
			has_character_modifier = necromantic_power_5
			has_character_modifier = magic_power_4
		}
		piety = -350
		if = {
			limit = {
				has_character_modifier = necromantic_power_5
			}
			remove_character_modifier = necromantic_power_5
		}
		random_list = {
			50 = {
				character_event = {
					id = svampires.11009
				}
			} # Small Endless horde
			50 = {
				modifier = {
					factor = 0
					location = {
						culture = nehekharan
					}
				}
				modifier = {
					factor = 1.75
					religion = nagashi
				}
				modifier = {
					factor = 0.85
					trait = hedge_wizard
				}
				modifier = {
					factor = 1.85
					trait = creature_nehekharan
				}
				modifier = {
					factor = 1.75
					is_vampire_trigger = yes
				}
				modifier = {
					factor = 1.65
					has_character_modifier = magic_power_2
				}
				modifier = {
					factor = 1.75
					has_character_modifier = magic_power_3
				}
				modifier = {
					factor = 1.85
					has_character_modifier = magic_power_4
				}
				character_event = {
					id = svampires.11010
				}
			} # Big Endless horde
		}
	}

	option = {
		name = EVTOPTBsvampires11
		trigger = {
			OR = {
				has_character_modifier = necromantic_power_5
				has_character_modifier = necromantic_power_4
			}
			OR = {
				has_character_modifier = magic_power_3
				has_character_modifier = magic_power_4
			}
		}
		piety = -200
		if = {
			limit = {
				has_character_modifier = necromantic_power_5
			}
			remove_character_modifier = necromantic_power_5
			add_character_modifier = {
				name = necromantic_power_1 duration = 10
			}
		}
		if = {
			limit = {
				has_character_modifier = necromantic_power_4
			}
			remove_character_modifier = necromantic_power_4
		}
		random_list = {
			50 = {
				character_event = {
					id = svampires.11007
				}
			} # Small Huge horde
			50 = {
				modifier = {
					factor = 0
					location = {
						culture = nehekharan
					}
				}
				modifier = {
					factor = 1.75
					religion = nagashi
				}
				modifier = {
					factor = 0.85
					trait = hedge_wizard
				}
				modifier = {
					factor = 1.85
					trait = creature_nehekharan
				}
				modifier = {
					factor = 1.75
					is_vampire_trigger = yes
				}
				modifier = {
					factor = 1.65
					has_character_modifier = magic_power_2
				}
				modifier = {
					factor = 1.75
					has_character_modifier = magic_power_3
				}
				modifier = {
					factor = 1.85
					has_character_modifier = magic_power_4
				}
				character_event = {
					id = svampires.11008
				}
			} # Big Huge horde
		}
	}

	option = {
		name = EVTOPTCsvampires11
		trigger = {
			OR = {
				has_character_modifier = necromantic_power_5
				has_character_modifier = necromantic_power_4
				has_character_modifier = necromantic_power_3
			}
		}
		piety = -100
		if = {
			limit = {
				has_character_modifier = necromantic_power_5
			}
			remove_character_modifier = necromantic_power_5
			add_character_modifier = {
				name = necromantic_power_2 duration = 10
			}
		}
		if = {
			limit = {
				has_character_modifier = necromantic_power_4
			}
			remove_character_modifier = necromantic_power_4
			add_character_modifier = {
				name = necromantic_power_1 duration = 10
			}
		}
		if = {
			limit = {
				has_character_modifier = necromantic_power_3
			}
			remove_character_modifier = necromantic_power_3
		}
		random_list = {
			50 = {
				character_event = {
					id = svampires.11005
				}
			} # Small Large horde
			50 = {
				modifier = {
					factor = 0
					location = {
						culture = nehekharan
					}
				}
				modifier = {
					factor = 1.75
					religion = nagashi
				}
				modifier = {
					factor = 0.85
					trait = hedge_wizard
				}
				modifier = {
					factor = 1.85
					trait = creature_nehekharan
				}
				modifier = {
					factor = 1.75
					is_vampire_trigger = yes
				}
				modifier = {
					factor = 1.65
					has_character_modifier = magic_power_2
				}
				modifier = {
					factor = 1.75
					has_character_modifier = magic_power_3
				}
				modifier = {
					factor = 1.85
					has_character_modifier = magic_power_4
				}
				character_event = {
					id = svampires.11006
				}
			} # Big Large horde
		}
	}

	option = {
		name = EVTOPTDsvampires11
		trigger = {
			OR = {
				has_character_modifier = necromantic_power_5
				has_character_modifier = necromantic_power_4
				has_character_modifier = necromantic_power_3
				has_character_modifier = necromantic_power_2
			}
		}
		piety = -50
		if = {
			limit = {
				has_character_modifier = necromantic_power_5
			}
			remove_character_modifier = necromantic_power_5
			add_character_modifier = {
				name = necromantic_power_3 duration = 10
			}
		}
		if = {
			limit = {
				has_character_modifier = necromantic_power_4
			}
			remove_character_modifier = necromantic_power_4
			add_character_modifier = {
				name = necromantic_power_2 duration = 10
			}
		}
		if = {
			limit = {
				has_character_modifier = necromantic_power_3
			}
			remove_character_modifier = necromantic_power_3
			add_character_modifier = {
				name = necromantic_power_1 duration = 10
			}
		}
		if = {
			limit = {
				has_character_modifier = necromantic_power_2
			}
			remove_character_modifier = necromantic_power_2
		}
		random_list = {
			50 = {
				character_event = {
					id = svampires.11003
				}
			} # Small Average horde
			50 = {
				modifier = {
					factor = 0
					location = {
						culture = nehekharan
					}
				}
				modifier = {
					factor = 1.75
					religion = nagashi
				}
				modifier = {
					factor = 0.85
					trait = hedge_wizard
				}
				modifier = {
					factor = 1.85
					trait = creature_nehekharan
				}
				modifier = {
					factor = 1.75
					is_vampire_trigger = yes
				}
				modifier = {
					factor = 1.65
					has_character_modifier = magic_power_2
				}
				modifier = {
					factor = 1.75
					has_character_modifier = magic_power_3
				}
				modifier = {
					factor = 1.85
					has_character_modifier = magic_power_4
				}
				character_event = {
					id = svampires.11004
				}
			} # Big Average horde
		}
	}

	option = {
		name = EVTOPTEsvampires11
		trigger = {
			OR = {
				has_character_modifier = necromantic_power_4
				has_character_modifier = necromantic_power_3
				has_character_modifier = necromantic_power_2
				has_character_modifier = necromantic_power_1
			}
		}
		piety = -25
		if = {
			limit = {
				has_character_modifier = necromantic_power_4
			}
			remove_character_modifier = necromantic_power_4
			add_character_modifier = {
				name = necromantic_power_3
				duration = 10
			}
		}
		if = {
			limit = {
				has_character_modifier = necromantic_power_3
			}
			remove_character_modifier = necromantic_power_3
			add_character_modifier = {
				name = necromantic_power_2
				duration = 10
			}
		}
		if = {
			limit = {
				has_character_modifier = necromantic_power_2
			}
			remove_character_modifier = necromantic_power_2
			add_character_modifier = {
				name = necromantic_power_1
				duration = 10
			}
		}
		if = {
			limit = {
				has_character_modifier = necromantic_power_1
			}
			remove_character_modifier = necromantic_power_1
		}
		random_list = {
			50 = {
				character_event = {
					id = svampires.11001
				}
			} # Small small horde
			50 = {
				modifier = {
					factor = 0
					location = {
						culture = nehekharan
					}
				}
				modifier = {
					factor = 1.75
					religion = nagashi
				}
				modifier = {
					factor = 0.85
					trait = hedge_wizard
				}
				modifier = {
					factor = 1.85
					trait = creature_nehekharan
				}
				modifier = {
					factor = 1.75
					is_vampire_trigger = yes
				}
				modifier = {
					factor = 1.65
					has_character_modifier = magic_power_2
				}
				modifier = {
					factor = 1.75
					has_character_modifier = magic_power_3
				}
				modifier = {
					factor = 1.85
					has_character_modifier = magic_power_4
				}
				character_event = {
					id = svampires.11002
				}
			} # Big small horde
		}
	}
}

# Small small horde
character_event = {
	id = svampires.11001
	desc = EVTDESCAsvampires11001
	picture = "GFX_evt_zombies"
	border = GFX_event_normal_frame_war
	is_triggered_only = yes

	immediate = {
		log = "work event id = svampires.11001 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTAsvampires11001
		hidden_tooltip = {
			ROOT = {
				character_event = {
					id = svampires.12001 days = 450 random = 490
				}
			}
		}
		location = {
			add_province_modifier = {
				name = province_tainted_1
				duration = 650
			}
			ROOT = {
				spawn_unit = {
					province = PREV
					owner = ROOT
					earmark = summoned_zombiehorde_1
					troops = {
						undead_horde = {
							1500 1500
						}
					}
					cannot_inherit = yes
					attrition = 0
				}
			}
		}
	}
}

# The undead fall apart
character_event = {
	id = svampires.12001
	desc = EVTDESCAsvampires12001
	picture = "GFX_evt_zombies"
	border = GFX_event_normal_frame_war
	notification = yes
	is_triggered_only = yes

	immediate = {
		log = "work event id = svampires.12001 for [Root.GetBestName]"
		disband_event_forces = summoned_zombiehorde_1
	}

	option = {
	}
}

# Big small horde
character_event = {
	id = svampires.11002
	desc = EVTDESCAsvampires11002
	picture = "GFX_evt_zombies"
	border = GFX_event_normal_frame_war
	is_triggered_only = yes

	immediate = {
		log = "work event id = svampires.11002 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTAsvampires11002
		hidden_tooltip = {
			ROOT = {
				character_event = {
					id = svampires.12002 days = 450 random = 490
				}
			}
		}
		location = {
			add_province_modifier = {
				name = province_tainted_1
				duration = 650
			}
			ROOT = {
				spawn_unit = {
					province = PREV
					owner = ROOT
					earmark = summoned_zombiehorde_2
					troops = {
						undead_horde = {
							1750 1750
						}
					}
					cannot_inherit = yes
					attrition = 0
				}
			}
		}
	}
}

# The undead fall apart
character_event = {
	id = svampires.12002
	desc = EVTDESCAsvampires12002
	picture = "GFX_evt_zombies"
	border = GFX_event_normal_frame_war
	notification = yes
	is_triggered_only = yes

	immediate = {
		log = "work event id = svampires.12002 for [Root.GetBestName]"
		disband_event_forces = summoned_zombiehorde_2
	}

	option = {
	}
}

# Small average horde
character_event = {
	id = svampires.11003
	desc = EVTDESCAsvampires11003
	picture = "GFX_evt_zombies"
	border = GFX_event_normal_frame_war
	is_triggered_only = yes

	immediate = {
		log = "work event id = svampires.11003 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTAsvampires11003
		hidden_tooltip = {
			ROOT = {
				character_event = {
					id = svampires.12003 days = 450 random = 590
				}
			}
		}
		location = {
			add_province_modifier = {
				name = province_tainted_2
				duration = 850
			}
			ROOT = {
				spawn_unit = {
					province = PREV
					owner = ROOT
					earmark = summoned_zombiehorde_3
					troops = {
						undead_horde = {
							2000 2000
						}
					}
					cannot_inherit = yes
					attrition = 0
				}
				spawn_unit = {
					province = PREV
					owner = ROOT
					earmark = summoned_zombiehorde_3
					troops = {
						undead_horde = {
							1000 1000
						}
					}
					cannot_inherit = yes
					attrition = 0
				}
				spawn_unit = {
					province = PREV
					owner = ROOT
					earmark = summoned_zombiehorde_3
					troops = {
						undead_horde = {
							500 500
						}
					}
					cannot_inherit = yes
					attrition = 0
				}
			}
		}
	}
}

# The undead fall apart
character_event = {
	id = svampires.12003
	desc = EVTDESCAsvampires12003
	picture = "GFX_evt_zombies"
	border = GFX_event_normal_frame_war
	notification = yes
	is_triggered_only = yes

	immediate = {
		log = "work event id = svampires.12003 for [Root.GetBestName]"
		disband_event_forces = summoned_zombiehorde_3
	}

	option = {
	}
}

# Big average horde
character_event = {
	id = svampires.11004
	desc = EVTDESCAsvampires11004
	picture = "GFX_evt_zombies"
	border = GFX_event_normal_frame_war
	is_triggered_only = yes

	immediate = {
		log = "work event id = svampires.11004 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTAsvampires11004
		hidden_tooltip = {
			ROOT = {
				character_event = {
					id = svampires.12004 days = 450 random = 590
				}
			}
		}
		location = {
			add_province_modifier = {
				name = province_tainted_2
				duration = 850
			}
			ROOT = {
				spawn_unit = {
					province = PREV
					owner = ROOT
					earmark = summoned_zombiehorde_4
					troops = {
						undead_horde = {
							2000 2000
						}
					}
					cannot_inherit = yes
					reinforces = yes
					attrition = 0
				}
				spawn_unit = {
					province = PREV
					owner = ROOT
					earmark = summoned_zombiehorde_4
					troops = {
						undead_horde = {
							1000 1000
						}
					}
					cannot_inherit = yes
					attrition = 0
				}
				spawn_unit = {
					province = PREV
					owner = ROOT
					earmark = summoned_zombiehorde_4
					troops = {
						undead_horde = {
							1000 1000
						}
					}
					cannot_inherit = yes
					attrition = 0
				}
			}
		}
	}
}

# The undead fall apart
character_event = {
	id = svampires.12004
	desc = EVTDESCAsvampires12004
	picture = "GFX_evt_zombies"
	border = GFX_event_normal_frame_war
	notification = yes
	is_triggered_only = yes

	immediate = {
		log = "work event id = svampires.12004 for [Root.GetBestName]"
		disband_event_forces = summoned_zombiehorde_4
	}

	option = {
	}
}

# Small large horde
character_event = {
	id = svampires.11005
	desc = EVTDESCAsvampires11005
	picture = "GFX_evt_zombies"
	border = GFX_event_normal_frame_war
	is_triggered_only = yes

	immediate = {
		log = "work event id = svampires.11005 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTAsvampires11005
		hidden_tooltip = {
			ROOT = {
				character_event = {
					id = svampires.12005 days = 450 random = 690
				}
			}
		}
		location = {
			add_province_modifier = {
				name = province_tainted_3
				duration = 1000
			}
			ROOT = {
				spawn_unit = {
					province = PREV
					owner = ROOT
					earmark = summoned_zombiehorde_5
					troops = {
						undead_horde = {
							2000 2000
						}
					}
					cannot_inherit = yes
					reinforces = yes
					attrition = 0
				}
				spawn_unit = {
					province = PREV
					owner = ROOT
					earmark = summoned_zombiehorde_5
					troops = {
						undead_horde = {
							2000 2000
						}
					}
					cannot_inherit = yes
					attrition = 0
				}
				spawn_unit = {
					province = PREV
					owner = ROOT
					earmark = summoned_zombiehorde_5
					troops = {
						undead_horde = {
							1000 1000
						}
					}
					cannot_inherit = yes
					attrition = 0
				}
				spawn_unit = {
					province = PREV
					owner = ROOT
					earmark = summoned_zombiehorde_5
					troops = {
						undead_horde = {
							1000 1000
						}
					}
					cannot_inherit = yes
					attrition = 0
				}
			}
		}
	}
}

# The undead fall apart
character_event = {
	id = svampires.12005
	desc = EVTDESCAsvampires12005
	picture = "GFX_evt_zombies"
	border = GFX_event_normal_frame_war
	notification = yes
	is_triggered_only = yes

	immediate = {
		log = "work event id = svampires.12005 for [Root.GetBestName]"
		disband_event_forces = summoned_zombiehorde_5
	}

	option = {
	}
}

# Big large horde
character_event = {
	id = svampires.11006
	desc = EVTDESCAsvampires11006
	picture = "GFX_evt_zombies"
	border = GFX_event_normal_frame_war
	is_triggered_only = yes

	immediate = {
		log = "work event id = svampires.11006 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTAsvampires11006
		hidden_tooltip = {
			ROOT = {
				character_event = {
					id = svampires.12006 days = 450 random = 690
				}
			}
		}
		location = {
			add_province_modifier = {
				name = province_tainted_3
				duration = 1000
			}
			ROOT = {
				spawn_unit = {
					province = PREV
					owner = ROOT
					earmark = summoned_zombiehorde_6
					troops = {
						undead_horde = {
							2000 2000
						}
					}
					cannot_inherit = yes
					reinforces = yes
					attrition = 0
				}
				spawn_unit = {
					province = PREV
					owner = ROOT
					earmark = summoned_zombiehorde_6
					troops = {
						undead_horde = {
							2000 2000
						}
					}
					cannot_inherit = yes
					attrition = 0
				}
				spawn_unit = {
					province = PREV
					owner = ROOT
					earmark = summoned_zombiehorde_6
					troops = {
						undead_horde = {
							1000 1000
						}
					}
					cannot_inherit = yes
					attrition = 0
				}
				spawn_unit = {
					province = PREV
					owner = ROOT
					earmark = summoned_zombiehorde_6
					troops = {
						undead_horde = {
							1000 1000
						}
					}
					cannot_inherit = yes
					attrition = 0
				}
				spawn_unit = {
					province = PREV
					owner = ROOT
					earmark = summoned_zombiehorde_3
					troops = {
						undead_horde = {
							1000 1000
						}
					}
					cannot_inherit = yes
					attrition = 0
				}
				spawn_unit = {
					province = PREV
					owner = ROOT
					earmark = summoned_zombiehorde_6
					troops = {
						undead_horde = {
							1000 1000
						}
					}
					cannot_inherit = yes
					attrition = 0
				}
			}
		}
	}
}

# The undead fall apart
character_event = {
	id = svampires.12006
	desc = EVTDESCAsvampires12006
	picture = "GFX_evt_zombies"
	border = GFX_event_normal_frame_war
	notification = yes
	is_triggered_only = yes

	immediate = {
		log = "work event id = svampires.12006 for [Root.GetBestName]"
		disband_event_forces = summoned_zombiehorde_6
	}

	option = {
	}
}

# Small Huge horde
character_event = {
	id = svampires.11007
	desc = EVTDESCAsvampires11007
	picture = "GFX_evt_zombies"
	border = GFX_event_normal_frame_war
	is_triggered_only = yes

	immediate = {
		log = "work event id = svampires.11007 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTAsvampires11007
		hidden_tooltip = {
			ROOT = {
				character_event = {
					id = svampires.12007 days = 450 random = 790
				}
			}
		}
		location = {
			add_province_modifier = {
				name = province_tainted_4
				duration = 1500
			}
			ROOT = {
				spawn_unit = {
					province = PREV
					owner = ROOT
					earmark = summoned_zombiehorde_7
					troops = {
						undead_horde = {
							2000 2000
						}
					}
					cannot_inherit = yes
					reinforces = yes
					attrition = 0
				}
				spawn_unit = {
					province = PREV
					owner = ROOT
					earmark = summoned_zombiehorde_7
					troops = {
						undead_horde = {
							2000 2000
						}
					}
					cannot_inherit = yes
					attrition = 0
				}
				spawn_unit = {
					province = PREV
					owner = ROOT
					earmark = summoned_zombiehorde_7
					troops = {
						undead_horde = {
							2000 2000
						}
					}
					cannot_inherit = yes
					attrition = 0
				}
				spawn_unit = {
					province = PREV
					owner = ROOT
					earmark = summoned_zombiehorde_7
					troops = {
						undead_horde = {
							1000 1000
						}
					}
					cannot_inherit = yes
					attrition = 0
				}
				spawn_unit = {
					province = PREV
					owner = ROOT
					earmark = summoned_zombiehorde_7
					troops = {
						undead_horde = {
							1000 1000
						}
					}
					cannot_inherit = yes
					attrition = 0
				}
				spawn_unit = {
					province = PREV
					owner = ROOT
					earmark = summoned_zombiehorde_7
					troops = {
						undead_horde = {
							1000 1000
						}
					}
					cannot_inherit = yes
					attrition = 0
				}
				spawn_unit = {
					province = PREV
					owner = ROOT
					earmark = summoned_zombiehorde_7
					troops = {
						undead_horde = {
							1000 1000
						}
					}
					cannot_inherit = yes
					attrition = 0
				}
			}
		}
	}
}

# The undead fall apart
character_event = {
	id = svampires.12007
	desc = EVTDESCAsvampires12007
	picture = "GFX_evt_zombies"
	border = GFX_event_normal_frame_war
	notification = yes
	is_triggered_only = yes

	immediate = {
		log = "work event id = svampires.12007 for [Root.GetBestName]"
		disband_event_forces = summoned_zombiehorde_7
	}

	option = {
	}
}

# Big Huge horde
character_event = {
	id = svampires.11008
	desc = EVTDESCAsvampires11008
	picture = "GFX_evt_zombies"
	border = GFX_event_normal_frame_war
	is_triggered_only = yes

	immediate = {
		log = "work event id = svampires.11008 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTAsvampires11008
		hidden_tooltip = {
			ROOT = {
				character_event = {
					id = svampires.12008 days = 450 random = 790
				}
			}
		}
		location = {
			add_province_modifier = {
				name = province_tainted_4
				duration = 1500
			}
			ROOT = {
				spawn_unit = {
					province = PREV
					owner = ROOT
					earmark = summoned_zombiehorde_8
					troops = {
						undead_horde = {
							2500 2500
						}
					}
					cannot_inherit = yes
					reinforces = yes
					attrition = 0
				}
				spawn_unit = {
					province = PREV
					owner = ROOT
					earmark = summoned_zombiehorde_8
					troops = {
						undead_horde = {
							2500 2500
						}
					}
					cannot_inherit = yes
					attrition = 0
				}
				spawn_unit = {
					province = PREV
					owner = ROOT
					earmark = summoned_zombiehorde_8
					troops = {
						undead_horde = {
							2000 2000
						}
					}
					cannot_inherit = yes
					attrition = 0
				}
				spawn_unit = {
					province = PREV
					owner = ROOT
					earmark = summoned_zombiehorde_8
					troops = {
						undead_horde = {
							1000 1000
						}
					}
					cannot_inherit = yes
					attrition = 0
				}
				spawn_unit = {
					province = PREV
					owner = ROOT
					earmark = summoned_zombiehorde_8
					troops = {
						undead_horde = {
							1000 1000
						}
					}
					cannot_inherit = yes
					attrition = 0
				}
				spawn_unit = {
					province = PREV
					owner = ROOT
					earmark = summoned_zombiehorde_8
					troops = {
						undead_horde = {
							1000 1000
						}
					}
					cannot_inherit = yes
					attrition = 0
				}
				spawn_unit = {
					province = PREV
					owner = ROOT
					earmark = summoned_zombiehorde_8
					troops = {
						undead_horde = {
							1000 1000
						}
					}
					cannot_inherit = yes
					attrition = 0
				}
				spawn_unit = {
					province = PREV
					owner = ROOT
					earmark = summoned_zombiehorde_8
					troops = {
						undead_horde = {
							1000 1000
						}
					}
					cannot_inherit = yes
					attrition = 0
				}
				spawn_unit = {
					province = PREV
					owner = ROOT
					earmark = summoned_zombiehorde_8
					troops = {
						undead_horde = {
							1000 1000
						}
					}
					cannot_inherit = yes
					attrition = 0
				}
			}
		}
	}
}

# The undead fall apart
character_event = {
	id = svampires.12008
	desc = EVTDESCAsvampires12008
	picture = "GFX_evt_zombies"
	border = GFX_event_normal_frame_war
	notification = yes
	is_triggered_only = yes

	immediate = {
		log = "work event id = svampires.12008 for [Root.GetBestName]"
		disband_event_forces = summoned_zombiehorde_8
	}

	option = {
	}
}

# Small Endless horde
character_event = {
	id = svampires.11009
	desc = EVTDESCAsvampires11009
	picture = "GFX_evt_zombies"
	border = GFX_event_normal_frame_war
	is_triggered_only = yes

	immediate = {
		log = "work event id = svampires.11009 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTAsvampires11009
		hidden_tooltip = {
			ROOT = {
				character_event = {
					id = svampires.12009 days = 450 random = 890
				}
			}
		}
		location = {
			add_province_modifier = {
				name = province_tainted_5
				duration = 2000
			}
			ROOT = {
				spawn_unit = {
					province = PREV
					owner = ROOT
					earmark = summoned_zombiehorde_9
					troops = {
						undead_horde = {
							2500 2500
						}
					}
					cannot_inherit = yes
					reinforces = yes
					attrition = 0
				}
				spawn_unit = {
					province = PREV
					owner = ROOT
					earmark = summoned_zombiehorde_9
					troops = {
						undead_horde = {
							2500 2500
						}
					}
					cannot_inherit = yes
					reinforces = yes
					attrition = 0
				}
				spawn_unit = {
					province = PREV
					owner = ROOT
					earmark = summoned_zombiehorde_9
					troops = {
						undead_horde = {
							2500 2500
						}
					}
					cannot_inherit = yes
					reinforces = yes
					attrition = 0
				}
				spawn_unit = {
					province = PREV
					owner = ROOT
					earmark = summoned_zombiehorde_9
					troops = {
						undead_horde = {
							1500 1500
						}
					}
					cannot_inherit = yes
					attrition = 0
				}
				spawn_unit = {
					province = PREV
					owner = ROOT
					earmark = summoned_zombiehorde_9
					troops = {
						undead_horde = {
							1500 1500
						}
					}
					cannot_inherit = yes
					attrition = 0
				}
				spawn_unit = {
					province = PREV
					owner = ROOT
					earmark = summoned_zombiehorde_9
					troops = {
						undead_horde = {
							1500 1500
						}
					}
					cannot_inherit = yes
					attrition = 0
				}
				spawn_unit = {
					province = PREV
					owner = ROOT
					earmark = summoned_zombiehorde_9
					troops = {
						undead_horde = {
							1500 1500
						}
					}
					cannot_inherit = yes
					attrition = 0
				}
				spawn_unit = {
					province = PREV
					owner = ROOT
					earmark = summoned_zombiehorde_9
					troops = {
						undead_horde = {
							1000 1000
						}
					}
					cannot_inherit = yes
					attrition = 0
				}
				spawn_unit = {
					province = PREV
					owner = ROOT
					earmark = summoned_zombiehorde_9
					troops = {
						undead_horde = {
							1000 1000
						}
					}
					cannot_inherit = yes
					attrition = 0
				}
			}
		}
	}
}

# The undead fall apart
character_event = {
	id = svampires.12009
	desc = EVTDESCAsvampires12009
	picture = "GFX_evt_zombies"
	border = GFX_event_normal_frame_war
	notification = yes
	is_triggered_only = yes

	immediate = {
		log = "work event id = svampires.12009 for [Root.GetBestName]"
		disband_event_forces = summoned_zombiehorde_9
	}

	option = {
	}
}

# Big Endless horde
character_event = {
	id = svampires.11010
	desc = EVTDESCAsvampires11010
	picture = "GFX_evt_zombies"
	border = GFX_event_normal_frame_war
	is_triggered_only = yes

	immediate = {
		log = "work event id = svampires.11010 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTAsvampires11010
		hidden_tooltip = {
			ROOT = {
				character_event = {
					id = svampires.12010 days = 450 random = 890
				}
			}
		}
		location = {
			add_province_modifier = {
				name = province_tainted_5
				duration = 2000
			}
			ROOT = {
				spawn_unit = {
					province = PREV
					owner = ROOT
					earmark = summoned_zombiehorde_10
					troops = {
						undead_horde = {
							2500 2500
						}
					}
					cannot_inherit = yes
					attrition = 0
					reinforces = yes
				}
				spawn_unit = {
					province = PREV
					owner = ROOT
					earmark = summoned_zombiehorde_10
					troops = {
						undead_horde = {
							2500 2500
						}
					}
					cannot_inherit = yes
					attrition = 0
					reinforces = yes
				}
				spawn_unit = {
					province = PREV
					owner = ROOT
					earmark = summoned_zombiehorde_10
					troops = {
						undead_horde = {
							2500 2500
						}
					}
					cannot_inherit = yes
					attrition = 0
					reinforces = yes
				}
				spawn_unit = {
					province = PREV
					owner = ROOT
					earmark = summoned_zombiehorde_10
					troops = {
						undead_horde = {
							2500 2500
						}
					}
					cannot_inherit = yes
					attrition = 0
				}
				spawn_unit = {
					province = PREV
					owner = ROOT
					earmark = summoned_zombiehorde_10
					troops = {
						undead_horde = {
							2500 2500
						}
					}
					cannot_inherit = yes
					attrition = 0
				}
				spawn_unit = {
					province = PREV
					owner = ROOT
					earmark = summoned_zombiehorde_10
					troops = {
						undead_horde = {
							1500 1500
						}
					}
					cannot_inherit = yes
					attrition = 0
				}
				spawn_unit = {
					province = PREV
					owner = ROOT
					earmark = summoned_zombiehorde_10
					troops = {
						undead_horde = {
							1500 1500
						}
					}
					cannot_inherit = yes
					attrition = 0
				}
				spawn_unit = {
					province = PREV
					owner = ROOT
					earmark = summoned_zombiehorde_10
					troops = {
						undead_horde = {
							1500 1500
						}
					}
					cannot_inherit = yes
					attrition = 0
				}
				spawn_unit = {
					province = PREV
					owner = ROOT
					earmark = summoned_zombiehorde_10
					troops = {
						undead_horde = {
							1500 1500
						}
					}
					cannot_inherit = yes
					attrition = 0
				}
				spawn_unit = {
					province = PREV
					owner = ROOT
					earmark = summoned_zombiehorde_10
					troops = {
						undead_horde = {
							1000 1000
						}
					}
					cannot_inherit = yes
					attrition = 0
				}
				spawn_unit = {
					province = PREV
					owner = ROOT
					earmark = summoned_zombiehorde_10
					troops = {
						undead_horde = {
							1000 1000
						}
					}
					cannot_inherit = yes
					attrition = 0
				}
			}
		}
	}
}

# The undead fall apart
character_event = {
	id = svampires.12010
	desc = EVTDESCAsvampires12010
	picture = "GFX_evt_zombies"
	border = GFX_event_normal_frame_war
	notification = yes
	is_triggered_only = yes

	immediate = {
		log = "work event id = svampires.12010 for [Root.GetBestName]"
		disband_event_forces = summoned_zombiehorde_10
	}

	option = {
	}
}

# Ping the Carstein Ring owner for stealing
character_event = {
	id = svampires.13
	hide_window = yes
	is_triggered_only = yes

	immediate = {
		log = "work event id = svampires.13 for [Root.GetBestName]"
		FROM = {
			character_event = {
				id = svampires.13001
			}
		}
	}
}

# What to do with the Ring?
character_event = {
	id = svampires.13001
	desc = EVTDESCAsvampires13001
	picture = "GFX_evt_carstein"
	border = GFX_event_normal_frame_war

	trigger = {
		has_plot = plot_steal_carstein_ring
	}
	is_triggered_only = yes

	immediate = {
		log = "work event id = svampires.13001 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTAsvampires13001
		# Steal for yourself
		trigger = {
			is_vampire_trigger = yes
		}
		any_artifact = {
			limit = {
				has_artifact_flag = carstein_ring
			}
			transfer_artifact = {
				from = from
				to = root
			}
		}
		if = {
			limit = {
				religion_group = necromantic_group
			}
			piety = 250
			prestige = 250
			FROM = {
				any_demesne_title = {
					ROOT = {
						add_claim = PREV
					}
				}
			}
		}
		ai_chance = {
			factor = 100
		}
		hidden_tooltip = {
			any_playable_ruler = {
				limit = {
					OR = {
						culture_group = imperial_group
						culture_group = kislevite_group
						culture_group = estalian_group
						culture_group = tilean_group
						culture_group = bretonnian_group
						culture_group = dwarf_group
					}
					ai = no
				}
				character_event = {
					id = svampires.13002 days = 7
				}
			}
			any_playable_ruler = {
				limit = {
					NOT = {
						culture_group = imperial_group
					}
					NOT = {
						culture_group = kislevite_group
					}
					NOT = {
						culture_group = estalian_group
					}
					NOT = {
						culture_group = tilean_group
					}
					NOT = {
						culture_group = bretonnian_group
					}
					NOT = {
						culture_group = dwarf_group
					}
					ai = no
				}
				character_event = {
					id = svampires.13002 days = 30
				}
			}
		}
	}

	option = {
		name = EVTOPTBsvampires13001
		# Destroy it
		ai_chance = {
			factor = 100
			modifier = {
				factor = 0
				is_vampire_trigger = yes
			}
		}
		hidden_tooltip = {
			FROM = {
				destroy_artifact = carstein_ring
			}
			if = {
				limit = {
					NOT = {
						religion_group = necromantic_group
					}
				}
				piety = 1000
				prestige = 500
			}
			any_playable_ruler = {
				limit = {
					OR = {
						culture_group = imperial_group
						culture_group = kislevite_group
						culture_group = estalian_group
						culture_group = tilean_group
						culture_group = bretonnian_group
						culture_group = dwarf_group
					}
					ai = no
				}
				character_event = {
					id = carstein.8 days = 7
				}
			}
			any_playable_ruler = {
				limit = {
					NOT = {
						culture_group = imperial_group
					}
					NOT = {
						culture_group = kislevite_group
					}
					NOT = {
						culture_group = estalian_group
					}
					NOT = {
						culture_group = tilean_group
					}
					NOT = {
						culture_group = bretonnian_group
					}
					NOT = {
						culture_group = dwarf_group
					}
					ai = no
				}
				character_event = {
					id = carstein.8 days = 30
				}
			}
		}
	}
}

# Another vampire has taken the ring
character_event = {
	id = svampires.13002
	desc = EVTDESCAsvampires13002
	picture = "GFX_evt_carstein"
	border = GFX_event_normal_frame_war
	is_triggered_only = yes

	immediate = {
		log = "work event id = svampires.13002 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTAsvampires13002

	}
}

# PLOT TO STEAL THE RING
# The plotter sees an opportunity
character_event = {
	id = svampires.14
	desc = "EVTDESCsvampires14"
	picture = GFX_evt_whispers
	border = GFX_event_normal_frame_intrigue
	capable_only = yes
	prisoner = no
	is_part_of_plot = yes
	is_triggered_only = yes

	trigger = {
		has_plot = plot_steal_carstein_ring
		plot_target_char = {
			age = 16
			prisoner = no
			# at_location = ROOT # The Plot Head needs to be at the target's location to get a chance
			NOT = {
				trait = incapable
			}
			# NOT = { trait = in_hiding }
		}
		NOT = {
			has_character_flag = ringstealing_in_motion
		}
		plot_power_contribution =
		{
			plotter = ROOT
			power = 0.025
		}
	}

	weight_multiplier = {
		factor = 0.01429
		modifier = {
			factor = 1.43
			plot_target_char = {
				check_variable = {
					which = carstein_death_count
					value = 3
				}
			}
		}
		modifier = {
			factor = 1.67
			plot_target_char = {
				check_variable = {
					which = carstein_death_count
					value = 5
				}
			}
		}
		modifier = {
			factor = 1.67
			plot_target_char = {
				check_variable = {
					which = carstein_death_count
					value = 8
				}
			}
		}
		modifier = {
			factor = 1.67
			plot_target_char = {
				check_variable = {
					which = carstein_death_count
					value = 10
				}
			}
		}
		modifier = {
			factor = 1.67
			plot_target_char = {
				in_command = yes
			}
		}
		modifier = {
			factor = 1.67
			plot_target_char = {
				realm_size = 150
			}
		}
		modifier = {
			factor = 1.25
			learning = 10
		}
		modifier = {
			factor = 1.25
			learning = 15
		}
		modifier = {
			factor = 1.25
			learning = 20
		}
		modifier = {
			factor = 1.25
			learning = 25
		}
		modifier = {
			factor = 1.43
			has_focus = focus_intrigue
		}
		modifier = {
			factor = 1.43
			trait = schemer
		}
		modifier = {
			factor = 0.59
			plot_target_char = {
				trait = in_hiding
			}
		}
		modifier = {
			factor = 1.43
			plot_power_contribution =
			{
				plotter = ROOT
				power = 0.40
			}
		}
		modifier = {
			factor = 1.43
			plot_power_contribution =
			{
				plotter = ROOT
				power = 0.50
			}
		}
		modifier = {
			factor = 1.43
			plot_power_contribution =
			{
				plotter = ROOT
				power = 0.60
			}
		}
		modifier = {
			factor = 1.43
			plot_power_contribution =
			{
				plotter = ROOT
				power = 0.70
			}
		}
		modifier = {
			factor = 1.43
			plot_power_contribution =
			{
				plotter = ROOT
				power = 0.80
			}
		}
		modifier = {
			factor = 1.43
			plot_power_contribution =
			{
				plotter = ROOT
				power = 0.90
			}
		}
		modifier = {
			factor = 1.43
			plot_power_contribution =
			{
				plotter = ROOT
				power = 1.0
			}
		}
		modifier = {
			factor = 2.00
			plot_power_contribution =
			{
				plotter = ROOT
				power = 1.5
			}
		}
		modifier = {
			factor = 3.03
			any_backed_character = {
				has_plot = plot_steal_carstein_ring
				plot_power = 1.0
			}
		}
		modifier = {
			factor = 3.03
			any_backed_character = {
				has_plot = plot_steal_carstein_ring
				plot_power = 1.5
			}
		}
		modifier = {
			factor = 3.03
			any_backed_character = {
				has_plot = plot_steal_carstein_ring
				plot_power = 2.0
			}
		}
	}

	immediate = {
		log = "work event id = svampires.14 for [Root.GetBestName]"
	}

	option = {
		name = "EVTOPTAsvampires14" # The conspirators provide the poison
		trigger = {
			plot_power = 1.0
		}
		hidden_tooltip = {
			any_plot_backer = {
				character_event = {
					id = svampires.14012 days = 1
				}
			}
		}
		set_character_flag = ringstealing_in_motion
		plot_target_char = {
			character_event = {
				id = svampires.14005 days = 30 tooltip = "EVTTOOLTIPsvampires14005"
			}
		}
	}

	option = {
		name = "EVTOPTBsvampires14" # Buy the poison
		trigger = {
			NOT = {
				plot_power = 0.5
			}
			NOT = {
				learning = 10
			}
		}
		scaled_wealth = -1.0
		hidden_tooltip = {
			any_plot_backer = {
				character_event = {
					id = svampires.14012 days = 1
				}
			}
		}
		set_character_flag = ringstealing_in_motion
		plot_target_char = {
			character_event = {
				id = svampires.14005 days = 30 tooltip = "EVTTOOLTIPsvampires14005"
			}
		}
	}

	option = {
		name = "EVTOPTBsvampires14" # Buy the poison
		trigger = {
			plot_power = 0.5
			NOT = {
				plot_power = 1.0
			}
			NOT = {
				learning = 10
			}
		}
		scaled_wealth = -0.5
		hidden_tooltip = {
			any_plot_backer = {
				character_event = {
					id = svampires.14012 days = 1
				}
			}
		}
		set_character_flag = ringstealing_in_motion
		plot_target_char = {
			character_event = {
				id = svampires.14005 days = 30 tooltip = "EVTTOOLTIPsvampires14005"
			}
		}
	}

	option = {
		name = "EVTOPTCsvampires14" # Hemlock goes well with the Red...
		tooltip_info = learning
		trigger = {
			plot_power = 0.5
			learning = 10
		}
		hidden_tooltip = {
			any_plot_backer = {
				character_event = {
					id = svampires.14012 days = 1
				}
			}
		}
		set_character_flag = ringstealing_in_motion
		plot_target_char = {
			character_event = {
				id = svampires.14005 days = 30 tooltip = "EVTTOOLTIPsvampires14005"
			}
		}
	}

	option = {
		name = "EVTOPTDsvampires14" # I cannot afford this
		trigger = {
			ai = no
			NOT = {
				learning = 10
			}
			NOT = {
				plot_power = 1.0
			}
		}
	}
}

# A plot backer sees an opportunity - Stealing the Ring
character_event = {
	id = svampires.14001
	desc = EVTDESCsvampires14001
	picture = GFX_evt_whispers
	border = GFX_event_normal_frame_intrigue
	capable_only = yes
	prisoner = no
	is_part_of_plot = yes
	is_triggered_only = yes

	trigger = {
		any_backed_character = {
			has_plot = plot_steal_carstein_ring
			plot_power = 0.5
			plot_target_char = {
				age = 16
				prisoner = no
				NOT = {
					trait = incapable
				}
				# NOT = { trait = in_hiding }
			}
			NOT = {
				has_character_flag = ringstealing_in_motion
			}
			ROOT = {
				plot_power_contribution =
				{
					plotter = PREV
					power = 0.025
				}
			}
		}
	}

	weight_multiplier = {
		factor = 0.02857
		modifier = {
			factor = 1.43
			plot_target_char = {
				check_variable = {
					which = carstein_death_count
					value = 3
				}
			}
		}
		modifier = {
			factor = 1.67
			plot_target_char = {
				check_variable = {
					which = carstein_death_count
					value = 5
				}
			}
		}
		modifier = {
			factor = 1.67
			plot_target_char = {
				check_variable = {
					which = carstein_death_count
					value = 8
				}
			}
		}
		modifier = {
			factor = 1.67
			plot_target_char = {
				check_variable = {
					which = carstein_death_count
					value = 10
				}
			}
		}
		modifier = {
			factor = 1.67
			plot_target_char = {
				in_command = yes
			}
		}
		modifier = {
			factor = 1.67
			plot_target_char = {
				realm_size = 150
			}
		}
		modifier = {
			factor = 1.25
			learning = 10
		}
		modifier = {
			factor = 1.25
			learning = 15
		}
		modifier = {
			factor = 1.25
			learning = 20
		}
		modifier = {
			factor = 1.25
			learning = 25
		}
		modifier = {
			factor = 1.43
			has_focus = focus_intrigue
		}
		modifier = {
			factor = 1.43
			trait = schemer
		}
		modifier = {
			factor = 0.59
			plot_target_char = {
				trait = in_hiding
			}
		}
		modifier = {
			factor = 1.67
			any_backed_character = {
				has_plot = plot_steal_carstein_ring
				ROOT = {
					plot_power_contribution =
					{
						plotter = PREV
						power = 0.10
					}
				}
			}
		}
		modifier = {
			factor = 1.67
			any_backed_character = {
				has_plot = plot_steal_carstein_ring
				ROOT = {
					plot_power_contribution =
					{
						plotter = PREV
						power = 0.20
					}
				}
			}
		}
		modifier = {
			factor = 1.67
			any_backed_character = {
				has_plot = plot_steal_carstein_ring
				ROOT = {
					plot_power_contribution =
					{
						plotter = PREV
						power = 0.30
					}
				}
			}
		}
		modifier = {
			factor = 1.67
			any_backed_character = {
				has_plot = plot_steal_carstein_ring
				ROOT = {
					plot_power_contribution =
					{
						plotter = PREV
						power = 0.40
					}
				}
			}
		}
		modifier = {
			factor = 1.67
			any_backed_character = {
				has_plot = plot_steal_carstein_ring
				ROOT = {
					plot_power_contribution =
					{
						plotter = PREV
						power = 0.50
					}
				}
			}
		}
		modifier = {
			factor = 1.67
			any_backed_character = {
				has_plot = plot_steal_carstein_ring
				ROOT = {
					plot_power_contribution =
					{
						plotter = PREV
						power = 0.60
					}
				}
			}
		}
		modifier = {
			factor = 1.67
			any_backed_character = {
				has_plot = plot_steal_carstein_ring
				ROOT = {
					plot_power_contribution =
					{
						plotter = PREV
						power = 0.70
					}
				}
			}
		}
		modifier = {
			factor = 1.67
			any_backed_character = {
				has_plot = plot_steal_carstein_ring
				ROOT = {
					plot_power_contribution =
					{
						plotter = PREV
						power = 0.80
					}
				}
			}
		}
		modifier = {
			factor = 1.67
			any_backed_character = {
				has_plot = plot_steal_carstein_ring
				ROOT = {
					plot_power_contribution =
					{
						plotter = PREV
						power = 0.90
					}
				}
			}
		}
		modifier = {
			factor = 3.03
			any_backed_character = {
				has_plot = plot_steal_carstein_ring
				plot_power = 1.0
			}
		}
		modifier = {
			factor = 3.03
			any_backed_character = {
				has_plot = plot_steal_carstein_ring
				plot_power = 1.5
			}
		}
		modifier = {
			factor = 3.03
			any_backed_character = {
				has_plot = plot_steal_carstein_ring
				plot_power = 2.0
			}
		}
	}

	immediate = {
		log = "work event id = svampires.14001 for [Root.GetBestName]"
	}

	option = {
		name = "EVTOPTAsvampires14001" # The conspirators provide the poison
		trigger = {
			any_backed_character = {
				has_plot = plot_steal_carstein_ring
				plot_power = 1.0
			}
		}
		random_backed_character = {
			limit = {
				has_plot = plot_steal_carstein_ring
				plot_power = 1.0
			}
			character_event = {
				id = svampires.14010 days = 3 tooltip = "EVTTOOLTIPsvampires14010"
			}
			set_character_flag = ringstealing_in_motion
		}
	}

	option = {
		name = "EVTOPTBsvampires14001" # Ask the Plotter for funds
		trigger = {
			NOT = {
				learning = 10
			}
			NOT = {
				any_backed_character = {
					has_plot = plot_steal_carstein_ring
					plot_power = 1.0
				}
			}
		}
		random_backed_character = {
			limit = {
				has_plot = plot_steal_carstein_ring
				NOT = {
					plot_power = 1.0
				}
			}
			character_event = {
				id = svampires.14002 days = 3 tooltip = "EVTTOOLTIPsvampires14002"
			}
			set_character_flag = ringstealing_in_motion
		}
	}

	option = {
		name = "EVTOPTBsvampires14001" # Buy the poison
		trigger = {
			NOT = {
				learning = 10
			}
			NOT = {
				any_backed_character = {
					has_plot = plot_steal_carstein_ring
					plot_power = 1.0
				}
			}
		}
		scaled_wealth = -0.5
		random_backed_character = {
			limit = {
				has_plot = plot_steal_carstein_ring
				NOT = {
					plot_power = 1.0
				}
			}
			character_event = {
				id = svampires.14010 days = 3 tooltip = "EVTTOOLTIPsvampires14010"
			}
			set_character_flag = ringstealing_in_motion
		}
	}

	option = {
		name = "EVTOPTCsvampires14001" # Hemlock goes well with the Red...
		tooltip_info = learning
		trigger = {
			learning = 10
			any_backed_character = {
				has_plot = plot_steal_carstein_ring
				plot_power = 0.5
			}
		}
		random_backed_character = {
			limit = {
				has_plot = plot_steal_carstein_ring
				plot_power = 0.5
			}
			character_event = {
				id = svampires.14010 days = 3 tooltip = "EVTTOOLTIPsvampires14010"
			}
			set_character_flag = ringstealing_in_motion
		}
	}

	option = {
		name = "EVTOPTDsvampires14001" # I cannot afford this
		trigger = {
			ai = no
			NOT = {
				learning = 10
			}
			NOT = {
				any_backed_character = {
					has_plot = plot_steal_carstein_ring
					plot_power = 1.0
				}
			}
		}
	}
}

# Stealing the Ring - Plot backer requests funds
character_event = {
	id = svampires.14002
	desc = "EVTDESCsvampires14002"
	picture = GFX_evt_spymaster
	border = GFX_event_normal_frame_intrigue
	is_triggered_only = yes

	immediate = {
		log = "work event id = svampires.14002 for [Root.GetBestName]"
	}

	option = {
		name = "EVTOPTAsvampires14002"
		transfer_scaled_wealth = {
			from = ROOT
			to = FROM
			value = 1.0
		}
		FROM = {
			character_event = {
				id = svampires.14003 tooltip = "EVTTOOLTIPsvampires14003"
			}
		}
	}

	option = {
		name = "EVTOPTBsvampires14002"
		FROM = {
			character_event = {
				id = svampires.14004 tooltip = "EVTTOOLTIPsvampires14004"
			}
		}
	}
}

# Stealing the Ring - plot backer receives funds
character_event = {
	id = svampires.14003
	desc = "EVTDESCsvampires14003"
	picture = GFX_evt_spymaster
	border = GFX_event_normal_frame_intrigue
	is_triggered_only = yes

	immediate = {
		log = "work event id = svampires.14003 for [Root.GetBestName]"
	}

	option = {
		name = "EXCELLENT"
		FROM = {
			plot_target_char = {
				character_event = {
					id = svampires.14005 days = 27 tooltip = "EVTTOOLTIPsvampires14005"
				}
			}
		}
	}
}

# Stealing the Ring - plot backer does NOT receive funds
character_event = {
	id = svampires.14004
	desc = "EVTDESCsvampires14004"
	picture = GFX_evt_spymaster
	border = GFX_event_normal_frame_intrigue
	is_triggered_only = yes

	immediate = {
		log = "work event id = svampires.14004 for [Root.GetBestName]"
	}

	option = {
		name = "EVTOPTAsvampires14004" # Pay for it myself
		scaled_wealth = -1.0
		FROM = {
			plot_target_char = {
				character_event = {
					id = svampires.14005 days = 27 tooltip = "EVTTOOLTIPsvampires14005"
				}
			}
		}
	}

	option = {
		name = "EVTOPTBsvampires14004" # Screw this
		clr_character_flag = ringstealing_in_motion
	}
}

# Stealing the Ring - the stealing attempt
character_event = {
	id = svampires.14005
	desc = EVTDESCsvampires14005
	picture = GFX_evt_shadow
	border = GFX_event_normal_frame_intrigue
	hide_from = yes
	is_triggered_only = yes
	prisoner = no

	trigger = {
		# Is the plot still in motion?
		OR = {
			FROM = {
				has_plot = plot_steal_carstein_ring
				plot_target_char = {
					character = ROOT
				}
			}
			FROMFROM = {
				has_plot = plot_steal_carstein_ring
				plot_target_char = {
					character = ROOT
				}
			}
		}
	}

	immediate = {
		log = "work event id = svampires.14005 for [Root.GetBestName]"
		save_event_target_as = target_victim
	}

	option = {
		name = "EVTOPTAsvampires14005" # Drinks the wine
		trigger = {
			NOT = {
				OR = {
					AND = {
						trait = paranoid
						random = 33
					}
					AND = {
						trait = slothful
						random = 50
					}
					AND = {
						in_command = yes
						random = 90
					}
					AND = {
						NOT = {
							trait = slothful
						}
						NOT = {
							in_command = yes
						}
						NOT = {
							trait = paranoid
						}
						random = 75
					}
				}
			}
		}
		hidden_tooltip = {
			random_list = {
				25 = {
					FROM = {
						character_event = {
							id = svampires.14013 days = 1
						}
					}
					FROMFROM = {
						character_event = {
							id = svampires.14013 days = 1
						}
					}
					character_event = {
						id = svampires.14006 days = 1
					} # Stolen, thief discovered
				}
				75 = {
					FROM = {
						character_event = {
							id = svampires.14014 days = 1
						}
					}
					FROMFROM = {
						character_event = {
							id = svampires.14014 days = 1
						}
					}
					character_event = {
						id = svampires.14007 days = 1
					} # Stolen, thief unknown
				}
			}
		}
	}

	option = {
		name = "EVTOPTBsvampires14005" # Discovers the poison
		trigger = {
			OR = {
				AND = {
					trait = paranoid
					random = 33
				}
				AND = {
					trait = slothful
					random = 50
				}
				AND = {
					in_command = yes
					random = 90
				}
				AND = {
					NOT = {
						trait = slothful
					}
					NOT = {
						in_command = yes
					}
					NOT = {
						trait = paranoid
					}
					random = 75
				}
			}
		}
		hidden_tooltip = {
			random_list = {
				50 = {
					hidden_tooltip = {
						FROM = {
							character_event = {
								id = svampires.14015 days = 1
							}
						}
						FROMFROM = {
							character_event = {
								id = svampires.14015 days = 1
							}
						}
					}
					character_event = {
						id = svampires.14008 days = 1
					} # Not stolen, thief discovered
				}
				50 = {
					hidden_tooltip = {
						FROM = {
							character_event = {
								id = svampires.14016 days = 1
							}
						}
						FROMFROM = {
							character_event = {
								id = svampires.14016 days = 1
							}
						}
					}
					character_event = {
						id = svampires.14009 days = 1
					} # Not stolen, thief unknown
				}
			}
		}
	}
}

# Stealing the Ring - Stolen, thief(s) discovered
character_event = {
	id = svampires.14006
	desc = EVTDESCsvampires14006
	picture = GFX_evt_shadow
	border = GFX_event_normal_frame_intrigue
	is_triggered_only = yes

	immediate = {
		log = "work event id = svampires.14006 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTAsvampires14006
		hidden_tooltip = {
			if = {
				limit = {
					FROMFROMFROM = {
						has_plot = plot_steal_carstein_ring
						plot_target_char = {
							character = ROOT
						}
					}
				}
				opinion = {
					who = FROMFROMFROM
					modifier = opinion_stolen_ring
					months = 24000
				}
				FROMFROMFROM = {
					random_list = {
						70 = {
							character_event = {
								id = svampires.14017 days = 5 random = 7
							}
						} # the thief disappears
						30 = {
							character_event = {
								id = svampires.13001 days = 5 random = 7
							}
						}
					}
				}
			}
			if = {
				limit = {
					is_alive = yes
				}
				opinion = {
					who = FROMFROM
					modifier = opinion_stolen_ring
					months = 24000
				}
				FROMFROM = {
					random_list = {
						70 = {
							character_event = {
								id = svampires.14017 days = 5 random = 7
							}
						} # the thief disappears
						30 = {
							character_event = {
								id = svampires.13001 days = 5 random = 7
							}
						}
					}
				}
			}
		}
	}
}

# Stealing the Ring - Stolen, thief NOT discovered
character_event = {
	id = svampires.14007
	desc = "EVTDESCsvampires14007"
	picture = GFX_evt_shadow
	border = GFX_event_normal_frame_intrigue
	hide_from = yes
	is_triggered_only = yes

	immediate = {
		log = "work event id = svampires.14007 for [Root.GetBestName]"
	}

	option = {
		name = "EVTOPTAsvampires14007"
		hidden_tooltip = {
			if = {
				limit = {
					FROMFROMFROM = {
						has_plot = plot_steal_carstein_ring
						plot_target_char = {
							character = ROOT
						}
					}
				}
				opinion = {
					who = FROMFROMFROM
					modifier = opinion_stolen_ring
					months = 24000
				}
				FROMFROMFROM = {
					random_list = {
						40 = {
							character_event = {
								id = svampires.14017 days = 5 random = 7
							}
						} # the thief disappears
						60 = {
							character_event = {
								id = svampires.13001 days = 5 random = 7
							}
						}
					}
				}
			}
			if = {
				limit = {
					is_alive = yes
				}
				opinion = {
					who = FROMFROM
					modifier = opinion_stolen_ring
					months = 24000
				}
				FROMFROM = {
					random_list = {
						40 = {
							character_event = {
								id = svampires.14017 days = 5 random = 7
							}
						} # the thief disappears
						60 = {
							character_event = {
								id = svampires.13001 days = 5 random = 7
							}
						}
					}
				}
			}
		}
	}
}

# Stealing the Ring - Not stolen, thief discovered
character_event = {
	id = svampires.14008
	desc = "EVTDESCsvampires14008"
	picture = GFX_evt_shadow
	border = GFX_event_normal_frame_intrigue
	is_triggered_only = yes

	immediate = {
		log = "work event id = svampires.14008 for [Root.GetBestName]"
	}

	option = {
		name = "EVTOPTAsvampires14008"
	}
}

# Stealing the Ring - Not stolen, thief NOT discovered
character_event = {
	id = svampires.14009
	desc = "EVTDESCsvampires14009"
	picture = GFX_evt_shadow
	border = GFX_event_normal_frame_intrigue
	hide_from = yes
	is_triggered_only = yes

	immediate = {
		log = "work event id = svampires.14009 for [Root.GetBestName]"
	}

	option = {
		name = "EVTOPTAsvampires14009"
	}
}

# Stealing the Ring - Backer informs Plotter of plan
character_event = {
	id = svampires.14010
	desc = "EVTDESCsvampires14010"
	picture = GFX_evt_whispers
	border = GFX_event_normal_frame_intrigue
	is_triggered_only = yes

	immediate = {
		log = "work event id = svampires.14010 for [Root.GetBestName]"
	}

	option = {
		name = "EVTOPTAsvampires14010"
		FROM = {
			character_event = {
				id = svampires.14011 tooltip = "EVTTOOLTIPsvampires14011"
			}
		}
		hidden_tooltip = {
			any_plot_backer = {
				limit = {
					NOT = {
						character = FROM
					}
				}
				character_event = {
					id = svampires.14012 days = 1
				}
			}
		}
	}
}

# Stealing the Ring - Plotter tells backer to go ahead
character_event = {
	id = svampires.14011
	desc = "EVTDESCsvampires14011"
	picture = GFX_evt_whispers
	border = GFX_event_normal_frame_intrigue
	is_triggered_only = yes

	immediate = {
		log = "work event id = svampires.14011 for [Root.GetBestName]"
	}

	option = {
		name = "EVTOPTAsvampires14011"
		FROM = {
			plot_target_char = {
				character_event = {
					id = svampires.14005 days = 27 tooltip = "EVTTOOLTIPsvampires14005"
				}
			}
		}
	}
}

# Stealing the Ring - Initiator informs other plotter
character_event = {
	id = svampires.14012
	desc = "EVTDESCsvampires14012"
	picture = GFX_evt_whispers
	border = GFX_event_normal_frame_intrigue
	is_triggered_only = yes

	immediate = {
		log = "work event id = svampires.14012 for [Root.GetBestName]"
	}

	option = {
		name = "EVTOPTAsvampires14012"
	}
}

# Stealing the Ring - Notification: Success, but discovered
character_event = {
	id = svampires.14013
	desc = EVTDESCsvampires14013
	picture = GFX_evt_shadowy_cabal
	border = GFX_event_normal_frame_intrigue
	is_triggered_only = yes

	immediate = {
		log = "work event id = svampires.14013 for [Root.GetBestName]"
		character_event = {
			id = 10
		} # Consequences of discovery
		clear_event_target = target_victim
	}

	option = {
		name = "EVTOPTAsvampires14013"
	}
}

# Stealing the Ring - Notification: Success, and NOT discovered
character_event = {
	id = svampires.14014
	desc = "EVTDESCsvampires14014"
	picture = GFX_evt_shadowy_cabal
	border = GFX_event_normal_frame_intrigue
	is_triggered_only = yes

	immediate = {
		log = "work event id = svampires.14014 for [Root.GetBestName]"
	}

	option = {
		name = "EVTOPTAsvampires14014"
	}
}

# Stealing the Ring - Notification: Failure, and discovered
character_event = {
	id = svampires.14015
	desc = "EVTDESCsvampires14015"
	picture = GFX_evt_shadowy_cabal
	border = GFX_event_normal_frame_intrigue
	is_triggered_only = yes

	immediate = {
		log = "work event id = svampires.14015 for [Root.GetBestName]"
		character_event = {
			id = 11
		} # Consequences of discovery
		clear_event_target = target_victim
		if = {
			limit = {
				plot_target_char = {
					character = FROM
				}
				has_plot = plot_steal_carstein_ring
			}
			reveal_plot = yes
		}
	}

	option = {
		name = "EVTOPTAsvampires14015"
		if = {
			limit = {
				plot_target_char = {
					character = FROM
				}
				has_plot = plot_steal_carstein_ring
			}
			clr_character_flag = ringstealing_in_motion
			tooltip = {
				reveal_plot = yes
			}
		}
	}
}

# Stealing the Ring - Notification: Failure, but NOT discovered
character_event = {
	id = svampires.14016
	desc = "EVTDESCsvampires14016"
	picture = GFX_evt_shadowy_cabal
	border = GFX_event_normal_frame_intrigue
	is_triggered_only = yes

	immediate = {
		log = "work event id = svampires.14016 for [Root.GetBestName]"
	}

	option = {
		name = "EVTOPTAsvampires14016"
		if = {
			limit = {
				plot_target_char = {
					character = FROM
				}
				has_plot = plot_steal_carstein_ring
			}
			clr_character_flag = ringstealing_in_motion
		}
	}
}

# Stealing the Ring - Notification: The Thief has disappeared
character_event = {
	id = svampires.14017
	desc = "EVTDESCsvampires14017"
	picture = GFX_evt_shadowy_cabal
	border = GFX_event_normal_frame_intrigue
	is_triggered_only = yes

	immediate = {
		log = "work event id = svampires.14017 for [Root.GetBestName]"
	}

	option = {
		name = "EVTOPTAsvampires14017"
		FROM = {
			destroy_artifact = carstein_ring
		}
		if = {
			limit = {
				religion_group = necromantic_group
			}
			prestige = -500
		}
	}
}

# Group of Ghouls arrives in a province
# province_event = {

# 	id = svampires.15
# 	desc = EVTDESCsvampires15

# 	picture = GFX_evt_ghoul
# 	trigger = {

# 		owner = { OR = { trait = vampire_carstein_visible
# 				 trait = vampire_strigoi_visible

# 				 trait = vampire_carstein_hidden
# 				 trait = vampire_strigoi_hidden } }

# 		NOT = { has_building = ca_ghoul_colony_1 }
# 		NOT = { has_building = ct_ghoul_colony_1 }

# 		NOT = { has_building = tp_ghoul_colony_1 }
# 		NOT = { has_building = tb_ghoul_colony_1 }

# 		}
# 	mean_time_to_happen = {

# 		months = 3900
# 		modifier = {

# 			factor = 15
# 			owner = { liege = { any_realm_province = { OR = { has_building = ca_ghoul_colony_1

# 									has_building = ct_ghoul_colony_1
# 									has_building = tp_ghoul_colony_1

# 									has_building = tb_ghoul_colony_1 } } } }
# 			}

# 		modifier = {
# 			factor = 0.5

# 			culture = sylvanian
# 			}

# 		modifier = {
# 			factor = 0.25

# 			owner = { OR = { trait = vampire_strigoi_visible
# 				 trait = vampire_strigoi_hidden } }

# 			}
# 		}

# 	option = {
# 		name = EVTOPTAsvampires15

# 			if = { limit = { is_feudal = yes }
# 				add_building = ca_ghoul_colony_1 }

# 			if = { limit = { is_republic = yes }
# 				add_building = ct_ghoul_colony_1 }

# 			if = { limit = { is_theocracy = yes }
# 				add_building = tp_ghoul_colony_1 }

# 			if = { limit = { is_tribal = yes }
# 				add_building = tb_ghoul_colony_1 }

# 	}
# 	option = {

# 		name = EVTOPTBsvampires15
# 		hidden_tooltip = { random = { chance = 10

# 						add_province_modifier = { name = ghoul_unrest
# 									duration = 1250 } }

# 			 }
# 	}

# }
# The Red Duke starts his invasion
character_event = {
	id = svampires.16
	desc = EVTDESCsvampires16
	picture = GFX_evt_vampire_knight
	border = GFX_event_normal_frame_intrigue
	is_triggered_only = yes

	trigger = {
		has_landed_title = k_red_dukedom
		NOT = {
			has_character_flag = started_duke
		}
		trait = vampire_blood_visible
	}

	immediate = {
		log = "work event id = svampires.16 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTAsvampires16
		set_character_flag = started_duke
		k_aquitaine = {
			e_bretonnia = {
				holder_scope = {
					ROOT = {
						war = {
							casus_belli = claim
							target = PREVPREV # The top liege of the owner of the province
							thirdparty_title = PREVPREVPREV # The de jure kingdom
						}
					}
				}
			}
		}
		location = {
			ROOT = {
				spawn_unit = {
					province = PREV
					reinforces = yes
					troops = {
						vampire_knights = {
							250 250
						}
					}
				}
				spawn_unit = {
					province = PREV
					reinforces = yes
					troops = {
						undead_horde = {
							1500 1500
						}
					}
				}
			}
		}
		ai_chance = {
			factor = 1
		}
	}

	option = {
		name = EVTOPTBsvampires16
		set_character_flag = started_duke
		location = {
			ROOT = {
				spawn_unit = {
					province = PREV
					reinforces = yes
					troops = {
						vampire_knights = {
							50 50
						}
					}
				}
				spawn_unit = {
					province = PREV
					reinforces = yes
					troops = {
						undead_horde = {
							1000 1000
						}
					}
				}
			}
		}
		ai_chance = {
			factor = 0
		}
	}
}

# Vampire mercenary increases size of band
character_event = {
	id = svampires.17
	desc = EVTDESCsvampires17
	picture = GFX_evt_vampire_knight
	border = GFX_event_normal_frame_intrigue
	capable_only = yes
	is_triggered_only = yes

	immediate = {
		log = "work event id = svampires.17 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTAsvampires17
		prestige = 100
	}
}

# Vampire mercenary has completed a quest and sends some spoils to their Grand Master
character_event = {
	id = svampires.18
	desc = EVTDESCsvampires18
	picture = GFX_evt_vampire_knight
	capable_only = yes
	religion_group = necromantic_group
	is_triggered_only = yes

	trigger = {
		trait = vampire_blood_visible
		prestige = 25
		piety = 25
		primary_title = {
			mercenary = yes
			adventurer = yes
		}
	}

	weight_multiplier = {
		factor = 0.33333
		modifier = {
			factor = 1.18
			trait = ambitious

		}
		modifier = {
			factor = 1.18
			trait = brave

		}
		modifier = {
			factor = 0.54
			trait = craven

		}
		modifier = {
			factor = 0.50
			trait = content

		}
	}

	immediate = {
		log = "work event id = svampires.18 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTAsvampires18
		prestige = 200
		wealth = 100
		piety = 100
		if = {
			limit = {
				band_creator = {
					is_alive = yes
				}
			}
			band_creator = {
				character_event = {
					id = svampires.18005
				}
			}
		}
	}
}

# Band creator receives prestige and spoils
character_event = {
	id = svampires.18005
	desc = EVTDESCsvampires18005
	picture = GFX_evt_vampire_knight
	border = GFX_event_normal_frame_intrigue
	capable_only = yes
	is_triggered_only = yes

	immediate = {
		log = "work event id = svampires.18005 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTAsvampires18005
		prestige = 100
		wealth = 250
	}
}

# Hired Captain finds a good candidate in the son of his employer
character_event = {
	id = svampires.19
	hide_window = yes
	is_triggered_only = yes

	trigger = {
		primary_title = {
			mercenary = yes
			band_creator = {
				is_alive = yes
			}
		}
		trait = vampire_blood_visible
		NOT = {
			trait = chaste
		}
		NOT = {
			trait = celibate
		}
		primary_title = {
			capital_scope = {
				owner = {
					any_courtier = {
						is_landed = no
						is_married = no
						is_consort = no
						is_adult = yes
						NOT = {
							trait = incapable
						}
						NOT = {
							trait = infirm
						}
						NOT = {
							trait = maimed
						}
						NOT = {
							trait = blinded
						}
						NOT = {
							trait = eunuch
						}
						NOT = {
							trait = undernourished
						}
						NOT = {
							trait = fat
						}
						NOT = {
							age = 40
						}
						is_vampire_trigger = no
						trait = creature_human
						OR = {
							is_child_of = PREV
							martial = 20
							trait = strong
							trait = tough
							trait = hardy
						}
					}
				}
			}
		}
	}

	weight_multiplier = {
		factor = 1
		modifier = {
			factor = 2
			trait = cruel
		}
		modifier = {
			factor = 2
			trait = greedy
		}
		modifier = {
			factor = 2
			has_character_modifier = bloodthirsty
		}
		modifier = {
			factor = 1.5
			mercenary_employer = {
				is_alive = yes
			}
		}
		modifier = {
			factor = 1.25
			primary_title = {
				capital_scope = {
					owner = {
						any_liege = {
							is_friend = ROOT
						}
					}
				}
			}
		}
		modifier = {
			factor = 1.25
			mercenary_employer = {
				is_friend = ROOT
			}
		}
	}

	immediate = {
		log = "work event id = svampires.19 for [Root.GetBestName]"
		primary_title = {
			capital_scope = {
				owner = {
					any_courtier = {
						limit = {
							is_landed = no
							is_married = no
							is_consort = no
							is_adult = yes
							NOT = {
								trait = incapable
							}
							NOT = {
								trait = infirm
							}
							NOT = {
								trait = maimed
							}
							NOT = {
								trait = blinded
							}
							NOT = {
								trait = eunuch
							}
							NOT = {
								trait = undernourished
							}
							NOT = {
								trait = fat
							}
							NOT = {
								age = 40
							}
							is_vampire_trigger = no
							trait = creature_human
							OR = {
								is_child_of = PREV
								martial = 20
								trait = strong
								trait = tough
								trait = hardy
							}
						}
						save_event_target_as = eloper
						PREV = {
							save_event_target_as = eloper_host
						}
						ROOT = {
							primary_title = {
								band_creator = {
									if = {
										limit = {
											is_alive = yes
										}
										character_event = {
											id = svampires.19002
										}
									}
								}
							}
						}
						PREV = {
							character_event = {
								id = svampires.19001
							}
						}
						any_spouse = {
							remove_spouse = ROOT
						}
						any_lover = {
							remove_lover = ROOT
						}
						any_friend = {
							remove_friend = ROOT
						}
						set_variable = {
							which = "khorne_favor"
							value = 0
						}
						set_variable = {
							which = "nurgle_favor"
							value = 0
						}
						set_variable = {
							which = "slaanesh_favor"
							value = 0
						}
						set_variable = {
							which = "tzeentch_favor"
							value = 0
						}
						clr_character_flag = hidden_cultist_tzeentch
						clr_character_flag = hidden_cultist_nurgle
						clr_character_flag = hidden_cultist_slaanesh
						clr_character_flag = hidden_cultist_khorne
						clr_character_flag = hidden_cultist_undivided
						add_trait = vampire_blood_visible
						set_graphical_culture = blood_vampire
						culture = blooddragons_culture
						religion = vampiric
						remove_trait = old_1
						remove_trait = old_2
						remove_trait = old_3
						remove_trait = old_4
						move_character = ROOT
						if = {
							limit = {
								is_child_of = PREV
							}
							PREV = {
								add_rival = ROOT
							}
						}
						break = yes
					}
				}
			}
		}
	}
}

# Notify daddy about turning
character_event = {
	id = svampires.19001
	desc = {
		text = EVTDESCAsvampires19001
		trigger = {
			is_vampire_trigger = no
		}
	}
	desc = {
		text = EVTDESCBsvampires19001
		trigger = {
			is_vampire_trigger = yes
		}
	}
	picture = GFX_evt_vampire_knight
	border = GFX_event_normal_frame_war
	is_triggered_only = yes

	immediate = {
		log = "work event id = svampires.19001 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTAsvampires19001
		trigger = {
			OR = {
				trait = vampire_blood_visible
				trait = vampire_blood_hidden
			}
		}
	}

	option = {
		name = EVTOPTBsvampires19001
		trigger = {
			NOR = {
				trait = vampire_blood_visible
				trait = vampire_blood_hidden
			}
		}
	}
}

# Notify band creator about eloping
character_event = {
	id = svampires.19002
	desc = EVTDESCsvampires19002
	picture = GFX_evt_vampire_knight
	border = GFX_event_normal_frame_war
	is_triggered_only = yes

	immediate = {
		log = "work event id = svampires.19002 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTAsvampires19002
		prestige = 50
		piety = 40
	}
}

# Notify Blood Dragons have started occupying province
province_event = {
	id = svampires.20
	desc = EVTDESCsvampires20
	picture = GFX_evt_vampire_knight
	border = GFX_event_normal_frame_war
	is_triggered_only = yes

	immediate = {
		log = "work event id = svampires.20 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTAsvampires20
	}
}

# Notify Blood Dragons have started occupying province
province_event = {
	id = svampires.21
	desc = EVTDESCsvampires21
	picture = GFX_evt_vampire_knight
	border = GFX_event_normal_frame_war
	is_triggered_only = yes

	trigger = {
		OR = {
			FROM = {
				is_occupied = yes
			}
			FROM = {
				holder_scope = {
					character = FROMFROM
				}
			}
		}
	}

	immediate = {
		log = "work event id = svampires.21 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTAsvampires21
		build_holding = {
			type = castle
		 	holder = FROMFROM
		}
	}
}

# STRIGOI
# Check the province modifier for sleeping Strigoi
province_event = {
	id = svampires.22
	hide_window = yes

	trigger = {
		owner = {
			NOT = {
				trait = resting
			}
		}
		has_province_modifier = hidden_hibernated_strigoi
	}

	mean_time_to_happen = {
		months = 3
	}

	immediate = {
		log = "work event id = svampires.22 for [Root.GetBestName]"
		remove_province_modifier = hidden_hibernated_strigoi
	}
}

# Ghouls are drawn to a Vampire ruler
character_event = {
	id = svampires.23
	desc = EVTDESCsvampires23
	picture = GFX_evt_ghoul
	border = GFX_event_normal_frame_war
	min_age = 250		# Only old vampires
	only_playable = yes
	capable_only = yes
	prisoner = no
	religion_group = necromantic_group
	is_triggered_only = yes

	trigger = {
		is_incapacitated_trigger = no
		is_visible_vampire_trigger = yes
	}

	weight_multiplier = {
		factor = 1
		modifier = {
			factor = 1.33
			trait = vampire_strigoi_visible

		}
		modifier = {
			factor = 0.36
			trait = vampire_blood_visible

		}
		modifier = {
			factor = 0.67
			trait = vampire_carstein_visible

		}
		modifier = {
			factor = 0.10
			trait = vampire_lahmian_visible

		}
		modifier = {
			factor = 0.33
			independent = no

		}
		modifier = {
			factor = 0.14
			independent = no
			lower_tier_than = KING

		}
		modifier = {
			factor = 0.67
			NOT = {
				piety = 1000
			}
		}
		modifier = {
			factor = 0.67
			NOT = {
				piety = 1500
			}
		}
		modifier = {
			factor = 0.67
			NOT = {
				piety = 750
			}
		}
		modifier = {
			factor = 0.67
			NOT = {
				piety = 500
			}
		}
		modifier = {
			factor = 0.67
			NOT = {
				piety = 250
			}
		}
		modifier = {
			factor = 0.67
			NOT = {
				piety = 100
			}
		}

	}

	immediate = {
		log = "work event id = svampires.23 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTAsvampires23
		piety = -250
		hidden_tooltip = {
			random_list = {
				50 = {
					modifier = {
						factor = 0
						trait = vampire_strigoi_visible
					}
					location = {
						ROOT = {
							spawn_unit = {
								province = PREV
								reinforces = yes
								troops = {
									light_infantry = {
										576 576
									}
								}
								earmark = shambling_ghouls
								attrition = 0.75
							}
							spawn_unit = {
								province = PREV
								reinforces = yes
								troops = {
									undead_horde = {
										911 911
									}
								}
								earmark = shambling_ghouls
								attrition = 0
							}
						}
					}
				}
				50 = {
					location = {
						ROOT = {
							spawn_unit = {
								province = PREV
								reinforces = yes
								troops = {
									light_infantry = {
										1176 1176
									}
								}
								earmark = shambling_ghouls
								attrition = 0.75
							}
							spawn_unit = {
								province = PREV
								reinforces = yes
								troops = {
									undead_horde = {
										781 781
									}
								}
								earmark = shambling_ghouls
								attrition = 0
							}
						}
					}
					modifier = {
						factor = 0
						NOT = {
							trait = vampire_strigoi_visible
						}
					}
				}

			}
		}
		if = {
			limit = {
				capital_scope = {
					has_province_modifier = ghoul_presence
				}
			}
			random_demesne_province = {
				add_province_modifier = {
					name = ghoul_presence
					duration = 1750
					stacking = yes
				}
			}
			break = yes
		}
		if = {
			limit = {
				capital_scope = {
					NOT = {
						has_province_modifier = ghoul_presence
					}
				}
			}
			capital_scope = {
				add_province_modifier = {
					name = ghoul_presence
					duration = 1750
					stacking = yes
				}
			}
		}
		ai_chance = {
			factor = 75
			modifier = {
				factor = 0
				trait = vampire_blood_visible
			}
			modifier = {
				factor = 0.75
				trait = vampire_carstein_visible
			}
			modifier = {
				factor = 0.75
				independent = no
				lower_tier_than = KING
			}
			modifier = {
				factor = 1.75
				war = yes
			}
		}
	}

	option = {
		name = EVTOPTBsvampires23
		ai_chance = {
			factor = 25
			modifier = {
				factor = 3
				trait = vampire_lahmian_visible
			}
			modifier = {
				factor = 1.5
				trait = vampire_jade_visible
			}
			modifier = {
				factor = 100
				trait = vampire_blood_visible
			}
			modifier = {
				factor = 0
				trait = vampire_strigoi_visible
			}
		}
	}
}

# PREPARING INVASIONS FOR STRIGOI
# Umbrella event when started the preparation for an invasion
character_event = {
	id = svampires.24
	hide_window = yes

	trigger = {
		has_character_modifier = preparing_strygos_invasion
	}	# the chain stops when the modifier expires
	is_triggered_only = yes

	immediate = {
		log = "work event id = svampires.24 for [Root.GetBestName]"
		random_list = {
			30 = {
				character_event = {
					id = svampires.29 days = 40 random = 15
				}
			}	# Some troops
			20 = {
				modifier = {
					factor = 1.25
					martial = 15
				}
				modifier = {
					factor = 1.25
					martial = 20
				}
				modifier = {
					factor = 1.25
					diplomacy = 15
				}
				modifier = {
					factor = 1.25
					diplomacy = 20
				}
				modifier = {
					factor = 1.25
					prestige = 1000
				}
				modifier = {
					factor = 0.75
					NOT = {
						martial = 10
					}
				}
				modifier = {
					factor = 0.5
					NOT = {
						martial = 7
					}
				}
				modifier = {
					factor = 0.75
					NOT = {
						diplomacy = 10
					}
				}
				modifier = {
					factor = 0.5
					NOT = {
						diplomacy = 7
					}
				}
				modifier = {
					factor = 0.5
					NOT = {
						prestige = 100
					}
				}
				modifier = {
					factor = 0
					NOT = {
						trait = vampire_strigoi_visible
					}
				}
				character_event = {
					id = svampires.28 days = 40 random = 15
				}
			}	# Strigoi Commander
			10 = {
				modifier = {
					factor = 1.25
					martial = 15
				}
				modifier = {
					factor = 1.25
					martial = 20
				}
				modifier = {
					factor = 1.25
					diplomacy = 15
				}
				modifier = {
					factor = 1.25
					diplomacy = 20
				}
				modifier = {
					factor = 1.25
					prestige = 1000
				}
				modifier = {
					factor = 0.75
					NOT = {
						martial = 10
					}
				}
				modifier = {
					factor = 0.5
					NOT = {
						martial = 7
					}
				}
				modifier = {
					factor = 0.75
					NOT = {
						diplomacy = 10
					}
				}
				modifier = {
					factor = 0.5
					NOT = {
						diplomacy = 7
					}
				}
				modifier = {
					factor = 0.5
					NOT = {
						prestige = 100
					}
				}
				character_event = {
					id = svampires.27 days = 40 random = 15
				}
			}	# More troops
			40 = {
				character_event = {
					id = svampires.24 days = 40 random = 15
				}
			}	# repeat each month until expirement
		}
	}
}

# You waited to long
character_event = {
	id = svampires.26
	desc = {
		text = EVTDESCA_svampires.26
		trigger = {
			NOT = {
				trait = vampire_strigoi_visible
			}
		}
	}
	desc = {
		text = EVTDESCB_svampires.26
		trigger = {
			trait = vampire_strigoi_visible
		}
	}
	picture = GFX_evt_vampires_orcs
	border = GFX_event_normal_frame_war

	trigger = {
		NOT = {
			any_war = {
				using_cb = strigoi_invasion
			}
		}
	}	# If you start the war, the event won't pop up
	is_triggered_only = yes

	immediate = {
		log = "work event id = svampires.26 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTAsvampires.26
		disband_event_forces = prepared_invasion
		clr_character_flag = preparing_strygos_invasion
		prestige = -1000
		add_character_modifier = {
			modifier = attempted_strygos_invasion
			duration = 3651
		}
	}
}

# Troops flock to your banner
# The target character is in FROM
character_event = {
	id = svampires.27
	desc = {
		text = EVTDESCA_svampires.27
		trigger = {
			NOT = {
				trait = vampire_strigoi_visible
			}
		}
	}
	desc = {
		text = EVTDESCB_svampires.27
		trigger = {
			trait = vampire_strigoi_visible
		}
	}

	trigger = {
		has_character_modifier = preparing_strygos_invasion
	}	# the chain stops when the modifier expires
	picture = GFX_evt_vampires_orcs
	border = GFX_event_normal_frame_war
	is_triggered_only = yes

	immediate = {
		log = "work event id = svampires.27 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTBsvampires.27
		capital_scope = {
			ROOT = {
				spawn_unit = {
					province = PREV
					owner = ROOT
					match_character = ROOT
					match_mult = 0.5
					earmark = prepared_invasion
					attrition = 1.0
				}
				spawn_fleet = {
					province = closest
					owner = ROOT
					match_character = ROOT
					match_mult = 0.5
					match_min = 7
					earmark = prepared_invasion
				}
			}
		}
		hidden_tooltip = {
			random_list = {
				30 = {
					character_event = {
						id = svampires.29 days = 40 random = 15
					}
				}	# Some troops
				20 = {
					modifier = {
						factor = 1.25
						martial = 15
					}
					modifier = {
						factor = 1.25
						martial = 20
					}
					modifier = {
						factor = 1.25
						diplomacy = 15
					}
					modifier = {
						factor = 1.25
						diplomacy = 20
					}
					modifier = {
						factor = 1.25
						prestige = 1000
					}
					modifier = {
						factor = 0.75
						NOT = {
							martial = 10
						}
					}
					modifier = {
						factor = 0.5
						NOT = {
							martial = 7
						}
					}
					modifier = {
						factor = 0.75
						NOT = {
							diplomacy = 10
						}
					}
					modifier = {
						factor = 0.5
						NOT = {
							diplomacy = 7
						}
					}
					modifier = {
						factor = 0.5
						NOT = {
							prestige = 100
						}
					}
					modifier = {
						factor = 0
						NOT = {
							trait = vampire_strigoi_visible
						}
					}
					character_event = {
						id = svampires.28 days = 40 random = 15
					}
				}	# Strigoi Commander
				10 = {
					modifier = {
						factor = 1.25
						martial = 15
					}
					modifier = {
						factor = 1.25
						martial = 20
					}
					modifier = {
						factor = 1.25
						diplomacy = 15
					}
					modifier = {
						factor = 1.25
						diplomacy = 20
					}
					modifier = {
						factor = 1.25
						prestige = 1000
					}
					modifier = {
						factor = 0.75
						NOT = {
							martial = 10
						}
					}
					modifier = {
						factor = 0.5
						NOT = {
							martial = 7
						}
					}
					modifier = {
						factor = 0.75
						NOT = {
							diplomacy = 10
						}
					}
					modifier = {
						factor = 0.5
						NOT = {
							diplomacy = 7
						}
					}
					modifier = {
						factor = 0.5
						NOT = {
							prestige = 100
						}
					}
					character_event = {
						id = svampires.27 days = 40 random = 15
					}
				}	# More troops
				40 = {
					character_event = {
						id = svampires.24 days = 40 random = 15
					}
				}	# repeat each month until expirement
			}
		}
	}
}

# A Strigoi and his retinue appear in your court
# The target character is in FROM
character_event = {
	id = svampires.28
	desc = {
		text = EVTDESCA_svampires.28
		trigger = {
			NOT = {
				trait = vampire_strigoi_visible
			}
		}
	}
	desc = {
		text = EVTDESCB_svampires.28
		trigger = {
			trait = vampire_strigoi_visible
		}
	}
	picture = GFX_evt_strigoi_lord
	border = GFX_event_normal_frame_war

	trigger = {
		has_character_modifier = preparing_strygos_invasion
	}	# the chain stops when the modifier expires
	is_triggered_only = yes

	immediate = {
		log = "work event id = svampires.28 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTBsvampires.28
		capital_scope = {
			create_character = {
				random_traits = yes
				dynasty = random
				religion = vampiric
				culture = strygan
				female = no
				age = 892
				attributes = {
					martial = 18
				}
				trait = cruel
				trait = zealous
				trait = brilliant_strategist
				trait = vampire_strigoi_visible
			}
			new_character = {
				set_graphical_culture = strigoi_vampire
				spawn_unit = {
					province = PREV
					owner = ROOT
					match_character = ROOT
					match_mult = 0.015
					earmark = prepared_invasion
					attrition = 1.0
				}
				spawn_unit = {
					province = PREV
					owner = ROOT
					earmark = prepared_invasion
					reinforces = yes
					troops = {
						undead_horde = {
							450 450
						}
					}
				}
			}
		}
		spawn_fleet = {
			province = closest
			owner = ROOT
			match_character = ROOT
			match_mult = 0.15
			match_min = 10
			earmark = prepared_invasion
		}
		hidden_tooltip = {
			random_list = {
				30 = {
					character_event = {
						id = svampires.29 days = 40 random = 15
					}
				}	# Some troops
				20 = {
					modifier = {
						factor = 1.25
						martial = 15
					}
					modifier = {
						factor = 1.25
						martial = 20
					}
					modifier = {
						factor = 1.25
						diplomacy = 15
					}
					modifier = {
						factor = 1.25
						diplomacy = 20
					}
					modifier = {
						factor = 1.25
						prestige = 1000
					}
					modifier = {
						factor = 0.75
						NOT = {
							martial = 10
						}
					}
					modifier = {
						factor = 0.5
						NOT = {
							martial = 7
						}
					}
					modifier = {
						factor = 0.75
						NOT = {
							diplomacy = 10
						}
					}
					modifier = {
						factor = 0.5
						NOT = {
							diplomacy = 7
						}
					}
					modifier = {
						factor = 0.5
						NOT = {
							prestige = 100
						}
					}
					modifier = {
						factor = 0
						NOT = {
							trait = vampire_strigoi_visible
						}
					}
					character_event = {
						id = svampires.28 days = 40 random = 15
					}
				}	# Strigoi Commander
				10 = {
					modifier = {
						factor = 1.25
						martial = 15
					}
					modifier = {
						factor = 1.25
						martial = 20
					}
					modifier = {
						factor = 1.25
						diplomacy = 15
					}
					modifier = {
						factor = 1.25
						diplomacy = 20
					}
					modifier = {
						factor = 1.25
						prestige = 1000
					}
					modifier = {
						factor = 0.75
						NOT = {
							martial = 10
						}
					}
					modifier = {
						factor = 0.5
						NOT = {
							martial = 7
						}
					}
					modifier = {
						factor = 0.75
						NOT = {
							diplomacy = 10
						}
					}
					modifier = {
						factor = 0.5
						NOT = {
							diplomacy = 7
						}
					}
					modifier = {
						factor = 0.5
						NOT = {
							prestige = 100
						}
					}
					character_event = {
						id = svampires.27 days = 40 random = 15
					}
				}	# More troops
				40 = {
					character_event = {
						id = svampires.24 days = 40 random = 15
					}
				}	# repeat each month until expirement
			}
		}
	}
}

# A smaller force arrives for the invasion
# The target character is in FROM
character_event = {
	id = svampires.29
	desc = {
		text = EVTDESCA_svampires.29
		trigger = {
			NOT = {
				trait = vampire_strigoi_visible
			}
		}
	}
	desc = {
		text = EVTDESCB_svampires.29
		trigger = {
			trait = vampire_strigoi_visible
		}
	}
	picture = GFX_evt_vampires_orcs
	border = GFX_event_normal_frame_war

	trigger = {
		has_character_modifier = preparing_strygos_invasion
	}	# the chain stops when the modifier expires
	is_triggered_only = yes

	immediate = {
		log = "work event id = svampires.29 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTBsvampires.29
		capital_scope = {
			ROOT = {
				spawn_unit = {
					province = PREV
					owner = ROOT
					match_character = ROOT
					match_mult = 0.015
					earmark = prepared_invasion
					attrition = 1.0
				}
				spawn_fleet = {
					province = closest
					owner = ROOT
					match_character = ROOT
					match_mult = 0.015
					match_min = 5
					earmark = prepared_invasion
				}
			}
		}
		hidden_tooltip = {
			random_list = {
				30 = {
					character_event = {
						id = svampires.29 days = 40 random = 15
					}
				}	# Some troops
				20 = {
					modifier = {
						factor = 1.25
						martial = 15
					}
					modifier = {
						factor = 1.25
						martial = 20
					}
					modifier = {
						factor = 1.25
						diplomacy = 15
					}
					modifier = {
						factor = 1.25
						diplomacy = 20
					}
					modifier = {
						factor = 1.25
						prestige = 1000
					}
					modifier = {
						factor = 0.75
						NOT = {
							martial = 10
						}
					}
					modifier = {
						factor = 0.5
						NOT = {
							martial = 7
						}
					}
					modifier = {
						factor = 0.75
						NOT = {
							diplomacy = 10
						}
					}
					modifier = {
						factor = 0.5
						NOT = {
							diplomacy = 7
						}
					}
					modifier = {
						factor = 0.5
						NOT = {
							prestige = 100
						}
					}
					modifier = {
						factor = 0
						NOT = {
							trait = vampire_strigoi_visible
						}
					}
					character_event = {
						id = svampires.28 days = 40 random = 15
					}
				}	# Strigoi Commander
				10 = {
					modifier = {
						factor = 1.25
						martial = 15
					}
					modifier = {
						factor = 1.25
						martial = 20
					}
					modifier = {
						factor = 1.25
						diplomacy = 15
					}
					modifier = {
						factor = 1.25
						diplomacy = 20
					}
					modifier = {
						factor = 1.25
						prestige = 1000
					}
					modifier = {
						factor = 0.75
						NOT = {
							martial = 10
						}
					}
					modifier = {
						factor = 0.5
						NOT = {
							martial = 7
						}
					}
					modifier = {
						factor = 0.75
						NOT = {
							diplomacy = 10
						}
					}
					modifier = {
						factor = 0.5
						NOT = {
							diplomacy = 7
						}
					}
					modifier = {
						factor = 0.5
						NOT = {
							prestige = 100
						}
					}
					character_event = {
						id = svampires.27 days = 40 random = 15
					}
				}	# More troops
				40 = {
					character_event = {
						id = svampires.24 days = 40 random = 15
					}
				}	# repeat each month until expirement
			}
		}
	}
}

# Stupid AI, attack!
character_event = {
	id = svampires.30
	hide_window = yes
	is_triggered_only = yes

	immediate = {
		log = "work event id = svampires.30 for [Root.GetBestName]"
		random_independent_ruler = {
			limit = {
				primary_title = {
					capital_scope = {
						region = world_badlands_strygos
					}
				}
			}
			primary_title = {
				holder_scope = {
					ROOT = {
						war = {
							casus_belli = strigoi_invasion
							target = PREV # The top liege of the owner of the province
							thirdparty_title = PREVPREV # The de jure kingdom
							tier = KING
						}
					}
				}
			}
		}
	}
}

# You restored Strygos as a Strigoi
long_character_event = {
	id = svampires.31
	desc = EVTDESCAsvampires31
	picture = GFX_evt_strigoi_lord
	is_triggered_only = yes

	immediate = {
		log = "work event id = svampires.31 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTAsvampires31
		set_global_flag = strygos_reformed
		hidden_tooltip = {
			character_event = {
				id = svampires.38 days = 700 random = 2000
			}
			primary_title = {
				any_direct_de_jure_vassal_title = {
					de_jure_liege = e_strygos
				}
				k_khernarch = {
					de_jure_liege = e_strygos
				}
				k_strygos = {
					de_jure_liege = e_strygos
				}
				k_badlands = {
					de_jure_liege = e_strygos
				}
			}
			any_playable_ruler = {
				limit = {
					trait = lahmian_queen
				}
				character_event = {
					id = svampires.31002 days = 5 random = 4
				}
			}
			any_playable_ruler = {
				limit = {
					trait = vampire_strigoi_visible
				}
				character_event = {
					id = svampires.31003 days = 5 random = 4
				}
			}
		}
		c_mourkain = {
			ROOT = {
				capital = PREV
			}
		}
		e_strygos = {
			grant_title = ROOT
			make_primary_title = yes
			add_law = succ_turkish_succession
			add_law = true_cognatic_succession
		}
	}
}

# You restored Strygos as a Strigany
long_character_event = {
	id = svampires.31001
	desc = EVTDESCAsvampires31001
	picture = GFX_evt_human_lord
	is_triggered_only = yes

	immediate = {
		log = "work event id = svampires.31001 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTAsvampires31001
		set_global_flag = strygos_reformed
		hidden_tooltip = {
			character_event = {
				id = svampires.38 days = 700 random = 2000
			}
			primary_title = {
				any_direct_de_jure_vassal_title = {
					de_jure_liege = e_strygos_2
				}
				k_khernarch = {
					de_jure_liege = e_strygos_2
				}
				k_strygos = {
					de_jure_liege = e_strygos_2
				}
				k_badlands = {
					de_jure_liege = e_strygos_2
				}
			}
			any_playable_ruler = {
				limit = {
					NOT = {
						character = ROOT
					}
					trait = lahmian_queen
				}
				character_event = {
					id = svampires.31002 days = 5 random = 4
				}
			}
			any_playable_ruler = {
				limit = {
					NOT = {
						character = ROOT
					}
					trait = vampire_strigoi_visible
				}
				character_event = {
					id = svampires.31003 days = 5 random = 4
				}
			}
		}
		c_mourkain = {
			ROOT = {
				capital = PREV
			}
		}
		e_strygos_2 = {
			grant_title = ROOT
			make_primary_title = yes
			add_law = succ_turkish_succession
			add_law = true_cognatic_succession
		}
	}
}

# Lahmian Queen informed of her failure
character_event = {
	id = svampires.31002
	desc = {
		text = EVTDESCAsvampires310002
		trigger = {
			FROM = {
				NOT = {
					trait = vampire_strigoi_visible
				}
			}
		}
	}
	desc = {
		text = EVTDESCBsvampires310002
		trigger = {
			FROM = {
				trait = vampire_strigoi_visible
			}
		}
	}
	picture = GFX_evt_strigoi_lord
	border = GFX_event_normal_frame_war
	is_triggered_only = yes

	immediate = {
		log = "work event id = svampires.31002 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTAsvampires310002
		prestige = -1500
	}
}

# Strigoi Rulers notified of Strygos reborn.
character_event = {
	id = svampires.31003
	desc = {
		text = EVTDESCAsvampires310003
		trigger = {
			FROM = {
				NOT = {
					trait = vampire_strigoi_visible
				}
			}
		}
	}
	desc = {
		text = EVTDESCBsvampires310003
		trigger = {
			FROM = {
				trait = vampire_strigoi_visible
			}
		}
	}
	picture = GFX_evt_strigoi_lord
	border = GFX_event_normal_frame_war
	is_triggered_only = yes

	immediate = {
		log = "work event id = svampires.31003 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTAsvampires310003
		if = {
			limit = {
				FROM = {
					trait = vampire_strigoi_visible
				}
			}
			set_defacto_liege = e_strygos
		}
		if = {
			limit = {
				FROM = {
					NOT = {
						trait = vampire_strigoi_visible
					}
				}
			}
			set_defacto_liege = e_strygos_2
		}
		ai_chance = {
			factor = 50
			modifier = {
				factor = 0
				FROM = {
					NOT = {
						trait = vampire_strigoi_visible
					}
				}
			}
		}
	}

	option = {
		name = EVTOPTBsvampires310003
		ai_chance = {
			factor = 50

		}
	}
}

# STRIGANY NOMADISM
# A Strigany caravan comes in your province
character_event = {
	id = svampires.32
	desc = EVTDESCAsvampires32
	picture = GFX_evt_wandering_strigany
	is_triggered_only = yes

	immediate = {
		log = "work event id = svampires.32 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTAsvampires32
		capital_scope = {
			add_province_modifier = {
				modifier = strigany_caravan
				duration = -1
			}
		}
		opinion = {
			who = FROM
			months = 10000
			modifier = opinion_strigany_caravan_beacon2	
	# To keep track of both temporary liege and caravan chief
		}
		FROM = {
			opinion = {
				who = ROOT
				months = 10000
				modifier = opinion_strigany_caravan_beacon3	
	# To keep track of both temporary liege and caravan chief
			}
		}
		FROM = {
			move_character = ROOT
			set_character_flag = strygany_caravan_master
		}
		hidden_tooltip = {
			FROMFROM = {
				letter_event = {
					id = svampires.32002 days = 7 random = 4
				}
			}
		}
		ai_chance = {
			factor = 75
			modifier = {
				factor = 0.5
				trait = zealous
				NOT = {
					religion_group = necromantic_group
				}
			}
			modifier = {
				factor = 1.5
				trait = charitable

			}
			modifier = {
				factor = 1.5
				trait = trusting

			}
			modifier = {
				factor = 0.5
				trait = paranoid

			}
		}
	}

	option = {
		name = EVTOPTBsvampires32
		hidden_tooltip = {
			FROMFROM = {
				character_event = {
					id = svampires.32001 days = 7 random = 4
				}
			}
		}
		ai_chance = {
			factor = 25

		}
	}
}

# Your caravan returned without any wares
character_event = {
	id = svampires.32001
	desc = EVTDESCAsvampires32001
	picture = GFX_evt_wandering_strigany
	is_triggered_only = yes

	immediate = {
		log = "work event id = svampires.32001 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTAsvampires32001
		ai_chance = {
			factor = 25

		}
	}
}

# Your caravan has established a foothold
letter_event = {
	id = svampires.32002
	desc = EVTDESCAsvampires32002
	is_triggered_only = yes
	show_from_from = yes

	immediate = {
		log = "work event id = svampires.32002 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTAsvampires32002
		wealth = 25
		hidden_tooltip = {
			FROMFROM = {
				random_list = {
					15 = {
						modifier = {
							factor = 1.25
							FROMFROM = {
								stewardship = 10
							}
						}
						modifier = {
							factor = 1.25
							FROMFROM = {
								stewardship = 15
							}
						}
						modifier = {
							factor = 1.5
							FROMFROM = {
								stewardship = 20
							}
						}
						modifier = {
							factor = 1.5
							FROMFROM = {
								stewardship = 25
							}
						}
						modifier = {
							factor = 1.25
							FROMFROM = {
								diplomacy = 10
							}
						}
						modifier = {
							factor = 1.5
							FROMFROM = {
								trait = midas_touched
							}
						}
						character_event = {
							id = svampires.32003 days = 170 random = 140
						}
					} # the Strigany get a good deal
					50 = {
						character_event = {
							id = svampires.32004 days = 170 random = 140
						}
					} # the Strigany get a fair deal
					25 = {
						character_event = {
							id = svampires.32005 days = 170 random = 140
						}
					} # the Strigany upset locals
					10 = {
						modifier = {
							factor = 0.5
							FROM = {
								NOT = {
									capital_scope = {
										has_province_modifier = strigany_strife
									}
								}
							}
						}
						character_event = {
							id = svampires.32006 days = 170 random = 140
						}
					} # the Strigany are driven out by angry locals
					5 = {
						modifier = {
							factor = 0
							FROM = {
								capital_scope = {
									has_empty_holding = no
								}
							}
						}
						modifier = {
							factor = 0
							NOT = {
								FROMFROM = {
									check_variable = {
										which = "strigany_presence_v"
										value = 15
									}
								}
							}
						}
						modifier = {
							factor = 1.75
							FROMFROM = {
								stewardship = 20
							}
						}
						modifier = {
							factor = 2
							FROMFROM = {
								trait = ambitious
							}
						}
						modifier = {
							factor = 1.25
							FROMFROM = {
								trait = deceitful
							}
						}
						modifier = {
							factor = 1.5
							FROMFROM = {
								trait = midas_touched
							}
						}
						character_event = {
							id = svampires.32007 days = 170 random = 140
						}
					} # the Strigany are entrenched beyond repair
				}
			}
		}
		ai_chance = {
			factor = 1
		}
	}
}

# The Strigany managed a good deal
character_event = {
	id = svampires.32003
	desc = EVTDESCAsvampires32003
	picture = GFX_evt_wandering_strigany
	is_triggered_only = yes

	trigger = {
		liege = {
			NOT = {
				has_character_modifier = expelled_strigany
			}
			NOT = {
				top_liege = {
					has_character_modifier = expelled_strigany
				}
			}
			capital_scope = {
				has_province_modifier = strigany_caravan
			}
		}
	}

	immediate = {
		log = "work event id = svampires.32003 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTAsvampires32003
		wealth = 75
		change_variable = {
			which = "strigany_presence_v"
			value = 1
		}
		FROM = {
			letter_event = {
				id = svampires.33003
			}
		}
		ai_chance = {
			factor = 1

		}
	}
}

# The Strigany managed a good deal - Notify the sender
letter_event = {
	id = svampires.33003
	desc = EVTDESCAsvampires33003
	is_triggered_only = yes

	immediate = {
		log = "work event id = svampires.33003 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTAsvampires33003
		wealth = 95
		hidden_tooltip = {
			FROM = {
				random_list = {
					15 = {
						modifier = {
							factor = 1.25
							FROM = {
								stewardship = 10
							}
						}
						modifier = {
							factor = 1.25
							FROM = {
								stewardship = 15
							}
						}
						modifier = {
							factor = 1.5
							FROM = {
								stewardship = 20
							}
						}
						modifier = {
							factor = 1.5
							FROM = {
								stewardship = 25
							}
						}
						modifier = {
							factor = 1.25
							FROM = {
								diplomacy = 10
							}
						}
						modifier = {
							factor = 1.5
							FROM = {
								trait = midas_touched
							}
						}
						character_event = {
							id = svampires.32003 days = 170 random = 140
						}
					} # the Strigany get a good deal
					45 = {
						character_event = {
							id = svampires.32004 days = 170 random = 140
						}
					} # the Strigany get a fair deal
					25 = {
						character_event = {
							id = svampires.32005 days = 170 random = 140
						}
					} # the Strigany upset locals
					15 = {
						modifier = {
							factor = 0.5
							FROM = {
								liege = {
									NOT = {
										capital_scope = {
											has_province_modifier = strigany_strife
										}
									}
								}
							}
						}
						character_event = {
							id = svampires.32006 days = 170 random = 140
						}
					} # the Strigany are driven out by angry locals
					5 = {
						modifier = {
							factor = 0
							FROM = {
								capital_scope = {
									has_empty_holding = no
								}
							}
						}
						modifier = {
							factor = 0
							NOT = {
								FROM = {
									check_variable = {
										which = "strigany_presence_v"
										value = 15
									}
								}
							}
						}
						modifier = {
							factor = 0
							FROM = {
								liege = {
									capital_scope = {
										has_empty_holding = no
									}
								}
							}
						}
						modifier = {
							factor = 1.75
							FROM = {
								stewardship = 20
							}
						}
						modifier = {
							factor = 2
							FROM = {
								trait = ambitious
							}
						}
						modifier = {
							factor = 1.25
							FROM = {
								trait = deceitful
							}
						}
						modifier = {
							factor = 1.5
							FROM = {
								trait = midas_touched
							}
						}
						character_event = {
							id = svampires.32007 days = 170 random = 140
						}
					} # the Strigany are entrenched beyond repair
				}
			}
		}
		ai_chance = {
			factor = 100
		}
	}

	option = {
		name = EVTOPTBsvampires33003
		wealth = 95
		FROM = {
			clr_character_flag = strygany_caravan_master
			liege = {
				FROM = {
					remove_opinion = {
						who = PREV
						modifier = opinion_strigany_caravan_beacon2
					}
				}
				character_event = {
					id = svampires.33
				}
				capital_scope = {
					remove_province_modifier = strigany_caravan
				}
			}
		}
		FROM = {
			move_character = ROOT
		}
		ai_chance = {
			factor = 0
		}
	}
}

# The Strigany left your capital
character_event = {
	id = svampires.33
	desc = EVTDESCAsvampires33
	picture = GFX_evt_wandering_strigany
	is_triggered_only = yes

	immediate = {
		log = "work event id = svampires.33 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTAsvampires33
		FROMFROM = {
			set_variable = {
				which = "strigany_presence_v"
				value = 0
			}
		}
		ai_chance = {
			factor = 1
		}
	}
}

# The Strigany managed a deal
character_event = {
	id = svampires.32004
	desc = EVTDESCAsvampires32004
	picture = GFX_evt_wandering_strigany
	is_triggered_only = yes

	trigger = {
		liege = {
			NOT = {
				has_character_modifier = expelled_strigany
			}
			NOT = {
				top_liege = {
					has_character_modifier = expelled_strigany
				}
			}
			capital_scope = {
				has_province_modifier = strigany_caravan
			}
		}
	}

	immediate = {
		log = "work event id = svampires.32004 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTAsvampires32004
		wealth = 50
		change_variable = {
			which = "strigany_presence_v"
			value = 1
		}
		FROM = {
			letter_event = {
				id = svampires.34004
			}
		}
		ai_chance = {
			factor = 1

		}
	}
}

# The Strigany managed a deal - Notify the sender
letter_event = {
	id = svampires.34004
	desc = EVTDESCAsvampires34004
	is_triggered_only = yes

	immediate = {
		log = "work event id = svampires.34004 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTAsvampires34004
		wealth = 50
		hidden_tooltip = {
			FROM = {
				random_list = {
					15 = {
						modifier = {
							factor = 1.25
							FROM = {
								stewardship = 10
							}
						}
						modifier = {
							factor = 1.25
							FROM = {
								stewardship = 15
							}
						}
						modifier = {
							factor = 1.5
							FROM = {
								stewardship = 20
							}
						}
						modifier = {
							factor = 1.5
							FROM = {
								stewardship = 25
							}
						}
						modifier = {
							factor = 1.25
							FROM = {
								diplomacy = 10
							}
						}
						modifier = {
							factor = 1.5
							FROM = {
								trait = midas_touched
							}
						}
						character_event = {
							id = svampires.32003 days = 170 random = 140
						}
					} # the Strigany get a good deal
					45 = {
						character_event = {
							id = svampires.32004 days = 170 random = 140
						}
					} # the Strigany get a fair deal
					25 = {
						character_event = {
							id = svampires.32005 days = 170 random = 140
						}
					} # the Strigany upset locals
					15 = {
						modifier = {
							factor = 0.5
							FROM = {
								liege = {
									NOT = {
										capital_scope = {
											has_province_modifier = strigany_strife
										}
									}
								}
							}
						}
						character_event = {
							id = svampires.32006 days = 170 random = 140
						}
					} # the Strigany are driven out by angry locals
					5 = {
						modifier = {
							factor = 0
							FROM = {
								capital_scope = {
									has_empty_holding = no
								}
							}
						}
						modifier = {
							factor = 0
							NOT = {
								FROM = {
									check_variable = {
										which = "strigany_presence_v"
										value = 15
									}
								}
							}
						}
						modifier = {
							factor = 0
							FROM = {
								liege = {
									capital_scope = {
										has_empty_holding = no
									}
								}
							}
						}
						modifier = {
							factor = 1.75
							FROM = {
								stewardship = 20
							}
						}
						modifier = {
							factor = 2
							FROM = {
								trait = ambitious
							}
						}
						modifier = {
							factor = 1.25
							FROM = {
								trait = deceitful
							}
						}
						modifier = {
							factor = 1.5
							FROM = {
								trait = midas_touched
							}
						}
						character_event = {
							id = svampires.32007 days = 170 random = 140
						}
					} # the Strigany are entrenched beyond repair
				}
			}
		}
		ai_chance = {
			factor = 100
		}
	}

	option = {
		name = EVTOPTBsvampires34004
		wealth = 50
		FROM = {
			liege = {
				FROM = {
					clr_character_flag = strygany_caravan_master
					remove_opinion = {
						who = PREV
						modifier = opinion_strigany_caravan_beacon2
					}
				}
				character_event = {
					id = svampires.33
				}
				capital_scope = {
					remove_province_modifier = strigany_caravan
				}
			}
		}
		FROM = {
			move_character = ROOT
		}
		ai_chance = {
			factor = 0
		}
	}
}

# The Strigany upset the locals with their peddling
character_event = {
	id = svampires.32005
	desc = EVTDESCAsvampires32005
	picture = GFX_evt_wandering_strigany
	is_triggered_only = yes

	trigger = {
		liege = {
			NOT = {
				has_character_modifier = expelled_strigany
			}
			NOT = {
				top_liege = {
					has_character_modifier = expelled_strigany
				}
			}
			capital_scope = {
				has_province_modifier = strigany_caravan
			}
		}
	}

	immediate = {
		log = "work event id = svampires.32005 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTAsvampires32005
		wealth = 25
		prestige = -50
		liege = {
			character_event = {
				id = svampires.35004
			}
		}
		change_variable = {
			which = "strigany_presence_v"
			value = -1
		}
		FROM = {
			letter_event = {
				id = svampires.35005
			}
		}
		ai_chance = {
			factor = 1

		}
	}
}

# The Strigany upset the locals with their peddling - Notify owner
character_event = {
	id = svampires.35004
	desc = EVTDESCAsvampires35004
	picture = GFX_evt_wandering_strigany
	is_triggered_only = yes

	immediate = {
		log = "work event id = svampires.35004 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTAsvampires35004
		prestige = -20
		capital_scope = {
			add_province_modifier = {
				modifier = strigany_strife
				stacking = yes
				duration = 365
			}
		}
		ai_chance = {
			factor = 1
		}
	}
}

# The Strigany upset the locals with their peddling - Notify sender
letter_event = {
	id = svampires.35005
	desc = EVTDESCAsvampires35005
	is_triggered_only = yes

	immediate = {
		log = "work event id = svampires.35005 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTAsvampires35005
		wealth = 25
		prestige = -25
		hidden_tooltip = {
			FROM = {
				random_list = {
					15 = {
						modifier = {
							factor = 1.25
							FROM = {
								stewardship = 10
							}
						}
						modifier = {
							factor = 1.25
							FROM = {
								stewardship = 15
							}
						}
						modifier = {
							factor = 1.5
							FROM = {
								stewardship = 20
							}
						}
						modifier = {
							factor = 1.5
							FROM = {
								stewardship = 25
							}
						}
						modifier = {
							factor = 1.25
							FROM = {
								diplomacy = 10
							}
						}
						modifier = {
							factor = 1.5
							FROM = {
								trait = midas_touched
							}
						}
						character_event = {
							id = svampires.32003 days = 170 random = 140
						}
					} # the Strigany get a good deal
					45 = {
						character_event = {
							id = svampires.32004 days = 170 random = 140
						}
					} # the Strigany get a fair deal
					25 = {
						character_event = {
							id = svampires.32005 days = 170 random = 140
						}
					} # the Strigany upset locals
					15 = {
						modifier = {
							factor = 0.5
							FROM = {
								liege = {
									NOT = {
										capital_scope = {
											has_province_modifier = strigany_strife
										}
									}
								}
							}
						}
						character_event = {
							id = svampires.32006 days = 170 random = 140
						}
					} # the Strigany are driven out by angry locals
					5 = {
						modifier = {
							factor = 0
							FROM = {
								capital_scope = {
									has_empty_holding = no
								}
							}
						}
						modifier = {
							factor = 0
							NOT = {
								FROM = {
									check_variable = {
										which = "strigany_presence_v"
										value = 15
									}
								}
							}
						}
						modifier = {
							factor = 0
							FROM = {
								liege = {
									capital_scope = {
										has_empty_holding = no
									}
								}
							}
						}
						modifier = {
							factor = 1.75
							FROM = {
								stewardship = 20
							}
						}
						modifier = {
							factor = 2
							FROM = {
								trait = ambitious
							}
						}
						modifier = {
							factor = 1.25
							FROM = {
								trait = deceitful
							}
						}
						modifier = {
							factor = 1.5
							FROM = {
								trait = midas_touched
							}
						}
						character_event = {
							id = svampires.32007 days = 170 random = 140
						}
					} # the Strigany are entrenched beyond repair
				}
			}
		}
		ai_chance = {
			factor = 100
		}
	}

	option = {
		name = EVTOPTBsvampires35005
		wealth = 50
		FROM = {
			clr_character_flag = strygany_caravan_master
			liege = {
				FROM = {
					remove_opinion = {
						who = PREV
						modifier = opinion_strigany_caravan_beacon2
					}
				}
				character_event = {
					id = svampires.33
				}
				capital_scope = {
					remove_province_modifier = strigany_caravan
				}
			}
		}
		FROM = {
			move_character = ROOT
		}
		ai_chance = {
			factor = 0
		}
	}
}

# The Strigany were driven out by the peasants
character_event = {
	id = svampires.32006
	desc = EVTDESCAsvampires32006
	picture = GFX_evt_wandering_strigany
	is_triggered_only = yes

	trigger = {
		liege = {
			NOT = {
				has_character_modifier = expelled_strigany
			}
			NOT = {
				top_liege = {
					has_character_modifier = expelled_strigany
				}
			}
			capital_scope = {
				has_province_modifier = strigany_caravan
			}
		}
	}

	immediate = {
		log = "work event id = svampires.32006 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTAsvampires32006
		wealth = 25
		prestige = -50
		clr_character_flag = strygany_caravan_master
		liege = {
			character_event = {
				id = svampires.36004
			}
		}
		set_variable = {
			which = "strigany_presence_v"
			value = 0
		}
		FROM = {
			letter_event = {
				id = svampires.36006
			}
		}
		ai_chance = {
			factor = 1

		}
	}
}

# The Strigany were driven out by the peasants - Notify owner
character_event = {
	id = svampires.36004
	desc = EVTDESCAsvampires36004
	picture = GFX_evt_wandering_strigany
	is_triggered_only = yes

	immediate = {
		log = "work event id = svampires.36004 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTAsvampires36004
		prestige = -50
		capital_scope = {
			remove_province_modifier = strigany_caravan
		}
		ai_chance = {
			factor = 1
		}
	}
}

# The Strigany were driven out by the peasants - Notify sender
letter_event = {
	id = svampires.36006
	desc = EVTDESCAsvampires36006
	is_triggered_only = yes

	immediate = {
		log = "work event id = svampires.36006 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTBsvampires36006
		prestige = -100
		FROM = {
			move_character = ROOT
		}
		ai_chance = {
			factor = 1
		}
	}
}

# The Strigany installed themselves permanently
character_event = {
	id = svampires.32007
	desc = EVTDESCAsvampires32007
	picture = GFX_evt_wandering_strigany
	is_triggered_only = yes

	trigger = {
		liege = {
			NOT = {
				has_character_modifier = expelled_strigany
			}
			NOT = {
				top_liege = {
					has_character_modifier = expelled_strigany
				}
			}
			capital_scope = {
				has_province_modifier = strigany_caravan
			}
		}
	}

	immediate = {
		log = "work event id = svampires.32007 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTAsvampires32007
		wealth = 150
		prestige = 150
		clr_character_flag = strygany_caravan_master
		liege = {
			ROOT = {
				remove_opinion = {
					who = PREV
					modifier = opinion_strigany_caravan_beacon2
				}
			}
			character_event = {
				id = svampires.37007
			}
			capital_scope = {
				build_holding = {
					type = tribal
		 			holder = ROOT
				}
			}
		}
		set_variable = {
			which = "strigany_presence_v"
			value = 0
		}
		ROOT = {
			set_defacto_liege = FROM
		}
		FROM = {
			letter_event = {
				id = svampires.37008
			}
		}
		ai_chance = {
			factor = 1
		}
	}
}

# The Strigany installed themselves in your province - Notify owner
character_event = {
	id = svampires.37007
	desc = EVTDESCAsvampires37007
	picture = GFX_evt_wandering_strigany
	is_triggered_only = yes

	immediate = {
		log = "work event id = svampires.37007 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTAsvampires37007
		wealth = -50
		prestige = -50
		capital_scope = {
			remove_province_modifier = strigany_caravan
		}
		ai_chance = {
			factor = 1
		}
	}
}

# The Strigany installed themselves permanently - Notify sender
letter_event = {
	id = svampires.37008
	desc = EVTDESCAsvampires37008
	is_triggered_only = yes

	immediate = {
		log = "work event id = svampires.37008 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTBsvampires37008
		prestige = 150
		wealth = 150
		ai_chance = {
			factor = 1
		}
	}
}

# Strygos has been reformed. Do you embrace old Strygan culture?
character_event = {
	id = svampires.38
	desc = EVTDESCAsvampires38
	picture = GFX_evt_wandering_strigany
	is_triggered_only = yes

	immediate = {
		log = "work event id = svampires.38 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTAsvampires38
		set_global_flag = strygos_culture_swapping
		culture = strygan
		capital_scope = {
			culture = strygan
			religion = vampiric
		}
		ai_chance = {
			factor = 1
			modifier = {
				factor = 0
				NOT = {
					trait = vampire_strigoi_visible
				}
			}
		}
	}

	option = {
		name = EVTOPTBsvampires38
		ai_chance = {
			factor = 1

		}
	}
}

# Strigany in Strygos turn Voragi
province_event = {
	id = svampires.39
	is_triggered_only = yes
	culture = strigany
	desc = EVTDESCAsvampires39
	picture = GFX_evt_wandering_strigany

	weight_multiplier = {
		factor = 0.16667
	}

	trigger = {
		has_global_flag = strygos_culture_swapping
		has_global_flag = strygos_reformed
		region = world_badlands_strygos
	}

	immediate = {
		log = "work event id = svampires.39 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTAsvampires39
		culture = strygan
	}
}

# Strygos dejure starts being flocked by Strigany
province_event = {
	id = svampires.40
	is_triggered_only = yes
	desc = EVTDESCAsvampires40
	picture = GFX_evt_wandering_strigany

	weight_multiplier = {
		factor = 0.16667
	}

	trigger = {
		has_global_flag = strygos_culture_swapping
		has_global_flag = strygos_reformed
		region = world_badlands_strygos
		NOT = {
			culture = strigany
		}
		NOT = {
			culture = strygan
		}
		owner = {
			culture_group = strigany_group
		}
	}

	immediate = {
		log = "work event id = svampires.40 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTAsvampires40
	}
}

# On_death/exile, cleanup the caravans.
character_event = {
	id = svampires.41
	hide_window = yes
	culture = strigany

	trigger = {
		has_any_opinion_modifier = opinion_strigany_caravan_beacon3
		trait = creature_human
		culture = strigany
	}
	is_triggered_only = yes

	immediate = {
		log = "work event id = svampires.41 for [Root.GetBestName]"
		any_playable_ruler = {
			limit = {
				has_opinion_modifier = {
					who = ROOT
					modifier = opinion_strigany_caravan_beacon2
				}
			}
			capital_scope = {
				remove_province_modifier = strigany_caravan
			}
		}
	}
}

# On_death of host, rekindle the hidden opinion beacon
character_event = {
	id = svampires.42
	hide_window = yes

	trigger = {
		any_courtier = {
			ROOT = {
				has_opinion_modifier = {
					who = PREV
					modifier = opinion_strigany_caravan_beacon2
				}
			}
		}
	}
	is_triggered_only = yes

	immediate = {
		log = "work event id = svampires.42 for [Root.GetBestName]"
		current_heir = {
			ROOT = {
				any_courtier = {
					limit = {
						has_character_flag = strygany_caravan_master
					}
					reverse_opinion = {
						who = PREVPREV
						modifier = opinion_strigany_caravan_beacon2
						months = 10000
					}
					opinion = {
						who = PREVPREV
						modifier = opinion_strigany_caravan_beacon3
						months = 10000
					}
				}
			}

		}
	}
}

# Cleanup the province modifier
# character_event = {

# 	id = svampires.42
# 	hide_window = yes

# 	only_playable = yes
# 	max_age = 100

# 	trigger = { 	NOT = { has_any_opinion_modifier = opinion_strigany_caravan_beacon2 }
# 				capital_scope = { has_province_modifier = strigany_caravan }

# 		}
# 	mean_time_to_happen = { months = 5 }

# 	immediate = { capital_scope = { remove_province_modifier = strigany_caravan } }
# }

# The Necrarch scourges enemy province to take sample subjects
# ROOT is attacker, FROM is province sieged
character_event = {
	id = svampires.43
	desc = EVTDESCsvampires43
	picture = GFX_evt_slaves
	is_triggered_only = yes
	religion = nagashi
	only_playable = yes
	
	trigger = {
		NOT = {
			location = {
				has_province_modifier = province_slave_raid
			}
		}
		NOT = {
			location = {
				has_province_modifier = province_scourged
			}
		}
		NOT = {
			location = {
				has_province_modifier = province_slave_raid_chaos_dwarf
			}
		}
		any_war = {
			attacker = {
				character = ROOT
			}
			using_cb = necrarch_thrall_raid
		}
		FROM = {
			is_capital = yes
			NOT = {
				culture = nehekharan
			}
			owner = {
				is_undead_trigger = no
			}
		} # only against the living
	}

	immediate = {
		log = "work event id = svampires.43 for [Root.GetBestName]"
	}

	option = {
		# kill them all!
		name = EVTOPTAsvampires43
		if = {
			limit = {
				FROM = {
					owner = {
						top_liege = {
							NOT = {
								character = PREV
							}
						}
					}
				}
			}
			FROM = {
				owner = {
					top_liege = {
						character_event = {
							id = svampires.45
						}
					}
				}
			}
		}
		FROM = {
			owner = {
				character_event = {
					id = svampires.44
				}
			}
		}
		FROM = {
			set_province_flag = flag_province_scourged
		}
		if = {
			limit = {
				FROM = {
					location = {
						NOT = {
							has_province_modifier = province_scourged
						}
					}
				}
			}
			FROM = {
				location = {
					add_province_modifier = {
						name = province_scourged
						duration = 2400
					}
				}
			}
		}
		wealth = 125
		prestige = 50
		piety = 250
		change_variable = {
			which = "sample_counter"
			value = 1
		}
		ai_chance = {
			factor = 25
			modifier = {
				factor = 1.75
				ROOT = {
					OR = {
						trait = lunatic_3
						trait = lunatic_2
					}
				}
			}
			modifier = {
				factor = 2
				trait = mystic
			}
		}
	}

	option = {
		# take them all!
		name = EVTOPTCsvampires43
		if = {
			limit = {
				FROM = {
					owner = {
						top_liege = {
							NOT = {
								character = PREV
							}
						}
					}
				}
			}
			FROM = {
				owner = {
					top_liege = {
						character_event = {
							id = svampires.46
						}
					}
				}
			}
		}
		FROM = {
			owner = {
				character_event = {
					id = svampires.46
				}
			}
		}
		wealth = 25
		prestige = 10
		piety = 10
		if = {
			limit = {
				FROM = {
					location = {
						NOT = {
							has_province_modifier = province_slave_raid
						}
					}
				}
			}
			FROM = {
				location = {
					add_province_modifier = {
						name = province_slave_raid
						duration = 2400
					}
				}
			}
		}
		change_variable = {
			which = "sample_counter"
			value = 3
		}
		ai_chance = {
			factor = 75
			modifier = {
				factor = 1.5
				ROOT = {
					NOT = {
						trait = possessed
						trait = lunatic_3
						trait = lunatic_2
					}
				}
			}
			modifier = {
				factor = 1.2
				trait = kind
			}
		}
	}

	option = {
		# I don't care about this province
		name = EVTOPTBsvampires43
		piety = -25
		prestige = -25
		if = {
			limit = {
				trait = cruel
			}
			random = {
				chance = 1
				remove_trait = cruel
			}
		}
		ai_chance = {
			factor = 1
			modifier = {
				factor = 1.2
				ROOT = {
					NOR = {
						trait = possessed
						trait = lunatic_3
						trait = lunatic_2
					}
				}
			}
			modifier = {
				factor = 1.2
				trait = kind
			}
		}
	}
}

character_event = {
	id = svampires.44
	desc = EVTDESCsvampires44
	picture = GFX_evt_slaves
	is_triggered_only = yes
	only_playable = yes

	immediate = {
		log = "work event id = svampires.44 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTAsvampires44
		opinion = {
			modifier = opinion_scourged_lands
			who = FROM
		}
		ai_chance = {
			factor = 1
		}
	}
}

character_event = {
	id = svampires.45
	desc = EVTDESCsvampires45
	picture = GFX_evt_slaves
	is_triggered_only = yes
	only_playable = yes

	immediate = {
		log = "work event id = svampires.45 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTAsvampires45
		opinion = {
			modifier = opinion_scourged_lands
			who = FROM
		}
		ai_chance = {
			factor = 1
		}
	}
}

character_event = {
	id = svampires.46
	desc = EVTDESCsvampires46
	picture = GFX_evt_slaves
	is_triggered_only = yes
	only_playable = yes

	immediate = {
		log = "work event id = svampires.46 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTAsvampires46
		opinion = {
			modifier = opinion_scourged_lands
			who = FROM
		}
		ai_chance = {
			factor = 1
		}
	}
}

# Experimenting with subjects
character_event = {
	id = svampires.47
	desc = EVTDESCsvampires47
	picture = "GFX_evt_lab"
	is_triggered_only = yes
	only_playable = yes

	immediate = {
		log = "work event id = svampires.47 for [Root.GetBestName]"
	}

	option = {
		# Bring forward your studies
		name = EVTOPTAsvampires47
		clr_character_flag = experimenting_necromancy
		change_variable = {
			which = "sample_counter"
			value = -5
		}
		hidden_tooltip = {
			random_list = {
				5 = {
					character_event = {
						id = svampires.47001
					}
				}
				15 = {
					character_event = {
						id = svampires.47002
					}
				}
				35 = {
					character_event = {
						id = svampires.47003
					}
				}
				45 = {
					character_event = {
						id = svampires.47004
					}
				}
			}

		}
		ai_chance = {
			factor = 20
		}
	}

	option = {
		# Create servants
		name = EVTOPTBsvampires47
		clr_character_flag = experimenting_necromancy
		change_variable = {
			which = "sample_counter"
			value = -4
		}
		hidden_tooltip = {
			random_list = {
				5 = {
					character_event = {
						id = svampires.47005
					}
				}
				15 = {
					character_event = {
						id = svampires.47006
					}
				}
				35 = {
					character_event = {
						id = svampires.47007
					}
				}
				45 = {
					character_event = {
						id = svampires.47008
					}
				}
			}

		}
		ai_chance = {
			factor = 80
		}
	}

	option = {
		# Nothing
		name = EVTOPTCsvampires47
		clr_character_flag = experimenting_necromancy
		ai_chance = {
			factor = 0
		}
	}
}

# Increased learning
character_event = {
	id = svampires.47001
	desc = EVTDESCsvampires47001
	picture = "GFX_evt_lab"
	is_triggered_only = yes
	only_playable = yes

	immediate = {
		log = "work event id = svampires.47001 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTAsvampires47001
		change_learning = 1
		ai_chance = {
			factor = 1
		}
	}
}

# Increased piety
character_event = {
	id = svampires.47002
	desc = EVTDESCsvampires47002
	picture = "GFX_evt_lab"
	is_triggered_only = yes
	only_playable = yes

	immediate = {
		log = "work event id = svampires.47002 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTAsvampires47002
		piety = 500
		ai_chance = {
			factor = 1
		}
	}
}

# Increased piety
character_event = {
	id = svampires.47003
	desc = EVTDESCsvampires47003
	picture = "GFX_evt_lab"
	is_triggered_only = yes
	only_playable = yes

	immediate = {
		log = "work event id = svampires.47003 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTAsvampires47003
		piety = 250
		ai_chance = {
			factor = 1
		}
	}
}

# Increased piety
character_event = {
	id = svampires.47004
	desc = EVTDESCsvampires47004
	picture = "GFX_evt_lab"
	is_triggered_only = yes
	only_playable = yes

	immediate = {
		log = "work event id = svampires.47004 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTAsvampires47004
		piety = 100
		ai_chance = {
			factor = 1
		}
	}
}

# Prisoners turned into warbeasts
character_event = {
	id = svampires.47005
	desc = EVTDESCsvampires47005
	picture = "GFX_evt_ghoul"
	is_triggered_only = yes
	only_playable = yes

	immediate = {
		log = "work event id = svampires.47005 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTAsvampires47005
		capital_scope = {
			ROOT = {
				spawn_unit = {
					province = PREV
					home = PREV
					owner = THIS
 					troops = {
 						war_elephants = {
							150 150
						}
					}
					attrition = 1.0
					cannot_inherit = yes
					earmark = nagashi_experiments
				}
			}
		}
		ai_chance = {
			factor = 1
		}
	}
}

# Prisoners turned into warbeasts
character_event = {
	id = svampires.47006
	desc = EVTDESCsvampires47006
	picture = "GFX_evt_ghoul"
	is_triggered_only = yes
	only_playable = yes

	immediate = {
		log = "work event id = svampires.47006 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTAsvampires47006
		capital_scope = {
			ROOT = {
				spawn_unit = {
					province = PREV
					home = PREV
					owner = THIS
 					troops = {
 						war_elephants = {
							50 50
						}
					}
					attrition = 1.0
					cannot_inherit = yes
					earmark = nagashi_experiments
				}
			}
		}
		ai_chance = {
			factor = 1
		}
	}
}

# Prisoners turned into ghouls
character_event = {
	id = svampires.47007
	desc = EVTDESCsvampires47007
	picture = "GFX_evt_ghoul"
	is_triggered_only = yes
	only_playable = yes

	immediate = {
		log = "work event id = svampires.47007 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTAsvampires47007
		capital_scope = {
			ROOT = {
				spawn_unit = {
					province = PREV
					home = PREV
					owner = THIS
 					troops = {
 						light_infantry = {
							750 750
						}
					}
					attrition = 0.5
					cannot_inherit = yes
					earmark = nagashi_experiments
				}
			}
		}
		ai_chance = {
			factor = 1
		}
	}
}

# Prisoners turned into undead
character_event = {
	id = svampires.47008
	desc = EVTDESCsvampires47008
	picture = "GFX_evt_ghoul"
	is_triggered_only = yes
	only_playable = yes

	immediate = {
		log = "work event id = svampires.47008 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTAsvampires47008
		capital_scope = {
			ROOT = {
				spawn_unit = {
					province = PREV
					home = PREV
					owner = THIS
 					troops = {
 						undead_horde = {
							1250 1250
						}
					}
					attrition = 0.5
					cannot_inherit = yes
					earmark = nagashi_experiments
				}
			}
		}
		ai_chance = {
			factor = 1
		}
	}
}

# A vampire wants to commission an item from you
# ping commissioner
character_event = {
	id = svampires.48
	hide_window = yes
	is_triggered_only = yes

	immediate = {
		log = "work event id = svampires.48 for [Root.GetBestName]"
		FROM = {
			character_event = {
				id = svampires.49
			}
		}
	}
}

# Necrarch receives the event
character_event = {
	id = svampires.49
	desc = EVTDESCsvampires49
	picture = "GFX_evt_lab"
	is_triggered_only = yes

	immediate = {
		log = "work event id = svampires.49 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTAsvampires49
		hidden_tooltip = {
			FROM = {
				character_event = {
					id = commissioned_crafting.0
				}
			}
		}
		ai_chance = {
			factor = 80
			modifier = {
				factor = 0.5
				trait = greedy
			}
			modifier = {
				factor = 0.1
				trait = paranoid
			}
		}
	}

	option = {
		name = EVTOPTBsvampires49
		hidden_tooltip = {
			FROM = {
				character_event = {
					id = svampires.50
				}
			}
		}
		ai_chance = {
			factor = 20
		}
	}
}

# Necrarch refused commission
character_event = {
	id = svampires.50
	desc = EVTDESCsvampires50
	picture = "GFX_evt_lab"
	is_triggered_only = yes

	immediate = {
		log = "work event id = svampires.50 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTAsvampires50
		ai_chance = {
			factor = 1
		}
	}
}

# Jade Vampires
# On five years clock, a Jade naturally decays.
character_event = {
	id = svampires.60
	desc = EVTDESCsvampires60
	picture = GFX_evt_vampire_jades
	is_triggered_only = yes

	trigger = {
		trait = vampire_jade_visible
	}

	immediate = {
		log = "work event id = svampires.60 for [Root.GetBestName]"
	}

	option = {
		# Use the crystal
		name = EVTOPTAsvampires60
		trigger = {
			is_incapacitated_trigger = no
			OR = {
				has_artifact = dark_crystal
				top_liege = {
					has_artifact = dark_crystal
					NOT = {
						has_character_flag = forbidden_jade_crystal
					}
				}
			}
		}
		hidden_tooltip = {
			character_event = {
				id = svampires.60005
			}
		}
		ai_chance = {
			factor = 90
			modifier = {
				factor = 0.5
				trait = paranoid
			}
			modifier = {
				factor = 0.85
				trait = proud
			}
		}
	}

	option = {
		name = EVTOPTBsvampires60
		if = {
			limit = {
				top_liege = {
					NOT = {
						character = ROOT
					}
					has_character_flag = forbidden_jade_crystal
				}
			}
			top_liege = {
				ROOT = {
					opinion = {
						who = PREV
						modifier = opinion_forced_abstinence
					}
				}
			}
		}
		if = {
			limit = {
				trait = lore_heavens
			}
			remove_trait = lore_heavens
			remove_character_modifier = magic_power_1
			remove_character_modifier = magic_power_2
			remove_character_modifier = magic_power_3
			remove_character_modifier = magic_power_4
		}
		if = {
			limit = {
				has_character_modifier = jade_degradation_4
			}
			change_variable = {
				which = "lunatic_counter"
				value = 3
			}
			random = {
				chance = 20
				change_diplomacy = -1
				change_learning = -1
			}
		}
		if = {
			limit = {
				has_character_modifier = jade_degradation_3
			}
			change_variable = {
				which = "lunatic_counter"
				value = 1
			}
			remove_character_modifier = jade_degradation_3
			add_character_modifier = {
				name = jade_degradation_4 duration = -1
			}
		}
		if = {
			limit = {
				has_character_modifier = jade_degradation_2
			}
			change_variable = {
				which = "lunatic_counter"
				value = 1
			}
			remove_character_modifier = jade_degradation_2
			add_character_modifier = {
				name = jade_degradation_3 duration = -1
			}
		}
		if = {
			limit = {
				has_character_modifier = jade_degradation_1
			}
			remove_character_modifier = jade_degradation_1
			add_character_modifier = {
				name = jade_degradation_2 duration = -1
			}
		}
		if = {
			limit = {
				NOR = {
					has_character_modifier = jade_degradation_1
					has_character_modifier = jade_degradation_2
					has_character_modifier = jade_degradation_3
					has_character_modifier = jade_degradation_4
				}
			}
			add_character_modifier = {
				name = jade_degradation_1 duration = -1
			}
		}
		ai_chance = {
			factor = 10
		}
	}
}

# The Jade bask in the Dark Crystal
character_event = {
	id = svampires.60005
	desc = EVTDESCsvampires60005
	picture = GFX_evt_vampire_jade_basking
	is_triggered_only = yes

	immediate = {
		log = "work event id = svampires.60005 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTAsvampires60005
		if = {
			limit = {
				NOR = {
					has_character_modifier = jade_degradation_1
					has_character_modifier = jade_degradation_2
					has_character_modifier = jade_degradation_3
					has_character_modifier = jade_degradation_4
					wh_is_mage_trigger = yes
				}
			}
			add_trait = lore_heavens
			add_character_modifier = {
				name = magic_power_2 duration = -1
			}
		}
		if = {
			limit = {
				has_character_modifier = jade_degradation_1
			}
			remove_character_modifier = jade_degradation_1
		}
		if = {
			limit = {
				has_character_modifier = jade_degradation_2
			}
			remove_character_modifier = jade_degradation_2
		}
		if = {
			limit = {
				has_character_modifier = jade_degradation_3
			}
			change_variable = {
				which = "lunatic_counter"
				value = -1
			}
			remove_character_modifier = jade_degradation_3
			add_character_modifier = {
				name = jade_degradation_1 duration = -1
			}
		}
		if = {
			limit = {
				has_character_modifier = jade_degradation_4
			}
			change_variable = {
				which = "lunatic_counter"
				value = -2
			}
			remove_character_modifier = jade_degradation_4
			add_character_modifier = {
				name = jade_degradation_2 duration = -1
			}
		}
		if = {
			limit = {
				higher_tier_than = BARON
			}
			hidden_tooltip = {
				random = {
					chance = 70
					character_event = {
						id = svampires.60006
					}
				}
			}
		}
		ai_chance = {
			factor = 1
		}
	}
}

# The Dragon-Emperor makes a demand
character_event = {
	id = svampires.60006
	hide_window = yes
	is_triggered_only = yes

	immediate = {
		log = "work event id = svampires.60006 for [Root.GetBestName]"
		random_list = {
			5 = {
				modifier = {
					factor = 0.5
					religion = draconite
				}
				character_event = {
					id = svampires.60007 days = 5 random = 5
				}
			} # A strange and valuable trinket is requested and shipped
			6 = {
				modifier = {
					factor = 0.5
					religion = draconite
				}
				character_event = {
					id = svampires.60008 days = 5 random = 5
				}
			} # Forced to go questing
			# 				5 = { modifier = { factor = 0
			# 						has_character_modifier = crusade_cooldown }
			# 					modifier = { factor = 0
			# 						has_character_flag = mysterious_mission_flag }
			# 					modifier = { factor = 1.5
			# 						independent = yes }
			# 					modifier = { factor = 1.5
			# 						higher_tier_than = COUNT }
			# 					modifier = { factor = 1.75
			# 						higher_tier_than = DUKE }
			# 					modifier = { factor = 2
			# 						higher_tier_than = KING }
			# 					modifier = { factor = 0
			# 						NOT = { any_independent_ruler = { NOT = { character = ROOT }
			# 										NOT = { any_vassal = { character = ROOT } }
			# 										is_within_diplo_range = ROOT
			# 											higher_tier_than = COUNT } } }
			# 					character_event = { id = svampires.60009 } } # Forced to declare obscure war
			3 = {
				modifier = {
					factor = 0.1
					is_living_human_trigger = yes
				}
				character_event = {
					id = svampires.60010 days = 5 random = 5
				}
			} # Glimpsed at the Heavens - magic
			5 = {
				character_event = {
					id = svampires.60011 days = 5 random = 5
				}
			} # Increased awareness - learning
			5 = {
				character_event = {
					id = svampires.60012 days = 5 random = 5
				}
			} # Looked into Xa Feng's dreams - tech
			2 = {
				character_event = {
					id = svampires.60013 days = 5 random = 5
				}
			} # Overwhelmed by knowledge - incapable
			5 = {
				character_event = {
					id = svampires.60014 days = 5 random = 5
				}
			} # Stared for too long into the Heavens - learning malus
			5 = {
				modifier = {
					factor = 0
					NOT = {
						is_living_human_trigger = yes
					}
				}
				character_event = {
					id = svampires.60015 days = 5 random = 5
				}
			} # Gone insane
			5 = {
				modifier = {
					factor = 0
					NOT = {
						is_living_human_trigger = yes
					}
				}
				modifier = {
					factor = 0
					religion = draconite
				}
				character_event = {
					id = svampires.60016 days = 5 random = 5
				}
			} # Died
			5 = {
				modifier = {
					factor = 0
					NOT = {
						is_living_human_trigger = yes
					}
				}
				modifier = {
					factor = 0
					religion = draconite
				}
				character_event = {
					id = svampires.60017 days = 5 random = 5
				}
			} # Converted
			5 = {
				modifier = {
					factor = 0.1
					NOT = {
						religion = draconite
					}
				}
				character_event = {
					id = svampires.60018 days = 5 random = 5
				}
			} # Temporary insight - Diplomacy
			6 = {
				modifier = {
					factor = 0.1
					NOT = {
						religion = draconite
					}
				}
				character_event = {
					id = svampires.60019 days = 5 random = 5
				}
			} # Temporary insight - Martial
			5 = {
				modifier = {
					factor = 0.1
					NOT = {
						religion = draconite
					}
				}
				character_event = {
					id = svampires.60020 days = 5 random = 5
				}
			} # Temporary insight - Stewardship
			6 = {
				modifier = {
					factor = 0.1
					NOT = {
						religion = draconite
					}
				}
				character_event = {
					id = svampires.60021 days = 5 random = 5
				}
			} # Temporary insight - Intrigue
			6 = {
				modifier = {
					factor = 0.1
					NOT = {
						religion = draconite
					}
				}
				character_event = {
					id = svampires.60022 days = 5 random = 5
				}
			} # Temporary insight - Learning
			1 = {
				modifier = {
					factor = 0
					NOT = {
						religion = draconite
					}
				}
				modifier = {
					factor = 0
					NOT = {
						piety = 0
					}
				}
				character_event = {
					id = svampires.60023 days = 5 random = 5
				}
			} # Temporary insight - Piety
			6 = {
				modifier = {
					factor = 0
					NOR = {
						trait = lunatic_1
						trait = lunatic_2
						trait = lunatic_3
					}
				}
				character_event = {
					id = svampires.60024 days = 5 random = 5
				}
			} # Clarity of mind
			6 = {
				modifier = {
					factor = 0
					NOR = {
						trait = mutation_minor
						trait = mutation_major
						trait = mutation_massive
					}
				}
				character_event = {
					id = svampires.60025 days = 5 random = 5
				}
			} # Clarity of body
			13 = {
				modifier = {
					factor = 0
					NOT = {
						religion = draconite
					}
				}
			}
		}
	}
}

# A strange and valuable trinket is requested and shipped
character_event = {
	id = svampires.60007
	desc = EVTDESCsvampires60007
	picture = GFX_evt_heavenly_dragon
	is_triggered_only = yes

	immediate = {
		log = "work event id = svampires.60007 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTAsvampires60007
		wealth = -100
		ai_chance = {
			factor = 1
		}
	}
}

# Forced to go questing
character_event = {
	id = svampires.60008
	desc = EVTDESCsvampires60008
	picture = GFX_evt_heavenly_dragon
	is_triggered_only = yes

	immediate = {
		log = "work event id = svampires.60008 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTAsvampires60008
		add_trait = questing
		hidden_tooltip = {
			random_list = {
				65 = {
					character_event = {
						id = svampires.70001 days = 150 random = 350
					}
				} # Nothing
				30 = {
					character_event = {
						id = svampires.70002 days = 150 random = 350
					}
				} # Badly wounded
				5 = {
					modifier = {
						factor = 0
						age = 500
					}
					character_event = {
						id = svampires.70003 days = 150 random = 350
					}
				} # Killed
			}
		}
		ai_chance = {
			factor = 1
		}
	}
}

# The Heavenly Dragon forces the Jade to mobilize
# character_event = {

# 	id = svampires.60009
# 	desc = EVTDESCsvampires60009

# 	picture = GFX_evt_heavenly_dragon
# 	is_triggered_only = yes

# 	option = {
# 		name = EVTOPTAsvampires60009

# 		set_character_flag = mysterious_mission_flag
# 			random_independent_ruler = { limit = { NOT = { religion_group = old_ones_group }

# 								NOT = { character = ROOT }
# 										is_landed = yes

# 										is_nomadic = no
# 										any_demesne_title = { tier = KING }

# 										higher_tier_than = DUKE }
# 						hidden_tooltip = { long_character_event = { id = slizardmen.29001 } }

# 						random_realm_province = {
# 									ROOT = {

# 										war = {
# 											casus_belli = mysdragon_mission

# 											target = PREVPREVPREV # The top liege of the owner
# 											thirdparty_title = PREVPREV # The de jure kingdom

# 											tier = KING
# 											}

# 										}
# 									}

# 								 }
# 		ai_chance = { factor = 1 }

# 	}
# }

# Glimpsed at the Heavens - magic
character_event = {
	id = svampires.60010
	desc = EVTDESCsvampires60010
	picture = GFX_evt_vampire_jade_basking
	is_triggered_only = yes

	immediate = {
		log = "work event id = svampires.60010 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTAsvampires60010
		hidden_tooltip = {
			character_event = {
				id = mutation.1005
			}
		} # lunacy counter
		if = {
			limit = {
				has_character_modifier = magic_power_4
			}
			change_learning = 3
		}
		if = {
			limit = {
				has_character_modifier = magic_power_3
			}
			remove_character_modifier = magic_power_3
			add_character_modifier = {
				name = magic_power_4
				duration = -1
			}
		}
		if = {
			limit = {
				has_character_modifier = magic_power_2
			}
			remove_character_modifier = magic_power_2
			add_character_modifier = {
				name = magic_power_3
				duration = -1
			}
		}
		if = {
			limit = {
				has_character_modifier = magic_power_1
			}
			remove_character_modifier = magic_power_1
			add_character_modifier = {
				name = magic_power_2
				duration = -1
			}
		}
		if = {
			limit = {
				wh_is_mage_trigger = no
			}
			add_trait = lore_heavens
			add_character_modifier = {
				name = magic_power_2
				duration = -1
			}
		}
		ai_chance = {
			factor = 1
		}
	}
}

# Increased awareness - learning
character_event = {
	id = svampires.60011
	desc = EVTDESCsvampires60011
	picture = GFX_evt_vampire_jade_basking
	is_triggered_only = yes

	immediate = {
		log = "work event id = svampires.60011 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTAsvampires60011
		change_learning = 1
		ai_chance = {
			factor = 1
		}
	}
}

# Looked into Xa Feng's dreams - tech
character_event = {
	id = svampires.60012
	desc = EVTDESCsvampires60012
	picture = GFX_evt_vampire_jade_basking
	is_triggered_only = yes

	immediate = {
		log = "work event id = svampires.60012 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTAsvampires60012
		random_list = {
			33 = {
				military_techpoints = 50
			}
			33 = {
				economy_techpoints = 50
			}
			33 = {
				culture_techpoints = 50
			}
		}
		ai_chance = {
			factor = 1
		}
	}
}

# Overwhelmed by knowledge - incapable
character_event = {
	id = svampires.60013
	desc = EVTDESCsvampires60013
	picture = GFX_evt_heavenly_dragon
	is_triggered_only = yes

	immediate = {
		log = "work event id = svampires.60013 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTAsvampires60013
		hidden_tooltip = {
			character_event = {
				id = mutation.1005
			}
		} # lunacy counter
		add_trait = incapable
		ai_chance = {
			factor = 1
		}
	}
}

# Stared for too long into the Heavens - learning malus
character_event = {
	id = svampires.60014
	desc = EVTDESCsvampires60014
	picture = GFX_evt_heavenly_dragon
	is_triggered_only = yes

	immediate = {
		log = "work event id = svampires.60014 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTAsvampires60014
		hidden_tooltip = {
			character_event = {
				id = mutation.1005
			}
		} # lunacy counter
		change_learning = -1
		ai_chance = {
			factor = 1
		}
	}
}

# Mere human gone insane from looking
character_event = {
	id = svampires.60015
	desc = EVTDESCsvampires60015
	picture = GFX_evt_heavenly_dragon
	is_triggered_only = yes

	immediate = {
		log = "work event id = svampires.60015 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTAsvampires60015
		change_variable = {
			which = "lunatic_counter"
			value = 20
		}
		add_trait = lunatic_3
		ai_chance = {
			factor = 1
		}
	}
}

# Mere human killed by looking
character_event = {
	id = svampires.60016
	desc = EVTDESCsvampires60016
	picture = GFX_evt_heavenly_dragon
	is_triggered_only = yes

	immediate = {
		log = "work event id = svampires.60016 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTAsvampires60016
		death = {
			death_reason = death_murder_unknown
		}
		ai_chance = {
			factor = 1
		}
	}
}

# Mere human converted
character_event = {
	id = svampires.60017
	desc = EVTDESCsvampires60017
	picture = GFX_evt_heavenly_dragon
	is_triggered_only = yes

	immediate = {
		log = "work event id = svampires.60017 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTAsvampires60017
		hidden_tooltip = {
			character_event = {
				id = mutation.1005
			}
		} # lunacy counter
		religion = draconite
		ai_chance = {
			factor = 1
		}
	}
}

# Temporary Insight - Diplomacy
character_event = {
	id = svampires.60018
	desc = EVTDESCsvampires60018
	picture = GFX_evt_vampire_dark_crystal
	is_triggered_only = yes

	immediate = {
		log = "work event id = svampires.60018 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTAsvampires60018
		add_character_modifier = {
			name = jade_plus_diplomacy
			stacking = yes
			duration = 600
		}
		ai_chance = {
			factor = 1
		}
	}
}

# Temporary Insight - Martial
character_event = {
	id = svampires.60019
	desc = EVTDESCsvampires60019
	picture = GFX_evt_vampire_dark_crystal
	is_triggered_only = yes

	immediate = {
		log = "work event id = svampires.60019 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTAsvampires60019
		add_character_modifier = {
			name = jade_plus_martial
			stacking = yes
			duration = 600
		}
		ai_chance = {
			factor = 1
		}
	}
}

# Temporary Insight - Stewardship
character_event = {
	id = svampires.60020
	desc = EVTDESCsvampires60020
	picture = GFX_evt_vampire_dark_crystal
	is_triggered_only = yes

	immediate = {
		log = "work event id = svampires.60020 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTAsvampires60020
		add_character_modifier = {
			name = jade_plus_stewardship
			stacking = yes
			duration = 600
		}
		ai_chance = {
			factor = 1
		}
	}
}

# Temporary Insight - Intrigue
character_event = {
	id = svampires.60021
	desc = EVTDESCsvampires60021
	picture = GFX_evt_vampire_dark_crystal
	is_triggered_only = yes

	immediate = {
		log = "work event id = svampires.60021 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTAsvampires60021
		add_character_modifier = {
			name = jade_plus_intrigue
			stacking = yes
			duration = 600
		}
		ai_chance = {
			factor = 1
		}
	}
}

# Temporary Insight - Learning
character_event = {
	id = svampires.60022
	desc = EVTDESCsvampires60022
	picture = GFX_evt_vampire_dark_crystal
	is_triggered_only = yes

	immediate = {
		log = "work event id = svampires.60022 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTAsvampires60022
		add_character_modifier = {
			name = jade_plus_learning
			stacking = yes
			duration = 600
		}
		ai_chance = {
			factor = 1
		}
	}
}

# Temporary Insight - Piety
character_event = {
	id = svampires.60023
	desc = EVTDESCsvampires60023
	picture = GFX_evt_heavenly_dragon
	is_triggered_only = yes

	immediate = {
		log = "work event id = svampires.60023 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTAsvampires60023
		hidden_tooltip = {
			character_event = {
				id = mutation.1005
			}
		} # lunacy counter
		add_character_modifier = {
			name = jade_plus_piety
			duration = 300
		}
		ai_chance = {
			factor = 1
		}
	}
}

# Clarity of mind - Removed insanity
character_event = {
	id = svampires.60024
	desc = EVTDESCsvampires60024
	picture = GFX_evt_heavenly_dragon
	is_triggered_only = yes

	immediate = {
		log = "work event id = svampires.60024 for [Root.GetBestName]"
		change_variable = {
			which = "lunatic_counter"
			value = -10
		}
	}

	option = {
		name = EVTOPTAsvampires60024
		if = {
			limit = {
				NOT = {
					check_variable = {
						which = "lunatic_counter"
						value = 1
					}
				}
			}
			remove_trait = lunatic_1
			remove_trait = lunatic_2
			remove_trait = lunatic_3
		}
		if = {
			limit = {
				NOT = {
					check_variable = {
						which = "lunatic_counter"
						value = 10
					}
				}
				check_variable = {
					which = "lunatic_counter"
					value = 5
				}
			}
			remove_trait = lunatic_2
			remove_trait = lunatic_3
			add_trait = lunatic_1
		}
		if = {
			limit = {
				NOT = {
					check_variable = {
						which = "lunatic_counter"
						value = 20
					}
				}
				check_variable = {
					which = "lunatic_counter"
					value = 10
				}
			}
			remove_trait = lunatic_1
			remove_trait = lunatic_3
			add_trait = lunatic_2
		}
		ai_chance = {
			factor = 1
		}
	}
}

# Clarity of body - Removed mutation
character_event = {
	id = svampires.60025
	desc = EVTDESCsvampires60025
	picture = GFX_evt_heavenly_dragon
	is_triggered_only = yes

	immediate = {
		log = "work event id = svampires.60025 for [Root.GetBestName]"
		change_variable = {
			which = "mutation_counter"
			value = -10
		}
	}

	option = {
		name = EVTOPTAsvampires60025
		add_trait = wounded
		if = {
			limit = {
				NOT = {
					check_variable = {
						which = "mutation_counter"
						value = 1
					}
				}
			}
			remove_trait = mutation_minor
			remove_trait = mutation_major
			remove_trait = mutation_massive
			remove_trait = mut_spines
			remove_trait = mut_horns
			remove_trait = mut_scales
			remove_trait = mut_thirdeye
			remove_trait = mut_tongue
			remove_trait = mut_crests
			remove_trait = mut_doublehead
			remove_trait = mut_beak
			remove_trait = mut_teeth
			remove_trait = mut_eyes
			remove_trait = mut_bigeyes
		}
		if = {
			limit = {
				NOT = {
					check_variable = {
						which = "mutation_counter"
						value = 10
					}
				}
				check_variable = {
					which = "mutation_counter"
					value = 5
				}
			}
			remove_trait = mutation_major
			remove_trait = mutation_massive
			add_trait = mutation_minor
		}
		if = {
			limit = {
				NOT = {
					check_variable = {
						which = "mutation_counter"
						value = 20
					}
				}
				check_variable = {
					which = "mutation_counter"
					value = 10
				}
			}
			remove_trait = mutation_minor
			remove_trait = mutation_massive
			add_trait = mutation_major
		}
		ai_chance = {
			factor = 1
		}
	}
}

# End quest - no consequences
character_event = {
	id = svampires.70001
	desc = EVTDESCsvampires70001
	picture = GFX_evt_heavenly_dragon
	is_triggered_only = yes

	immediate = {
		log = "work event id = svampires.70001 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTAsvampires70001
		remove_trait = questing
		ai_chance = {
			factor = 1
		}
	}
}

# End quest - wounded
character_event = {
	id = svampires.70002
	desc = EVTDESCsvampires70002
	picture = GFX_evt_heavenly_dragon
	is_triggered_only = yes

	immediate = {
		log = "work event id = svampires.70002 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTAsvampires70002
		add_trait = wounded
		add_trait = incapable
		remove_trait = questing
		ai_chance = {
			factor = 1
		}
	}
}

# End quest - dead
character_event = {
	id = svampires.70003
	desc = EVTDESCsvampires70003
	picture = GFX_evt_heavenly_dragon
	is_triggered_only = yes

	immediate = {
		log = "work event id = svampires.70003 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTAsvampires70003
		death = {
			death_reason = death_accident
		}
		ai_chance = {
			factor = 1
		}
	}
}

# Hipnotize target
character_event = {
	id = svampires.71
	desc = EVTDESCsvampires71
	picture = GFX_evt_vampire_jade_hypnosis
	is_triggered_only = yes

	immediate = {
		log = "work event id = svampires.71 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTAsvampires71
		hidden_tooltip = {
			random_list = {
				75 = {
					opinion = {
						who = FROMFROM
						modifier = opinion_ensnared_me
					}
					if = {
						limit = {
							NOT = {
								num_of_friends = 5
							}
						}
						add_friend = FROMFROM
					}
				}
				25 = {
					modifier = {
						factor = 1.5
						has_character_modifier = magic_power_1
					}
					modifier = {
						factor = 1.75
						has_character_modifier = magic_power_2
					}
					modifier = {
						factor = 1.95
						has_character_modifier = magic_power_3
					}
					modifier = {
						factor = 2
						has_character_modifier = magic_power_4
					}
					modifier = {
						factor = 1.25
						trait = magic_potential_1
					}
					modifier = {
						factor = 1.35
						trait = magic_potential_2
					}
					modifier = {
						factor = 1.45
						trait = magic_potential_3
					}
					modifier = {
						factor = 1.5
						trait = magic_potential_4
					}
					modifier = {
						factor = 1.35
						trait = lore_high_magic
					}
					modifier = {
						factor = 1.35
						trait = lore_dark_magic
					}
					modifier = {
						factor = 0.5
						trait = imbecile
					}
					modifier = {
						factor = 0.65
						trait = idiot
					}
					modifier = {
						factor = 0.75
						trait = slow
					}
					modifier = {
						factor = 0.85
						trait = dumb
					}
					modifier = {
						factor = 0.95
						trait = dim
					}
					modifier = {
						factor = 1.25
						trait = bright
					}
					modifier = {
						factor = 1.35
						trait = smart
					}
					modifier = {
						factor = 1.5
						trait = quick
					}
					modifier = {
						factor = 1.75
						trait = brilliant
					}
					modifier = {
						factor = 2
						trait = genius
					}
					modifier = {
						factor = 1.5
						trait = creature_elf
					}
					modifier = {
						factor = 1.5
						trait = creature_dwarf
					}
					modifier = {
						factor = 1.5
						trait = creature_skink
					}
					modifier = {
						factor = 0.75
						trait = creature_saurus
					}
					modifier = {
						factor = 1.5
						any_rival = {
							character = FROMFROM
						}
					}
				}
			}

		}
		ai_chance = {
			factor = 1
		}
	}
}

# Random demesne province depopulated
province_event = {
	id = svampires.71001
	religion_group = necromantic_group
	desc = EVTDESCsvampires71001
	picture = GFX_evt_vampire_jade_eyes
	is_triggered_only = yes

	trigger = {
		NOT = {
			has_province_modifier = jade_mayhem
		}
		NOT = {
			culture = nehekharan
		}
		owner = {
			trait = vampire_jade_visible
		}
	}

	weight_multiplier = {
		factor = 0.16129
		modifier = {
			factor = 1.05
			is_capital = yes
		}
		modifier = {
			factor = 0.67
			owner = {
				war = yes
			}
		}
		modifier = {
			factor = 1.33
			has_province_modifier = province_scourged
		}
		modifier = {
			factor = 1.33
			has_province_modifier = province_slave_raid_chaos_dwarf
		}
		modifier = {
			factor = 1.33
			has_province_modifier = province_slave_raid
		}
		modifier = {
			factor = 2.00
			NOT = {
				owner = {
					top_liege = {
						realm_size = 20
					}
				}
			}
		}
		modifier = {
			factor = 0.67
			owner = {
				top_liege = {
					realm_size = 80
				}
			}
		}
		modifier = {
			factor = 0.67
			owner = {
				top_liege = {
					realm_size = 120
				}
			}
		}
		modifier = {
			factor = 0.67
			owner = {
				top_liege = {
					realm_size = 150
				}
			}
		}
		modifier = {
			factor = 0.67
			owner = {
				top_liege = {
					realm_size = 200
				}
			}
		}
		modifier = {
			factor = 2.00
			owner = {
				top_liege = {
					any_courtier = {
						trait = vampire_jade_visible
						count = 5
					}
				}
			}
		}
		modifier = {
			factor = 2.00
			owner = {
				top_liege = {
					any_courtier = {
						trait = vampire_jade_visible
						count = 10
					}
				}
			}
		}
		modifier = {
			factor = 2.00
			owner = {
				top_liege = {
					any_courtier = {
						trait = vampire_jade_visible
						count = 15
					}
				}
			}
		}
		modifier = {
			factor = 2.00
			owner = {
				top_liege = {
					any_courtier = {
						trait = vampire_jade_visible
						count = 20
					}
				}
			}
		}
	}

	immediate = {
		log = "work event id = svampires.71001 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTAsvampires71001
		if = {
			limit = {
				capital_holding = {
					has_building = ca_jade_stock_1
				}
			}
			capital_holding = {
				remove_building = ca_jade_stock_1
			}
		}
		add_province_modifier = {
			name = jade_depopulation
			duration = 900
			stacking = yes
		}
		ai_chance = {
			factor = 1
		}
	}
}

# Random non-vampiric province getting unrest
province_event = {
	id = svampires.71002
	desc = EVTDESCsvampires71002
	picture = GFX_evt_vampire_jade_eyes
	is_triggered_only = yes

	trigger = {
		NOT = {
			has_province_modifier = jade_mayhem
		}
		NOT = {
			culture = nehekharan
		}
		NOT = {
			religion_group = necromantic_group
		}
		owner = {
			trait = vampire_jade_visible
		}
	}

	weight_multiplier = {
		factor = 0.24390
		modifier = {
			factor = 0.25
			culture_group = lizardman_group
		}
		modifier = {
			factor = 0.80
			is_capital = yes
		}
		modifier = {
			factor = 0.20
			has_province_modifier = province_scourged
		}
		modifier = {
			factor = 0.36
			has_province_modifier = province_slave_raid_chaos_dwarf
		}
		modifier = {
			factor = 0.36
			has_province_modifier = province_slave_raid
		}
		modifier = {
			factor = 2.00
			NOT = {
				owner = {
					top_liege = {
						realm_size = 20
					}
				}
			}
		}
		modifier = {
			factor = 0.67
			owner = {
				top_liege = {
					realm_size = 80
				}
			}
		}
		modifier = {
			factor = 0.67
			owner = {
				top_liege = {
					realm_size = 120
				}
			}
		}
		modifier = {
			factor = 0.67
			owner = {
				top_liege = {
					realm_size = 150
				}
			}
		}
		modifier = {
			factor = 0.67
			owner = {
				top_liege = {
					realm_size = 200
				}
			}
		}
	}

	immediate = {
		log = "work event id = svampires.71002 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTAsvampires71002
		if = {
			limit = {
				capital_holding = {
					has_building = ca_jade_stock_1
				}
			}
			capital_holding = {
				remove_building = ca_jade_stock_1
			}
		}
		add_province_modifier = {
			name = jade_mayhem
			duration = 300
			stacking = yes
		}
		ai_chance = {
			factor = 1
		}
	}
}

# Jade ravages a province
character_event = {
	id = svampires.72
	desc = EVTDESCsvampires72
	picture = GFX_evt_vampire_jade_eyes
	border = GFX_event_normal_frame_war
	is_triggered_only = yes

	immediate = {
		log = "work event id = svampires.72 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTAsvampires72
		if = {
			limit = {
				FROM = {
					ai = no
				}
			}
			wealth = -85
		}
		if = {
			limit = {
				FROM = {
					ai = yes
				}
			}
			wealth = -35
		}
		prestige = 100
		piety = 100
		hidden_tooltip = {
			random_list = {
				40 = {
					modifier = {
						factor = 0.5
						FROM = {
							location = {
								has_province_modifier = jade_mayhem
							}
						}
					}
					modifier = {
						factor = 0.5
						FROM = {
							location = {
								has_province_modifier = province_scourged
							}
						}
					}
					modifier = {
						factor = 0.5
						FROM = {
							location = {
								has_province_modifier = province_slave_raid_chaos_dwarf
							}
						}
					}
					modifier = {
						factor = 0.5
						FROM = {
							location = {
								has_province_modifier = province_slave_raid
							}
						}
					}
					character_event = {
						id = svampires.72005 days = 25 random = 50
					}
				} # partially cleansed
				40 = {
					character_event = {
						id = svampires.72006 days = 25 random = 50
					}
				} # entirely cleansed
				20 = {
					modifier = {
						factor = 0.5
						FROM = {
							location = {
								has_province_modifier = jade_mayhem
							}
						}
					}
					modifier = {
						factor = 0.5
						FROM = {
							location = {
								has_province_modifier = province_scourged
							}
						}
					}
					modifier = {
						factor = 0.5
						FROM = {
							location = {
								has_province_modifier = province_slave_raid_chaos_dwarf
							}
						}
					}
					modifier = {
						factor = 0.5
						FROM = {
							location = {
								has_province_modifier = province_slave_raid
							}
						}
					}
					character_event = {
						id = svampires.72007 days = 25 random = 50
					}
				} # peasant uprising
			}
		}
		ai_chance = {
			factor = 1
		}
	}

	option = {
		name = EVTOPTBsvampires72
		prestige = -50
		remove_trait = questing
		ai_chance = {
			factor = 0
		}
	}
}

# Province partially cleansed
character_event = {
	id = svampires.72005
	desc = EVTDESCsvampires72005
	picture = GFX_evt_vampire_jade_eyes
	is_triggered_only = yes

	immediate = {
		log = "work event id = svampires.72005 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTAsvampires72005
		remove_trait = questing
		if = {
			limit = {
				FROMFROM = {
					has_building = ca_jade_stock_1
				}
			}
			FROMFROM = {
				remove_building = ca_jade_stock_1
			}
		}
		FROMFROM = {
			location = {
				destroy_random_building = yes
				add_province_modifier = {
					name = jade_depopulation
					duration = 500
					stacking = yes
				}
			}
		}
		if = {
			limit = {
				capital_scope = {
					has_province_modifier = jade_depopulation
					religion_group = necromantic_group
					NOT = {
						province = FROMFROM
					}
				}
			}
			capital_scope = {
				remove_province_modifier = jade_depopulation
			}
			break = yes
		}
		random_demesne_province = {
			limit = {
				has_province_modifier = jade_depopulation
				religion_group = necromantic_group
				NOT = {
					province = FROMFROM
				}
			}
			remove_province_modifier = jade_depopulation
		}
		ai_chance = {
			factor = 1
		}
	}
}

# Province entirely cleansed
character_event = {
	id = svampires.72006
	desc = EVTDESCsvampires72006
	picture = GFX_evt_vampire_jade_eyes
	is_triggered_only = yes

	immediate = {
		log = "work event id = svampires.72006 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTAsvampires72006
		remove_trait = questing
		if = {
			limit = {
				FROMFROM = {
					has_building = ca_jade_stock_1
				}
			}
			FROMFROM = {
				remove_building = ca_jade_stock_1
			}
		}
		FROMFROM = {
			location = {
				destroy_random_building = yes
				add_province_modifier = {
					name = jade_depopulation
					duration = 900
					stacking = yes
				}
			}
		}
		hidden_tooltip = {
			character_event = {
				id = svampires.72008 days = 900
			}
		}
		if = {
			limit = {
				capital_scope = {
					has_province_modifier = jade_depopulation
					religion_group = necromantic_group
					NOT = {
						province = FROMFROM
					}
				}
			}
			capital_scope = {
				remove_province_modifier = jade_depopulation
			}
			break = yes
		}
		random_demesne_province = {
			limit = {
				has_province_modifier = jade_depopulation
				religion_group = necromantic_group
				NOT = {
					province = FROMFROM
				}
			}
			remove_province_modifier = jade_depopulation
		}
		ai_chance = {
			factor = 1
		}
	}
}

# Province rises in rebellion against Jade
character_event = {
	id = svampires.72007
	desc = EVTDESCsvampires72007
	picture = GFX_evt_vampire_jade_eyes
	is_triggered_only = yes

	immediate = {
		log = "work event id = svampires.72007 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTAsvampires72007
		remove_trait = questing
		FROMFROM = {
			location = {
				destroy_random_building = yes
				add_province_modifier = {
					name = jade_mayhem
					duration = 100
					stacking = yes
				}
			}
			character_event = {
				id = TOG.1000
			}
		}
		ai_chance = {
			factor = 1
		}
	}
}

# The Sauri come to fill the void
character_event = {
	id = svampires.72008
	desc = EVTDESCsvampires72008
	picture = GFX_evt_vampire_jade_eyes
	is_triggered_only = yes

	immediate = {
		log = "work event id = svampires.72008 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTAsvampires72008
		FROMFROMFROM = {
			location = {
				culture = lizardman_lost
				religion = ROOT
				remove_province_modifier = jade_depopulation
			}
		}
		ai_chance = {
			factor = 1
		}
	}
}

# The Jade grab people while raiding an enemy province
# ROOT is attacker, FROM is province sieged
character_event = {
	id = svampires.73
	desc = EVTDESCsvampires73
	picture = GFX_evt_vampire_jade_eyes
	is_triggered_only = yes

	# only_playable = yes
	trigger = {
		higher_tier_than = BARON
		trait = vampire_jade_visible
		FROM = {
			NOT = {
				location = {
					has_province_modifier = province_slave_raid
				}
			}
		}
		FROM = {
			NOT = {
				location = {
					has_province_modifier = province_scourged
				}
			}
		}
		FROM = {
			NOT = {
				location = {
					has_province_modifier = province_slave_raid_chaos_dwarf
				}
			}
		}
		FROM = {
			NOT = {
				location = {
					culture = nehekharan
				}
			}
		}
		FROM = {
			is_tribal = no
			is_nomadic = no
			is_capital = yes
		} # only against civilized places
	}

	immediate = {
		log = "work event id = svampires.73 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTAsvampires73
		if = {
			limit = {
				capital_scope = {
					has_province_modifier = jade_depopulation
					religion_group = necromantic_group
					NOT = {
						province = FROMFROM
					}
				}
			}
			capital_scope = {
				remove_province_modifier = jade_depopulation
			}
			break = yes
		}
		random_demesne_province = {
			limit = {
				has_province_modifier = jade_depopulation
				religion_group = necromantic_group
				NOT = {
					province = FROMFROM
				}
			}
			remove_province_modifier = jade_depopulation
		}
		if = {
			limit = {
				FROM = {
					owner = {
						top_liege = {
							NOT = {
								character = PREV
							}
							NOT = {
								character = ROOT
							}
						}
					}
				}
			}
			FROM = {
				owner = {
					top_liege = {
						character_event = {
							id = svampires.73002
						}
					}
				}
			}
		}
		if = {
			limit = {
				FROM = {
					owner = {
						NOT = {
							character = ROOT
						}
					}
				}
			}
			FROM = {
				owner = {
					character_event = {
						id = svampires.73001
					}
				}
			}
		}
		FROM = {
			set_province_flag = flag_province_scourged
		}
		if = {
			limit = {
				FROM = {
					location = {
						NOT = {
							has_province_modifier = province_slave_raid
						}
					}
				}
			}
			FROM = {
				location = {
					add_province_modifier = {
						name = province_slave_raid
						duration = 800
					}
				}
			}
		}
		wealth = 125
		prestige = 50
		piety = 50
		hidden_tooltip = {
			FROM = {
				destroy_random_building = yes
				holder_scope = {
					random_courtier = {
						limit = {
							is_abroad = no
							NOT = {
								religion_group = necromantic_group
							}
						}
						random = {
							chance = 75
							if = {
								limit = {
									is_invincible_trigger = yes
								}
								antideath_effect = yes
								break = yes
							}
							death = {
								death_reason = death_murder
								killer = ROOT
							}
						}
						random_courtier = {
							limit = {
								is_abroad = no
								NOT = {
									religion_group = necromantic_group
								}
								NOT = {
									character = PREV
								}
							}
							random = {
								chance = 75
								if = {
									limit = {
										is_invincible_trigger = yes
									}
									antideath_effect = yes
									break = yes
								}
								death = {
									death_reason = death_murder
									killer = ROOT
								}
							}
							random_courtier = {
								limit = {
									is_abroad = no
									NOT = {
										religion_group = necromantic_group
									}
									NOT = {
										character = PREVPREV
									}
									NOT = {
										character = PREV
									}
								}
								random = {
									chance = 75
									if = {
										limit = {
											is_invincible_trigger = yes
										}
										antideath_effect = yes
										break = yes
									}
									death = {
										death_reason = death_murder
										killer = ROOT
									}
								}
								random_courtier = {
									limit = {
										is_abroad = no
										NOT = {
											religion_group = necromantic_group
										}
										NOT = {
											character = PREVPREVPREV
										}
										NOT = {
											character = PREVPREV
										}
										NOT = {
											character = PREV
										}
									}
									random = {
										chance = 75
										if = {
											limit = {
												is_invincible_trigger = yes
											}
											antideath_effect = yes
											break = yes
										}
										death = {
											death_reason = death_murder
											killer = ROOT
										}
									}
									random_courtier = {
										limit = {
											is_abroad = no
											NOT = {
												religion_group = necromantic_group
											}
											NOT = {
												character = PREVPREVPREVPREV
											}
											NOT = {
												character = PREVPREVPREV
											}
											NOT = {
												character = PREVPREV
											}
											NOT = {
												character = PREV
											}
										}
										random = {
											chance = 75
											if = {
												limit = {
													is_invincible_trigger = yes
												}
												antideath_effect = yes
												break = yes
											}
											death = {
												death_reason = death_murder
												killer = ROOT
											}
										}
									} 
								} 
							} 
						} 
					} 
				}
			}
		}
		ai_chance = {
			factor = 100
		}
	}

	option = {
		name = EVTOPTBsvampires73
		piety = -25
		prestige = -25
		if = {
			limit = {
				trait = cruel
			}
			random = {
				chance = 1
				remove_trait = cruel
			}
		}
		ai_chance = {
			factor = 0
		}
	}
}

character_event = {
	id = svampires.73001
	desc = EVTDESCsvampires73001
	picture = GFX_evt_vampire_jade_eyes
	is_triggered_only = yes
	only_playable = yes

	immediate = {
		log = "work event id = svampires.73001 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTAsvampires73001
		opinion = {
			modifier = opinion_scourged_lands
			who = FROM
		}
		ai_chance = {
			factor = 1
		}
	}
}

character_event = {
	id = svampires.73002
	desc = EVTDESCsvampires73002
	picture = GFX_evt_vampire_jade_eyes
	is_triggered_only = yes
	only_playable = yes

	immediate = {
		log = "work event id = svampires.73002 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTAsvampires73002
		opinion = {
			modifier = opinion_scourged_lands
			who = FROM
		}
		ai_chance = {
			factor = 1
		}
	}
}

# Dark Crystal Ambition
character_event = {
	id = svampires.74
	desc = {
		text = EVTDESCAsvampires74
		trigger = {
			religion = draconite
			trait = vampire_jade_visible
		}
	}
	desc = {
		text = EVTDESCBsvampires74
		trigger = {
			trait = vampire_jade_visible
			NOT = {
				religion = draconite
			}
		}
	}
	desc = {
		text = EVTDESCCsvampires74
		trigger = {
			religion = draconite
			NOT = {
				trait = vampire_jade_visible
			}
		}
	}
	desc = {
		text = EVTDESCDsvampires74
		trigger = {
			NOR = {
				religion = draconite
				trait = vampire_jade_visible
			}
		}
	}
	picture = GFX_evt_vampire_dark_crystal
	capable_only = yes
	only_playable = yes
	prisoner = no
	is_triggered_only = yes

	trigger = {
		higher_tier_than = COUNT
		is_incapacitated_trigger = no
		has_ambition = obj_acquire_dark_crystal
		NOT = {
			has_artifact = dark_crystal
		}
		OR = {
			AND = {
				has_landed_title = c_tlaxtlan
				NOT = {
					has_global_flag = tlaxtlan_crystal_found
				}
			}
			AND = {
				has_landed_title = c_calxi
				NOT = {
					has_global_flag = calxi_crystal_found
				}
			}
			AND = {
				has_landed_title = c_mutiris
				NOT = {
					has_global_flag = mutiris_crystal_found
				}
			}
		}
	}

	weight_multiplier = {
		factor = 0.05000
		modifier = {
			factor = 1.18
			trait = paranoid
		}
		modifier = {
			factor = 2.00
			trait = diligent
		}
		modifier = {
			factor = 1.33
			trait = genius
		}
		modifier = {
			factor = 1.18
			stewardship = 20
		}
		modifier = {
			factor = 1.18
			learning = 20
		}
		modifier = {
			factor = 1.18
			religion = draconite
		}
		modifier = {
			factor = 0.54
			independent = no
		}
		modifier = {
			factor = 0.67
			ai = yes
		}
		modifier = {
			factor = 2.00
			location = {
				province_id = 1758 # Tlaxtlan
			}
		}
		modifier = {
			factor = 1.33
			location = {
				province_id = 2420 # Mutiris
			}
		}
		modifier = {
			factor = 1.18
			location = {
				province_id = 1074 # Calxi
			}
		}
	}

	immediate = {
		log = "work event id = svampires.74 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTAsvampires74
		add_artifact = dark_crystal
		prestige = 500
		any_playable_ruler = {
			limit = {
				higher_tier_than = COUNT
				ai = no
				OR = {
					has_artifact = dark_crystal
					trait = vampire_jade_visible
					learning = 20
					religion = draconite
				}
			}
			character_event = {
				id = svampires.74001 days = 2 random = 10
			}
		}
	}
}

character_event = {
	id = svampires.74001
	desc = EVTDESCsvampires74001
	picture = GFX_evt_vampire_dark_crystal
	is_triggered_only = yes
	only_playable = yes

	immediate = {
		log = "work event id = svampires.74001 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTAsvampires74001
		ai_chance = {
			factor = 1
		}
	}
}

# Sha'shala relinks with the Dragon-Emperor
long_character_event = {
	id = svampires.75
	desc = EVTDESCsvampires75
	picture = GFX_evt_vampire_dark_crystal
	is_triggered_only = yes
	only_playable = yes

	immediate = {
		log = "work event id = svampires.75 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTAsvampires75
		wealth = 200
		prestige = 400
		piety = 400
		location = {
			ROOT = {
				spawn_unit = {
					province = PREV
					troops = {
						war_elephants = {
							50 50
						}
					}
					earmark = cathay_army
					attrition = 0.5
					maintenance_multiplier = 0
					reinforces = yes
				}
			}
		}
		location = {
			ROOT = {
				spawn_unit = {
					province = PREV
					troops = {
						artillery = {
							250 250
						}
					}
					earmark = cathay_army
				}
			}
		}
		location = {
			ROOT = {
				spawn_unit = {
					province = PREV
					troops = {
						pikemen = {
							8500 8500
						}
					}
					earmark = cathay_army
					attrition = 0.5
					maintenance_multiplier = 0
					reinforces = yes
				}
			}
		}
		location = {
			ROOT = {
				spawn_unit = {
					province = PREV
					troops = {
						gunpowder = {
							3500 3500
						}
					}
					earmark = cathay_army
				}
			}
		}
		ai_chance = {
			factor = 1
		}
	}
}

# Naparaya has destroyed the Jade and is rewarded
long_character_event = {
	id = svampires.75001
	desc = EVTDESCsvampires75001
	picture = GFX_evt_cathay_rises
	is_triggered_only = yes
	only_playable = yes

	immediate = {
		log = "work event id = svampires.75001 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTAsvampires75001
		wealth = 200
		prestige = 400
		piety = 400
		if = {
			limit = {
				has_character_flag = shipped_shdroi
			}
			give_nickname = nick_the_rampant_tiger
			health = 1.5
			prestige = 1000
			piety = 500
		}
		location = {
			ROOT = {
				spawn_unit = {
					province = PREV
					troops = {
						war_elephants = {
							50 50
						}
					}
					earmark = cathay_army
					attrition = 0.5
					maintenance_multiplier = 0
					reinforces = yes
				}
			}
		}
		location = {
			ROOT = {
				spawn_unit = {
					province = PREV
					troops = {
						artillery = {
							750 750
						}
					}
					earmark = cathay_army
				}
			}
		}
		location = {
			ROOT = {
				spawn_unit = {
					province = PREV
					troops = {
						pikemen = {
							8500 8500
						}
					}
					earmark = cathay_army
					attrition = 0.5
					maintenance_multiplier = 0
					reinforces = yes
				}
			}
		}
		location = {
			ROOT = {
				spawn_unit = {
					province = PREV
					troops = {
						pikemen = {
							8500 8500
						}
					}
					earmark = cathay_army
					attrition = 0.5
					maintenance_multiplier = 0
					reinforces = yes
				}
			}
		}
		location = {
			ROOT = {
				spawn_unit = {
					province = PREV
					troops = {
						gunpowder = {
							3500 3500
						}
					}
					earmark = cathay_army
				}
			}
		}
		ai_chance = {
			factor = 1
		}
	}
}

# Sending Shdroi So'sou back to Cathay - Success
character_event = {
	id = svampires.76
	desc = EVTDESCsvampires76
	picture = GFX_evt_cathay_dragon
	is_triggered_only = yes
	only_playable = yes

	immediate = {
		log = "work event id = svampires.76 for [Root.GetBestName]"
		FROM = {
			death = {
				death_reason = death_murder_unknown
			}
		}
	}

	option = {
		name = EVTOPTAsvampires76
		set_character_flag = shipped_shdroi
		if = {
			limit = {
				OR = {
					has_dynasty_flag = relinked_naparaya_flag
					has_dynasty_flag = relinked_shashala_flag
				}
			}
			give_nickname = nick_the_rampant_tiger
			health = 1.5
			prestige = 1000
			piety = 500
		}
		ai_chance = {
			factor = 1
		}
	}
}

# Sending Shdroi So'sou back to Cathay - Failure
character_event = {
	id = svampires.76001
	desc = EVTDESCsvampires76001
	picture = GFX_evt_vampire_jade_hypnosis
	is_triggered_only = yes
	only_playable = yes

	immediate = {
		log = "work event id = svampires.76001 for [Root.GetBestName]"
		FROM = {
			prisoner = no
			add_rival = ROOT
			random_independent_ruler = {
				limit = {
					religion_group = PREV
				}
				PREV = {
					move_character = PREV
				}
			}
		}
	}

	option = {
		name = EVTOPTAsvampires76001
		prestige = -350
		piety = -350
		ai_chance = {
			factor = 1
		}
	}
}

# You've turned a Jade once too much - the Dragon Gods have forsaken you.
character_event = {
	id = svampires.77
	desc = EVTDESCsvampires77
	picture = GFX_evt_heavenly_dragon
	is_triggered_only = yes
	only_playable = yes

	immediate = {
		log = "work event id = svampires.77 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTAsvampires77
		prestige = -350
		piety = -350
		religion = vampiric
		any_child = {
			limit = {
				trait = vampire_jade_visible
			}
			religion = vampiric
		}
		ai_chance = {
			factor = 1
		}
	}
}

# The Spider god is angry at you for attacking him!
character_event = {
	id = svampires.78
	desc = EVTDESCsvampires78
	picture = "GFX_evt_giant_spider"
	is_triggered_only = yes
	only_playable = yes

	immediate = {
		log = "work event id = svampires.78 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTAsvampires78
		prestige = -50
		FROM = {
			opinion = {
				who = ROOT modifier = opinion_scared_goblins months = 24
			}
		}
		any_war = {
			limit = {
				defender = {
					character = FROM
				}
			}
			end_war = invalid
		}
		FROM = {
			character_event = {
				id = svampires.78001 days = 1 random = 5
			}
		}
		ai_chance = {
			factor = 50
		}
	}

	option = {
		name = EVTOPTBsvampires78
		piety = -350
		FROM = {
			character_event = {
				id = svampires.78002 days = 1 random = 5
			}
		}
		ai_chance = {
			factor = 50
			modifier = {
				factor = 0
				lower_tier_than = EMPEROR

			}
		}
	}
}

character_event = {
	id = svampires.78001
	desc = EVTDESCsvampires78001
	picture = GFX_evt_goblin_shaman
	is_triggered_only = yes
	only_playable = yes

	immediate = {
		log = "work event id = svampires.78001 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTAsvampires78001
		ai_chance = {
			factor = 1
		}
	}
}

character_event = {
	id = svampires.78002
	desc = EVTDESCsvampires78002
	picture = GFX_evt_goblin_shaman
	is_triggered_only = yes
	only_playable = yes

	immediate = {
		log = "work event id = svampires.78002 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTAsvampires78002
		ai_chance = {
			factor = 1
		}
	}
}

# Mahtmasi Kiss
# Success - Victim
character_event = {
	id = svampires.79
	desc = EVTDESCsvampires79
	picture = GFX_evt_mahtmasi_kiss
	is_triggered_only = yes

	immediate = {
		log = "work event id = svampires.79 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTAsvampires79
		remove_trait = incapable
		ai_chance = {
			factor = 1
		}
	}
}

# Notify vampire
character_event = {
	id = svampires.79001
	desc = EVTDESCsvampires79001
	picture = GFX_evt_mahtmasi_kiss
	is_triggered_only = yes

	immediate = {
		log = "work event id = svampires.79001 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTAsvampires79001
		remove_trait = incapable
		ai_chance = {
			factor = 1
		}
	}
}

# Failure - Victim
character_event = {
	id = svampires.80
	desc = EVTDESCsvampires80
	picture = GFX_evt_mahtmasi_kiss
	is_triggered_only = yes

	immediate = {
		log = "work event id = svampires.80 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTAsvampires80
		if = {
			limit = {
				is_invincible_trigger = yes
			}
			antideath_effect = yes
			break = yes
		}
		death = {
			death_reason = death_accident
		}
		ai_chance = {
			factor = 1
		}
	}
}

# Notify vampire
character_event = {
	id = svampires.80001
	desc = EVTDESCsvampires80001
	picture = GFX_evt_mahtmasi_kiss
	is_triggered_only = yes

	immediate = {
		log = "work event id = svampires.80001 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTAsvampires80001
		remove_trait = incapable
		piety = -50
		random = {
			chance = 10
			add_trait = depressed
		}
		ai_chance = {
			factor = 1
		}
	}
}

# On Succession event - if holder of Shadowrealm is not a Mahtmasi, the whole thing crumbles.
character_event = {
	id = svampires.81
	desc = EVTDESCsvampires81
	picture = GFX_evt_wasai_explosion
	is_triggered_only = yes

	trigger = {
		FROM = {
			title = k_shadowrealm
		}
		NOT = {
			trait = vampire_mahtmasi_visible
		}
		NOT = {
			trait = lore_necromancy
		}
	}

	immediate = {
		log = "work event id = svampires.81 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTAsvampires81
		k_shadowrealm = {
			destroy_landed_title = THIS
		}
		religion_authority = {
			modifier = shadowgate_collapsed
			years = 3000
		}
		hidden_tooltip = {
			activate_title = {
				title = k_shadowrealm status = no
			}
			any_playable_ruler = {
				limit = {
					higher_tier_than = BARON
					religion_group = ormazd_gods_group
				}
				character_event = {
					id = svampires.81001 days = 5 random = 15
				}
			}
		}
		ai_chance = {
			factor = 1
		}
	}
}

# Other ormazdic rulers notified of the collapse
character_event = {
	id = svampires.81001
	desc = {
		text = EVTDESCAsvampires81001
		trigger = {
			NOT = {
				religion = shadowmen
			}
		}
	}
	desc = {
		text = EVTDESCBsvampires81001
		trigger = {
			religion = shadowmen
		}
	}
	picture = GFX_evt_wasai_explosion
	is_triggered_only = yes
	only_playable = yes

	immediate = {
		log = "work event id = svampires.81001 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTAsvampires81001
		trigger = {
			NOT = {
				religion = shadowmen
			}
		}
		piety = 150
		ai_chance = {
			factor = 1
		}
	}

	option = {
		name = EVTOPTBsvampires81001
		trigger = {
			religion = shadowmen
		}
		if = {
			limit = {
				NOT = {
					trait = vampire_mahtmasi_visible
				}
			}
			piety = 350
		}
		ai_chance = {
			factor = 40
		}
	}

	option = {
		name = EVTOPTCsvampires81001
		trigger = {
			religion = shadowmen
			NOT = {
				trait = vampire_mahtmasi_visible
			}
		}
		religion = akghan
		ai_chance = {
			factor = 60
		}
	}
}

# The Big Bokor has lost a war, his authority is challenged.
character_event = {
	id = svampires.82
	hide_window = yes
	is_triggered_only = yes

	trigger = {
		OR = {
			FROM = {
				has_landed_title = k_shadowrealm
			}
			ROOT = {
				has_landed_title = k_shadowrealm
			}
		}
		any_playable_ruler = {
			any_courtier = {
				has_minor_title = title_shadowman
			}
		}
	}
	only_playable = yes

	immediate = {
		log = "work event id = svampires.82 for [Root.GetBestName]"
		if = {
			limit = {
				FROM = {
					has_landed_title = k_shadowrealm
				}
			}
			FROM = {
				random_list = {
					10 = {
						character_event = {
							id = svampires.82001
						}
					}
					90 = {
						modifier = {
							factor = 0.75
							trait = cruel
						}
						modifier = {
							factor = 0.75
							trait = ambitious
						}
						modifier = {
							factor = 0.75
							trait = greedy
						}
						modifier = {
							factor = 0.75
							trait = wroth
						}
						modifier = {
							factor = 0.75
							trait = impaler
						}
						modifier = {
							factor = 0.75
							trait = lunatic_3
						}
					}

				}
			}

		}
		if = {
			limit = {
				ROOT = {
					has_landed_title = k_shadowrealm
				}
			}
			ROOT = {
				random_list = {
					20 = {
						character_event = {
							id = svampires.82001
						}
					}
					80 = {
						modifier = {
							factor = 0.75
							trait = cruel
						}
						modifier = {
							factor = 0.75
							trait = ambitious
						}
						modifier = {
							factor = 0.75
							trait = greedy
						}
						modifier = {
							factor = 0.75
							trait = wroth
						}
						modifier = {
							factor = 0.75
							trait = impaler
						}
						modifier = {
							factor = 0.75
							trait = lunatic_3
						}
					}

				}
			}

		}
	}
}

# Notify Big Bokor
character_event = {
	id = svampires.82001
	desc = EVTDESCsvampires82001
	picture = GFX_evt_mahtmasi_vampire
	is_triggered_only = yes
	only_playable = yes

	immediate = {
		log = "work event id = svampires.82001 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTAsvampires82001
		abdicate = yes
		ai_chance = {
			factor = 1
		}
	}
}

#  VOODOO plot

# STEALING PERSONAL BELONGING
# The plotter sees an opportunity
character_event = {
	id = svampires.83
	desc = EVTDESCsvampires.83
	picture = GFX_evt_whispers
	border = GFX_event_normal_frame_intrigue
	capable_only = yes
	prisoner = no
	is_triggered_only = yes

	trigger = {
		has_plot = plot_make_voodoo_doll
		plot_target_char = {
			age = 16
			prisoner = no
			at_location = ROOT # The Plot Head needs to be at the target's location to get a chance
			NOT = {
				trait = in_hiding
			}
			NOT = {
				trait = questing
			}
			NOT = {
				trait = blood_questing
			}
			NOT = {
				trait = monster_hunting
			}
		}
		NOT = {
			has_character_flag = murder_in_motion
		}
		plot_power_contribution =
		{
			plotter = ROOT
			power = 0.025
		}
	}

	weight_multiplier = {
		factor = 0.03003
		modifier = {
			factor = 1.43
			plot_power_contribution =
			{
				plotter = ROOT
				power = 0.10
			}
		}
		modifier = {
			factor = 1.43
			plot_power_contribution =
			{
				plotter = ROOT
				power = 0.20
			}
		}
		modifier = {
			factor = 1.43
			plot_power_contribution =
			{
				plotter = ROOT
				power = 0.30
			}
		}
		modifier = {
			factor = 1.43
			plot_power_contribution =
			{
				plotter = ROOT
				power = 0.40
			}
		}
		modifier = {
			factor = 1.43
			plot_power_contribution =
			{
				plotter = ROOT
				power = 0.50
			}
		}
		modifier = {
			factor = 1.43
			plot_power_contribution =
			{
				plotter = ROOT
				power = 0.60
			}
		}
		modifier = {
			factor = 1.43
			plot_power_contribution =
			{
				plotter = ROOT
				power = 0.70
			}
		}
		modifier = {
			factor = 1.43
			plot_power_contribution =
			{
				plotter = ROOT
				power = 0.80
			}
		}
		modifier = {
			factor = 1.43
			plot_power_contribution =
			{
				plotter = ROOT
				power = 0.90
			}
		}
		modifier = {
			factor = 1.43
			plot_power_contribution =
			{
				plotter = ROOT
				power = 1.5
			}
		}
		modifier = {
			factor = 3.03
			any_backed_character = {
				has_plot = plot_make_voodoo_doll
				plot_power = 1.0
			}
		}
		modifier = {
			factor = 3.03
			any_backed_character = {
				has_plot = plot_make_voodoo_doll
				plot_power = 1.5
			}
		}
		modifier = {
			factor = 3.03
			any_backed_character = {
				has_plot = plot_make_voodoo_doll
				plot_power = 2.0
			}
		}
		modifier = {
			factor = 0.67
			plot_target_char = {
				trait = creature_halfling
			}
		}
		modifier = {
			factor = 0.67
			plot_target_char = {
				trait = creature_dwarf
			}
		}
		modifier = {
			factor = 0.57
			plot_target_char = {
				trait = creature_elf
			}
		}
		modifier = {
			factor = 0.36
			plot_target_char = {
				trait = vampire_strigoi_visible
			}
		}
		modifier = {
			factor = 0.20
			plot_target_char = {
				trait = vampire_necrarch_visible
			}
		}
	}

	immediate = {
		log = "work event id = svampires.83 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTAsvampires.83 # The conspirators provide support
		trigger = {
			plot_power = 1.0
		}
		hidden_tooltip = {
			any_plot_backer = {
				character_event = {
					id = svampires.83012 days = 1
				}
			}
		}
		set_character_flag = murder_in_motion
		plot_target_char = {
			character_event = {
				id = svampires.83005 days = 30
			}
		}
	}

	option = {
		name = EVTOPTBsvampires.83 # Provide bribery
		trigger = {
			NOT = {
				plot_power = 0.5
			}
			NOT = {
				learning = 10
			}
		}
		scaled_wealth = -1.0
		hidden_tooltip = {
			any_plot_backer = {
				character_event = {
					id = svampires.83012 days = 1
				}
			}
		}
		set_character_flag = murder_in_motion
		plot_target_char = {
			character_event = {
				id = svampires.83005 days = 30
			}
		}
	}

	option = {
		name = EVTOPTBsvampires.83 # Provide bribery
		trigger = {
			plot_power = 0.5
			NOT = {
				plot_power = 1.0
			}
			NOT = {
				learning = 10
			}
		}
		scaled_wealth = -0.5
		hidden_tooltip = {
			any_plot_backer = {
				character_event = {
					id = svampires.83012 days = 1
				}
			}
		}
		set_character_flag = murder_in_motion
		plot_target_char = {
			character_event = {
				id = svampires.83005 days = 30
			}
		}
	}

	option = {
		name = EVTOPTCsvampires.83 # Offer tactical help
		tooltip_info = learning
		trigger = {
			plot_power = 0.5
			learning = 10
		}
		hidden_tooltip = {
			any_plot_backer = {
				character_event = {
					id = svampires.83012 days = 1
				}
			}
		}
		set_character_flag = murder_in_motion
		plot_target_char = {
			character_event = {
				id = svampires.83005 days = 30
			}
		}
	}

	option = {
		name = EVTOPTDsvampires.83 # I cannot afford this
		trigger = {
			ai = no
			NOT = {
				learning = 10
			}
			NOT = {
				plot_power = 1.0
			}
		}
	}
}

# A plot backer sees an opportunity
character_event = {
	id = svampires.83001
	desc = EVTDESCsvampires.83001
	picture = GFX_evt_whispers
	border = GFX_event_normal_frame_intrigue
	capable_only = yes
	prisoner = no
	is_triggered_only = yes

	trigger = {
		any_backed_character = {
			has_plot = plot_make_voodoo_doll
			plot_power = 0.5
			plot_target_char = {
				age = 16
				prisoner = no
				NOT = {
					trait = in_hiding
				}
				NOT = {
					trait = questing
				}
				NOT = {
					trait = blood_questing
				}
				NOT = {
					trait = monster_hunting
				}
			}
			NOT = {
				has_character_flag = murder_in_motion
			}
			ROOT = {
				plot_power_contribution =
				{
					plotter = PREV
					power = 0.025
				}
			}
		}
	}

	weight_multiplier = {
		factor = 0.05000
		modifier = {
			factor = 1.67
			any_backed_character = {
				has_plot = plot_make_voodoo_doll
				ROOT = {
					plot_power_contribution =
					{
						plotter = PREV
						power = 0.10
					}
				}
			}
		}
		modifier = {
			factor = 1.67
			any_backed_character = {
				has_plot = plot_make_voodoo_doll
				ROOT = {
					plot_power_contribution =
					{
						plotter = PREV
						power = 0.20
					}
				}
			}
		}
		modifier = {
			factor = 1.67
			any_backed_character = {
				has_plot = plot_make_voodoo_doll
				ROOT = {
					plot_power_contribution =
					{
						plotter = PREV
						power = 0.30
					}
				}
			}
		}
		modifier = {
			factor = 1.67
			any_backed_character = {
				has_plot = plot_make_voodoo_doll
				ROOT = {
					plot_power_contribution =
					{
						plotter = PREV
						power = 0.40
					}
				}
			}
		}
		modifier = {
			factor = 1.67
			any_backed_character = {
				has_plot = plot_make_voodoo_doll
				ROOT = {
					plot_power_contribution =
					{
						plotter = PREV
						power = 0.50
					}
				}
			}
		}
		modifier = {
			factor = 1.67
			any_backed_character = {
				has_plot = plot_make_voodoo_doll
				ROOT = {
					plot_power_contribution =
					{
						plotter = PREV
						power = 0.60
					}
				}
			}
		}
		modifier = {
			factor = 1.67
			any_backed_character = {
				has_plot = plot_make_voodoo_doll
				ROOT = {
					plot_power_contribution =
					{
						plotter = PREV
						power = 0.70
					}
				}
			}
		}
		modifier = {
			factor = 1.67
			any_backed_character = {
				has_plot = plot_make_voodoo_doll
				ROOT = {
					plot_power_contribution =
					{
						plotter = PREV
						power = 0.80
					}
				}
			}
		}
		modifier = {
			factor = 1.67
			any_backed_character = {
				has_plot = plot_make_voodoo_doll
				ROOT = {
					plot_power_contribution =
					{
						plotter = PREV
						power = 0.90
					}
				}
			}
		}
		modifier = {
			factor = 3.03
			any_backed_character = {
				has_plot = plot_make_voodoo_doll
				plot_power = 1.0
			}
		}
		modifier = {
			factor = 3.03
			any_backed_character = {
				has_plot = plot_make_voodoo_doll
				plot_power = 1.5
			}
		}
		modifier = {
			factor = 3.03
			any_backed_character = {
				has_plot = plot_make_voodoo_doll
				plot_power = 2.0
			}
		}
	}

	immediate = {
		log = "work event id = svampires.83001 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTAsvampires.83 # The conspirators provide the poison
		trigger = {
			any_backed_character = {
				has_plot = plot_make_voodoo_doll
				plot_power = 1.0
			}
		}
		random_backed_character = {
			limit = {
				has_plot = plot_make_voodoo_doll
				plot_power = 1.0
			}
			character_event = {
				id = svampires.83010 days = 3
			}
			set_character_flag = murder_in_motion
		}
	}

	option = {
		name = EVTOPTBsvampires.83001 # Ask the Plotter for funds
		trigger = {
			NOT = {
				learning = 10
			}
			NOT = {
				any_backed_character = {
					has_plot = plot_make_voodoo_doll
					plot_power = 1.0
				}
			}
		}
		random_backed_character = {
			limit = {
				has_plot = plot_make_voodoo_doll
				NOT = {
					plot_power = 1.0
				}
			}
			character_event = {
				id = svampires.83002 days = 3
			}
			set_character_flag = murder_in_motion
		}
	}

	option = {
		name = EVTOPTBsvampires.83001 # Provide funds
		trigger = {
			NOT = {
				learning = 10
			}
			NOT = {
				any_backed_character = {
					has_plot = plot_make_voodoo_doll
					plot_power = 1.0
				}
			}
		}
		scaled_wealth = -0.5
		random_backed_character = {
			limit = {
				has_plot = plot_make_voodoo_doll
				NOT = {
					plot_power = 1.0
				}
			}
			character_event = {
				id = svampires.83010 days = 3
			}
			set_character_flag = murder_in_motion
		}
	}

	option = {
		name = EVTOPTCsvampires.83 # Provide tactical help.
		tooltip_info = learning
		trigger = {
			learning = 10
			any_backed_character = {
				has_plot = plot_make_voodoo_doll
				plot_power = 0.5
			}
		}
		random_backed_character = {
			limit = {
				has_plot = plot_make_voodoo_doll
				plot_power = 0.5
			}
			character_event = {
				id = svampires.83010 days = 3
			}
			set_character_flag = murder_in_motion
		}
	}

	option = {
		name = EVTOPTDsvampires.83 # I cannot afford this
		trigger = {
			ai = no
			NOT = {
				learning = 10
			}
			NOT = {
				any_backed_character = {
					has_plot = plot_make_voodoo_doll
					plot_power = 1.0
				}
			}
		}
	}
}

# Plot backer requests funds
character_event = {
	id = svampires.83002
	desc = EVTDESCsvampires.83002
	picture = GFX_evt_spymaster
	border = GFX_event_normal_frame_intrigue
	is_triggered_only = yes

	immediate = {
		log = "work event id = svampires.83002 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTAsvampires.83002
		transfer_scaled_wealth = {
			from = ROOT
			to = FROM
			value = 1.0
		}
		FROM = {
			character_event = {
				id = svampires.83003
			}
		}
	}

	option = {
		name = EVTOPTBsvampires.83002
		FROM = {
			character_event = {
				id = svampires.83004
			}
		}
	}
}

# Plot backer receives funds
character_event = {
	id = svampires.83003
	desc = EVTDESCsvampires.83003
	picture = GFX_evt_spymaster
	border = GFX_event_normal_frame_intrigue
	is_triggered_only = yes

	immediate = {
		log = "work event id = svampires.83003 for [Root.GetBestName]"
	}

	option = {
		name = "EXCELLENT"
		FROM = {
			plot_target_char = {
				character_event = {
					id = svampires.83005 days = 27
				}
			}
		}
	}
}

# Plot backer does NOT receive funds
character_event = {
	id = svampires.83004
	desc = EVTDESCsvampires.83004
	picture = GFX_evt_spymaster
	border = GFX_event_normal_frame_intrigue
	is_triggered_only = yes

	immediate = {
		log = "work event id = svampires.83004 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTAsvampires.83004 # Pay for it myself
		scaled_wealth = -1.0
		FROM = {
			plot_target_char = {
				character_event = {
					id = svampires.83005 days = 27
				}
			}
		}
	}

	option = {
		name = EVTOPTBsvampires.83004 # Screw this
		clr_character_flag = murder_in_motion
	}
}

# The plot attempt
character_event = {
	id = svampires.83005
	desc = EVTDESCsvampires.83005
	picture = GFX_evt_feast
	border = GFX_event_normal_frame_intrigue
	hide_from = yes
	is_triggered_only = yes
	prisoner = no

	trigger = {
		# Is the plot still in motion?
		OR = {
			FROM = {
				has_plot = plot_make_voodoo_doll
				plot_target_char = {
					character = ROOT
				}
			}
			FROMFROM = {
				has_plot = plot_make_voodoo_doll
				plot_target_char = {
					character = ROOT
				}
			}
		}
	}

	immediate = {
		log = "work event id = svampires.83005 for [Root.GetBestName]"
		save_event_target_as = target_victim
	}

	option = {
		name = EVTOPTAsvampires.83005 # Does not notice weird behavior
		trigger = {
			NOT = {
				OR = {
					AND = {
						trait = paranoid
						random = 33
					}
					AND = {
						trait = deceitful
						random = 50
					}
					AND = {
						religion = shadowmen	# Knows the danger
						random = 60
					}
					AND = {
						religion = akghan	# Knows the danger
						random = 60
					}
					AND = {
						trait = trusting
						random = 90
					}
					AND = {
						NOT = {
							trait = paranoid
						}
						NOT = {
							trait = trusting
						}
						NOT = {
							trait = deceitful
						}
						NOT = {
							religion = shadowmen
						}
						NOT = {
							religion = akghan
						}
						random = 75
					}
				}
			}
		}
		hidden_tooltip = {
			random_list = {
				25 = {
					modifier = {
						factor = 0
						FROM = {
							has_character_flag = using_shadow_plot
						}
					}
					hidden_tooltip = {
						FROM = {
							character_event = {
								id = svampires.83013 days = 1
							}
						}
						if = {
							limit = {
								FROMFROM = {
									NOT = {
										character = FROM
									}
								}
							}
							FROMFROM = {
								character_event = {
									id = svampires.83013 days = 1
								}
							}
						}
					}
					character_event = {
						id = svampires.83006 days = 1
					} # Object stolen, he notices
				}
				75 = {
					hidden_tooltip = {
						FROM = {
							character_event = {
								id = svampires.83014 days = 1
							}
						}
						if = {
							limit = {
								FROMFROM = {
									NOT = {
										character = FROM
									}
								}
							}
							FROMFROM = {
								character_event = {
									id = svampires.83014 days = 1
								}
							}
						}
					}
					character_event = {
						id = svampires.83007 days = 1
					} # Object stolen, he doesn't notices
				}
			}
		}
	}

	option = {
		name = EVTOPTBsvampires.83005 # Notices weird movement
		trigger = {
			OR = {
				AND = {
					trait = paranoid
					random = 33
				}
				AND = {
					trait = deceitful
					random = 50
				}
				AND = {
					religion = shadowmen	# Knows the danger
					random = 60
				}
				AND = {
					religion = akghan	# Knows the danger
					random = 60
				}
				AND = {
					trait = trusting
					random = 90
				}
				AND = {
					NOT = {
						trait = paranoid
					}
					NOT = {
						trait = trusting
					}
					NOT = {
						trait = deceitful
					}
					NOT = {
						religion = shadowmen
					}
					NOT = {
						religion = akghan
					}
					random = 75
				}
			}
		}
		hidden_tooltip = {
			random_list = {
				50 = {
					modifier = {
						factor = 0
						FROM = {
							has_character_flag = using_shadow_plot
						}
					}
					hidden_tooltip = {
						FROM = {
							character_event = {
								id = svampires.83015 days = 1
							}
						}
						if = {
							limit = {
								FROMFROM = {
									NOT = {
										character = FROM
									}
								}
							}
							FROMFROM = {
								character_event = {
									id = svampires.83015 days = 1
								}
							}
						}
					}
					character_event = {
						id = svampires.83008 days = 1
					} # Lives, plotter discovered
				}
				50 = {
					hidden_tooltip = {
						FROM = {
							character_event = {
								id = svampires.83016 days = 1
							}
						}
						if = {
							limit = {
								FROMFROM = {
									NOT = {
										character = FROM
									}
								}
							}
							FROMFROM = {
								character_event = {
									id = svampires.83016 days = 1
								}
							}
						}
					}
					character_event = {
						id = svampires.83009 days = 1
					} # Lives, plotter unknown
				}
			}
		}
	}
}

# Object stolen, plotters discovered
character_event = {
	id = svampires.83006
	desc = EVTDESCsvampires.83006
	picture = GFX_evt_death
	border = GFX_event_normal_frame_intrigue
	is_triggered_only = yes

	immediate = {
		log = "work event id = svampires.83006 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTAsvampires.83006
	}
}

# Object stolen, plotters NOT discovered
character_event = {
	id = svampires.83007
	desc = EVTDESCsvampires.83007
	picture = GFX_evt_death
	border = GFX_event_normal_frame_intrigue
	hide_from = yes
	is_triggered_only = yes

	immediate = {
		log = "work event id = svampires.83007 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTAsvampires.83007
	}
}

# Object NOT stolen, plotters discovered
character_event = {
	id = svampires.83008
	desc = EVTDESCsvampires.83008
	picture = GFX_evt_scandal
	border = GFX_event_normal_frame_intrigue
	is_triggered_only = yes

	immediate = {
		log = "work event id = svampires.83008 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTAsvampires.83008
	}
}

# Object NOT stolen, plotters NOT discovered
character_event = {
	id = svampires.83009
	desc = EVTDESCsvampires.83009
	picture = GFX_evt_scandal
	border = GFX_event_normal_frame_intrigue
	hide_from = yes
	is_triggered_only = yes

	immediate = {
		log = "work event id = svampires.83009 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTAsvampires.83009
	}
}

# Backer informs Plotter of plan
character_event = {
	id = svampires.83010
	desc = EVTDESCsvampires.83010
	picture = GFX_evt_whispers
	border = GFX_event_normal_frame_intrigue
	is_triggered_only = yes

	immediate = {
		log = "work event id = svampires.83010 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTAsvampires.83010
		FROM = {
			character_event = {
				id = svampires.83011
			}
		}
		hidden_tooltip = {
			any_plot_backer = {
				limit = {
					NOT = {
						character = FROM
					}
				}
				character_event = {
					id = svampires.83012 days = 1
				}
			}
		}
	}
}

# Plotter tells backer to go ahead
character_event = {
	id = svampires.83011
	desc = EVTDESCsvampires.83011
	picture = GFX_evt_whispers
	border = GFX_event_normal_frame_intrigue
	is_triggered_only = yes

	immediate = {
		log = "work event id = svampires.83011 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTAsvampires.83011
		FROM = {
			plot_target_char = {
				character_event = {
					id = svampires.83005 days = 27
				}
			}
		}
	}
}

# Initiator informs other plotter
character_event = {
	id = svampires.83012
	desc = EVTDESCsvampires.83012
	picture = GFX_evt_whispers
	border = GFX_event_normal_frame_intrigue
	is_triggered_only = yes

	immediate = {
		log = "work event id = svampires.83012 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTAsvampires.83012
	}
}

# Notification: Success, but discovered
character_event = {
	id = svampires.83013
	desc = EVTDESCsvampires.83013
	picture = GFX_evt_shadowy_cabal
	border = GFX_event_normal_frame_intrigue
	is_triggered_only = yes

	immediate = {
		log = "work event id = svampires.83013 for [Root.GetBestName]"
		character_event = {
			id = 10
		} # Consequences of discovery
		clear_event_target = target_victim
	}

	option = {
		name = EVTOPTAsvampires.83013
		if = {
			limit = {
				has_plot = plot_make_voodoo_doll
			}
			set_character_flag = voodoo_success_flag
			FROM = {
				character_event = {
					id = svampires.83017
				}
			}
		}
	}
}

# Notification: Success, and NOT discovered
character_event = {
	id = svampires.83014
	desc = EVTDESCsvampires.83014
	picture = GFX_evt_shadowy_cabal
	border = GFX_event_normal_frame_intrigue
	is_triggered_only = yes

	immediate = {
		log = "work event id = svampires.83014 for [Root.GetBestName]"
		clear_event_target = target_victim
	}

	option = {
		name = EVTOPTAsvampires.83014
		if = {
			limit = {
				has_plot = plot_make_voodoo_doll
			}
			set_character_flag = voodoo_success_flag
			FROM = {
				character_event = {
					id = svampires.83017
				}
			}
		}
	}
}

# Notification: Failure, and discovered
character_event = {
	id = svampires.83015
	desc = EVTDESCsvampires.83015
	picture = GFX_evt_shadowy_cabal
	border = GFX_event_normal_frame_intrigue
	is_triggered_only = yes

	immediate = {
		log = "work event id = svampires.83015 for [Root.GetBestName]"
		character_event = {
			id = 11
		} # Consequences of discovery
		clear_event_target = target_victim
		if = {
			limit = {
				plot_target_char = {
					character = FROM
				}
				has_plot = plot_make_voodoo_doll
			}
			reveal_plot = yes
		}
	}

	option = {
		name = EVTOPTAsvampires.83015
		if = {
			limit = {
				plot_target_char = {
					character = FROM
				}
				has_plot = plot_make_voodoo_doll
			}
			clr_character_flag = murder_in_motion
			tooltip = {
				reveal_plot = yes
			}
		}
	}
}

# Notification: Failure, but NOT discovered
character_event = {
	id = svampires.83016
	desc = EVTDESCsvampires.83016
	picture = GFX_evt_shadowy_cabal
	border = GFX_event_normal_frame_intrigue
	is_triggered_only = yes

	immediate = {
		log = "work event id = svampires.83016 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTAsvampires.83016
		if = {
			limit = {
				plot_target_char = {
					character = FROM
				}
				has_plot = plot_make_voodoo_doll
			}
			clr_character_flag = murder_in_motion
		}
	}
}

# VOODOO CURSES
# pinging to target
character_event = {
	id = svampires.83017
	hide_window = yes
	is_triggered_only = yes

	immediate = {
		log = "work event id = svampires.83017 for [Root.GetBestName]"
		FROM = {
			plot_succeeds = yes
			character_event = {
				id = svampires.84
			}
		}
	}
}

# FROM is the target
character_event = {
	id = svampires.84
	desc = EVTDESCsvampires84
	picture = GFX_evt_voodoo_shaman
	border = GFX_event_normal_frame_intrigue
	is_triggered_only = yes

	immediate = {
		log = "work event id = svampires.84 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTAsvampires84
		FROM = {
			character_event = {
				id = svampires.84001
			}
		}
	}
}

# Pinging event
character_event = {
	id = svampires.84001
	hide_window = yes
	is_triggered_only = yes

	immediate = {
		log = "work event id = svampires.84001 for [Root.GetBestName]"
		FROM = {
			character_event = {
				id = svampires.84002
			}
		}
	}
}

# First choice menu
# FROM is the target
character_event = {
	id = svampires.84002
	desc = EVTDESCsvampires84002
	picture = GFX_evt_voodoo_shaman
	border = GFX_event_normal_frame_intrigue
	is_triggered_only = yes
	# Curse him and all his lands (tier 4)
	# Curse his lands (tier 2)

	# Curse him (tier 1)
	immediate = {
		log = "work event id = svampires.84002 for [Root.GetBestName]"
		clr_character_flag = voodoo_success_flag
	}

	option = {
		name = EVTOPTAsvampires84002
		trigger = {
			OR = {
				trait = vampire_mahtmasi_visible
				has_character_modifier = magic_power_4
			}
		}
		FROM = {
			character_event = {
				id = svampires.85 days = 2 random = 5
			}
		}
		ai_chance = {
			factor = 100
		}
	}

	option = {
		name = EVTOPTBsvampires84002
		trigger = {
			OR = {
				trait = vampire_mahtmasi_visible
				has_character_modifier = magic_power_2
				has_character_modifier = magic_power_3
				has_character_modifier = magic_power_4
			}
		}
		FROM = {
			character_event = {
				id = svampires.86 days = 2 random = 5
			}
		}
		ai_chance = {
			factor = 50
		}
	}

	option = {
		name = EVTOPTCsvampires84002
		trigger = {
			OR = {
				trait = vampire_mahtmasi_visible
				wh_is_mage_trigger = yes
			}
		}
		FROM = {
			character_event = {
				id = svampires.87 days = 2 random = 5
			}
		}
		ai_chance = {
			factor = 1
		}
	}

	option = {
		# Changed my mind
		name = EVTOPTDsvampires84002
		ai_chance = {
			factor = 0
		}
	}
}

# Cursed man and his lands
character_event = {
	id = svampires.85
	desc = EVTDESCsvampires85
	picture = GFX_evt_bad_news
	border = GFX_event_normal_frame_intrigue
	hide_from = yes
	is_triggered_only = yes

	immediate = {
		log = "work event id = svampires.85 for [Root.GetBestName]"
		if = {
			limit = {
				NOT = {
					has_dlc = "Reapers"
				}
			}
			add_trait = ill
		}
		if = {
			limit = {
				has_dlc = "Reapers"
			}
			add_symptom_effect = yes
		}
		capital_scope = {
			add_province_modifier = {
				name = cursed_lands duration = 465
				stacking = yes
			}
		}
	}

	option = {
		name = EVTOPTAsvampires85
		trigger = {
			OR = {
				is_vampire_trigger = yes
				wh_is_mage_trigger = yes
			}
		}
		hidden_tooltip = {
			random_list = {
				75 = {
					FROM = {
						character_event = {
							id = svampires.85001
						}
					} # broke enchantment

				}
				25 = {
					FROM = {
						character_event = {
							id = svampires.85002
						}
					} # failed to break enchantment
					modifier = {
						factor = 0.95
						trait = magic_potential_2
					}
					modifier = {
						factor = 0.85
						trait = magic_potential_3
					}
					modifier = {
						factor = 0.75
						trait = magic_potential_4
					}
					modifier = {
						factor = 0.75
						is_vampire_trigger = yes
					}
					modifier = {
						factor = 0.75
						trait = vampire_necrarch_visible
					}
					modifier = {
						factor = 0.75
						trait = lore_heavens
						trait = vampire_jade_visible
					}
					modifier = {
						factor = 1.5
						has_character_modifier = magic_power_1
					}
					modifier = {
						factor = 1.15
						has_character_modifier = magic_power_2
					}
					modifier = {
						factor = 0.85
						has_character_modifier = magic_power_3
					}
					modifier = {
						factor = 0.5
						has_character_modifier = magic_power_4
					}
					modifier = {
						factor = 1.5
						trait = hedge_wizard
					}
				}

			}
		}
	}

	option = {
		name = EVTOPTBsvampires85
		hidden_tooltip = {
			FROM = {
				character_event = {
					id = svampires.85002
				}
			}
		}
	}
}

# Notify witch-doctor of counteraction
character_event = {
	id = svampires.85001
	desc = EVTDESCsvampires85001
	picture = GFX_evt_voodoo_shaman
	border = GFX_event_normal_frame_intrigue
	is_triggered_only = yes

	immediate = {
		log = "work event id = svampires.85001 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTAsvampires85001
		piety = -150
		FROM = {
			remove_trait = ill
			capital_scope = {
				remove_province_modifier = cursed_lands
			}
		}
		FROM = {
			character_event = {
				id = svampires.85003 days = 5 random = 14
			}
		}
	}
}

# Cursing the man and the lands - Continuation
character_event = {
	id = svampires.85002
	desc = EVTDESCsvampires85002
	picture = GFX_evt_voodoo_shaman
	border = GFX_event_normal_frame_intrigue
	is_triggered_only = yes

	immediate = {
		log = "work event id = svampires.85002 for [Root.GetBestName]"
	}

	option = {
		# Spread discontent and darkness
		name = EVTOPTAsvampires85002
		FROM = {
			character_event = {
				id = svampires.85100 days = 5 random = 14
			}
		}
		ai_chance = {
			factor = 50
		}
	}

	option = {
		# Send the locusts
		name = EVTOPTBsvampires85002
		FROM = {
			character_event = {
				id = svampires.85200 days = 5 random = 14
			}
		}
		ai_chance = {
			factor = 50
		}
	}
}

# Notify victim that the spell has been broken
character_event = {
	id = svampires.85003
	desc = EVTDESCsvampires85003
	picture = GFX_evt_voodoo_shaman
	border = GFX_event_normal_frame_intrigue
	hide_from = yes
	is_triggered_only = yes

	immediate = {
		log = "work event id = svampires.85003 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTAsvampires85003
		piety = 150
	}
}

# A darkness spreads across the lands I
character_event = {
	id = svampires.85100
	desc = EVTDESCsvampires85100
	picture = GFX_evt_bad_news
	border = GFX_event_normal_frame_intrigue
	hide_from = yes
	is_triggered_only = yes
	immediate = {
		log = "work event id = svampires.85100 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTAsvampires85100
		add_trait = stressed
		random_list = {
			20 = {
				add_trait = wounded
			}
			10 = {
				add_trait = pneumonic
			}
			70 = {
			}
		}
		any_realm_province = {
			limit = {
				owner = {
					character = ROOT
				}
				NOT = {
					culture = nehekharan
				}
			}
			add_province_modifier = {
				name = cursed_lands duration = 720
				stacking = yes
			}
		}
		hidden_tooltip = {
			FROM = {
				character_event = {
					id = svampires.85101 days = 5 random = 14
				}
			}
		}
	}
}

# Voodoo - continue to spread darkness
character_event = {
	id = svampires.85101
	desc = EVTDESCsvampires85101
	picture = GFX_evt_voodoo_shaman
	border = GFX_event_normal_frame_intrigue
	is_triggered_only = yes
	immediate = {
		log = "work event id = svampires.85101 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTAsvampires85101
		FROM = {
			character_event = {
				id = svampires.85102 days = 15 random = 24
			}
		}
		ai_chance = {
			factor = 90
		}
	}
	option = {
		# Enough
		name = EVTOPTBsvampires85101
		ai_chance = {
			factor = 10
			modifier = {
				factor = 5
				FROM = {
					religion = shadowmen
				}
			}
		}
	}
}

# A darkness spreads across the lands II
character_event = {
	id = svampires.85102
	desc = EVTDESCsvampires85102
	picture = GFX_evt_bad_news
	border = GFX_event_normal_frame_intrigue
	hide_from = yes
	is_triggered_only = yes
	immediate = {
		log = "work event id = svampires.85102 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTAsvampires85102
		if = {
			limit = {
				NOT = {
					trait = depressed
				}
			}
			add_trait = depressed
		}
		random_list = {
			20 = {
				add_trait = maimed
			}
			10 = {
				add_trait = blinded
			}
			70 = {
			}
		}
		any_courtier = {
			opinion = {
				who = ROOT modifier = opinion_cursed months = 24
			}
		}
		any_realm_province = {
			limit = {
				owner = {
					character = ROOT
				}
				NOT = {
					culture = nehekharan
				}
			}
			add_province_modifier = {
				name = cursed_lands duration = 200
				stacking = yes
			}
		}
		hidden_tooltip = {
			FROM = {
				character_event = {
					id = svampires.85103 days = 5 random = 14
				}
			}
		}
	}
}

# Voodoo - continue to spread darkness
character_event = {
	id = svampires.85103
	desc = EVTDESCsvampires85103
	picture = GFX_evt_voodoo_shaman
	border = GFX_event_normal_frame_intrigue
	is_triggered_only = yes
	immediate = {
		log = "work event id = svampires.85103 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTAsvampires85103
		FROM = {
			character_event = {
				id = svampires.85104 days = 50 random = 50
			}
		}
		ai_chance = {
			factor = 50
		}
	}
	option = {
		# Enough
		name = EVTOPTBsvampires85103
		ai_chance = {
			factor = 50
			modifier = {
				factor = 1.5
				FROM = {
					religion = shadowmen
				}
			}
		}
	}
}

# A darkness spreads across the lands III
character_event = {
	id = svampires.85104
	desc = EVTDESCsvampires85104
	picture = GFX_evt_bad_news
	border = GFX_event_normal_frame_intrigue
	hide_from = yes
	is_triggered_only = yes
	immediate = {
		log = "work event id = svampires.85104 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTAsvampires85104
		if = {
			limit = {
				NOT = {
					trait = depressed
				}
			}
			add_trait = depressed
		}
		random_list = {
			20 = {
				add_trait = incapable
			}
			10 = {
				if = {
					limit = {
						is_invincible_trigger = yes
					}
					antideath_effect = yes
					break = yes
				}
				death = {
					death_reason = death_murder_unknown
				}
			}
			70 = {
			}
		}
		if = {
			limit = {
				any_child = {
					is_ruler = no
					is_invincible_trigger = no
					NOT = {
						age = 20
					}
				}
			}
			random_child = {
				limit = {
					is_ruler = no
					is_invincible_trigger = no
					NOT = {
						age = 20
					}
				}
				death = {
					death_reason = death_murder_unknown
				}
			}
		}
		if = {
			limit = {
				any_spouse = {
					is_ruler = no
					is_invincible_trigger = no
					is_vampire_trigger = no
				}
			}
			random_spouse = {
				limit = {
					is_ruler = no
					is_invincible_trigger = no
					is_vampire_trigger = no
				}
				death = {
					death_reason = death_murder_unknown
				}
			}
		}
		any_vassal = {
			opinion = {
				who = ROOT modifier = opinion_cursed months = 24
			}
			capital_scope = {
				add_province_modifier = {
					name = cursed_lands duration = 40
					stacking = yes
				}
			}
		}
		any_realm_province = {
			limit = {
				owner = {
					character = ROOT
				}
				NOT = {
					culture = nehekharan
				}
			}
			add_province_modifier = {
				name = cursed_lands duration = 80
				stacking = yes
			}
		}
		hidden_tooltip = {
			FROM = {
				character_event = {
					id = svampires.85103 days = 5 random = 14
				}
			}
		}
	}
}

# The locusts come
character_event = {
	id = svampires.85200
	desc = EVTDESCsvampires85200
	picture = GFX_evt_locust_plague
	border = GFX_event_normal_frame_intrigue
	hide_from = yes
	is_triggered_only = yes
	immediate = {
		log = "work event id = svampires.85200 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTAsvampires85200
		add_trait = stressed
		random_list = {
			20 = {
				add_trait = wounded
			}
			10 = {
				add_trait = maimed
			}
			70 = {
			}
		}
		any_realm_province = {
			limit = {
				owner = {
					character = ROOT
				}
				NOT = {
					culture = nehekharan
				}
			}
			add_province_modifier = {
				name = locust_plague duration = 320
				stacking = yes
			}
		}
		hidden_tooltip = {
			FROM = {
				character_event = {
					id = svampires.85201 days = 5 random = 14
				}
			}
		}
	}
}

# Voodoo - continue to spread the plague
character_event = {
	id = svampires.85201
	desc = EVTDESCsvampires85201
	picture = GFX_evt_voodoo_shaman
	border = GFX_event_normal_frame_intrigue
	is_triggered_only = yes
	immediate = {
		log = "work event id = svampires.85201 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTAsvampires85201
		FROM = {
			character_event = {
				id = svampires.85202 days = 15 random = 24
			}
		}
		ai_chance = {
			factor = 90
		}
	}
	option = {
		# Enough
		name = EVTOPTBsvampires85201
		ai_chance = {
			factor = 10
			modifier = {
				factor = 5
				FROM = {
					religion = shadowmen
				}
			}
		}
	}
}

# The locusts come II
character_event = {
	id = svampires.85202
	desc = EVTDESCsvampires85202
	picture = GFX_evt_locust_plague
	border = GFX_event_normal_frame_intrigue
	hide_from = yes
	is_triggered_only = yes
	immediate = {
		log = "work event id = svampires.85202 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTAsvampires85202
		if = {
			limit = {
				NOT = {
					trait = depressed
				}
			}
			add_trait = depressed
		}
		random_list = {
			20 = {
				add_trait = maimed
			}
			10 = {
				add_trait = blinded
			}
			70 = {
			}
		}
		any_realm_province = {
			limit = {
				owner = {
					character = ROOT
				}
				NOT = {
					culture = nehekharan
				}
			}
			add_province_modifier = {
				name = locust_plague duration = 100
				stacking = yes
			}
		}
		hidden_tooltip = {
			FROM = {
				character_event = {
					id = svampires.85203 days = 5 random = 14
				}
			}
		}
	}
}

# Voodoo - continue to spread locust plague
character_event = {
	id = svampires.85203
	desc = EVTDESCsvampires85203
	picture = GFX_evt_voodoo_shaman
	border = GFX_event_normal_frame_intrigue
	is_triggered_only = yes
	immediate = {
		log = "work event id = svampires.85203 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTAsvampires85203
		FROM = {
			character_event = {
				id = svampires.85204 days = 50 random = 50
			}
		}
		ai_chance = {
			factor = 50
		}
	}
	option = {
		# Enough
		name = EVTOPTBsvampires85203
		ai_chance = {
			factor = 50
			modifier = {
				factor = 1.5
				FROM = {
					religion = shadowmen
				}
			}
		}
	}
}

# The locusts come III
character_event = {
	id = svampires.85204
	desc = EVTDESCsvampires85204
	picture = GFX_evt_locust_plague
	border = GFX_event_normal_frame_intrigue
	hide_from = yes
	is_triggered_only = yes
	immediate = {
		log = "work event id = svampires.85204 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTAsvampires85204
		capital_scope = {
			capital_holding = {
				destroy_random_building = yes
			}
		}
		if = {
			limit = {
				NOT = {
					trait = depressed
				}
			}
			add_trait = depressed
		}
		random_list = {
			20 = {
				add_trait = incapable
			}
			10 = {
				if = {
					limit = {
						is_invincible_trigger = yes
					}
					antideath_effect = yes
					break = yes
				}
				death = {
					death_reason = death_murder_unknown
				}
			}
			70 = {
			}
		}
		if = {
			limit = {
				any_child = {
					is_ruler = no
					is_invincible_trigger = no
					NOT = {
						age = 20
					}
				}
			}
			random_child = {
				limit = {
					is_ruler = no
					is_invincible_trigger = no
					NOT = {
						age = 20
					}
				}
				death = {
					death_reason = death_murder_unknown
				}
			}
		}
		if = {
			limit = {
				any_spouse = {
					is_ruler = no
					is_invincible_trigger = no
					is_vampire_trigger = no
				}
			}
			random_spouse = {
				limit = {
					is_ruler = no
					is_invincible_trigger = no
					is_vampire_trigger = no
				}
				death = {
					death_reason = death_murder_unknown
				}
			}
		}
		any_vassal = {
			opinion = {
				who = ROOT modifier = opinion_cursed months = 1
			}
			capital_scope = {
				add_province_modifier = {
					name = locust_plague duration = 40
					stacking = yes
				}
			}
		}
		any_realm_province = {
			limit = {
				owner = {
					character = ROOT
				}
				NOT = {
					culture = nehekharan
				}
			}
			add_province_modifier = {
				name = locust_plague duration = 80
				stacking = yes
			}
		}
		hidden_tooltip = {
			FROM = {
				character_event = {
					id = svampires.85203 days = 5 random = 14
				}
			}
		}
	}
}

# Cursed his lands
character_event = {
	id = svampires.86
	desc = EVTDESCsvampires86
	picture = GFX_evt_bad_news
	border = GFX_event_normal_frame_intrigue
	hide_from = yes
	is_triggered_only = yes
	immediate = {
		log = "work event id = svampires.86 for [Root.GetBestName]"
		capital_scope = {
			add_province_modifier = {
				name = cursed_lands duration = 465
				stacking = yes
			}
		}
	}
	option = {
		name = EVTOPTAsvampires86

		trigger = {
			OR = {
				is_vampire_trigger = yes
				wh_is_mage_trigger = yes
			}
		}
		hidden_tooltip = {
			random_list = {
				75 = {
					FROM = {
						character_event = {
							id = svampires.85001
						}
					} # broke enchantment

				}
				25 = {
					FROM = {
						character_event = {
							id = svampires.86002
						}
					} # failed to break enchantment
					modifier = {
						factor = 0.95
						trait = magic_potential_2
					}
					modifier = {
						factor = 0.85
						trait = magic_potential_3
					}
					modifier = {
						factor = 0.75
						trait = magic_potential_4
					}
					modifier = {
						factor = 0.75
						is_vampire_trigger = yes
					}
					modifier = {
						factor = 0.75
						trait = vampire_necrarch_visible
					}
					modifier = {
						factor = 0.75
						trait = lore_heavens
						trait = vampire_jade_visible
					}
					modifier = {
						factor = 1.5
						has_character_modifier = magic_power_1
					}
					modifier = {
						factor = 1.15
						has_character_modifier = magic_power_2
					}
					modifier = {
						factor = 0.85
						has_character_modifier = magic_power_3
					}
					modifier = {
						factor = 0.5
						has_character_modifier = magic_power_4
					}
					modifier = {
						factor = 1.5
						trait = hedge_wizard
					}
				}

			}
		}
	}
	option = {
		name = EVTOPTBsvampires86
		hidden_tooltip = {
			FROM = {
				character_event = {
					id = svampires.86002
				}
			}
		}
	}
}

# Cursing the lands - Continuation
character_event = {
	id = svampires.86002
	desc = EVTDESCsvampires86002
	picture = GFX_evt_voodoo_shaman
	border = GFX_event_normal_frame_intrigue
	is_triggered_only = yes
	immediate = {
		log = "work event id = svampires.86002 for [Root.GetBestName]"
	}

	option = {
		# Spread discontent and darkness
		name = EVTOPTAsvampires86002
		FROM = {
			character_event = {
				id = svampires.86100 days = 5 random = 14
			}
		}
		ai_chance = {
			factor = 50
		}
	}
	option = {
		# Spread a disease
		name = EVTOPTBsvampires86002
		FROM = {
			character_event = {
				id = svampires.86200 days = 5 random = 14
			}
		}
		ai_chance = {
			factor = 50
		}
	}
}

# A darkness spreads across the lands I
character_event = {
	id = svampires.86100
	desc = EVTDESCsvampires86100
	picture = GFX_evt_bad_news
	border = GFX_event_normal_frame_intrigue
	hide_from = yes
	is_triggered_only = yes
	immediate = {
		log = "work event id = svampires.86100 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTAsvampires86100
		random_list = {
			20 = {
				add_trait = stressed
			}
			10 = {
				add_trait = depressed
			}
			70 = {
			}
		}
		any_realm_province = {
			limit = {
				owner = {
					character = ROOT
				}
				NOT = {
					culture = nehekharan
				}
			}
			add_province_modifier = {
				name = cursed_lands duration = 250
				stacking = yes
			}
		}
		hidden_tooltip = {
			FROM = {
				character_event = {
					id = svampires.86101 days = 5 random = 14
				}
			}
		}
	}
}

# Voodoo - continue to spread darkness
character_event = {
	id = svampires.86101
	desc = EVTDESCsvampires86101
	picture = GFX_evt_voodoo_shaman
	border = GFX_event_normal_frame_intrigue
	is_triggered_only = yes
	immediate = {
		log = "work event id = svampires.86101 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTAsvampires86101
		FROM = {
			character_event = {
				id = svampires.86102 days = 15 random = 24
			}
		}
		ai_chance = {
			factor = 90
		}
	}
	option = {
		# Enough
		name = EVTOPTBsvampires86101
		ai_chance = {
			factor = 10
			modifier = {
				factor = 5
				FROM = {
					religion = shadowmen
				}
			}
		}
	}
}

# A darkness spreads across the lands II
character_event = {
	id = svampires.86102
	desc = EVTDESCsvampires86102
	picture = GFX_evt_bad_news
	border = GFX_event_normal_frame_intrigue
	hide_from = yes
	is_triggered_only = yes
	immediate = {
		log = "work event id = svampires.86102 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTAsvampires86102
		any_courtier = {
			opinion = {
				who = ROOT modifier = opinion_cursed months = 5
			}
		}
		any_realm_province = {
			limit = {
				owner = {
					character = ROOT
				}
				NOT = {
					culture = nehekharan
				}
			}
			add_province_modifier = {
				name = cursed_lands duration = 200
				stacking = yes
			}
		}
		hidden_tooltip = {
			FROM = {
				character_event = {
					id = svampires.86103 days = 5 random = 14
				}
			}
		}
	}
}

# Voodoo - continue to spread darkness
character_event = {
	id = svampires.86103
	desc = EVTDESCsvampires86103
	picture = GFX_evt_voodoo_shaman
	border = GFX_event_normal_frame_intrigue
	is_triggered_only = yes
	immediate = {
		log = "work event id = svampires.86103 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTAsvampires86103
		FROM = {
			character_event = {
				id = svampires.86104 days = 50 random = 50
			}
		}
		ai_chance = {
			factor = 50
		}
	}
	option = {
		# Enough
		name = EVTOPTBsvampires86103
		ai_chance = {
			factor = 50
			modifier = {
				factor = 1.5
				FROM = {
					religion = shadowmen
				}
			}
		}
	}
}

# A darkness spreads across the lands III
character_event = {
	id = svampires.86104
	desc = EVTDESCsvampires86104
	picture = GFX_evt_bad_news
	border = GFX_event_normal_frame_intrigue
	hide_from = yes
	is_triggered_only = yes
	immediate = {
		log = "work event id = svampires.86104 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTAsvampires86104
		any_vassal = {
			opinion = {
				who = ROOT modifier = opinion_cursed months = 24
			}
			capital_scope = {
				add_province_modifier = {
					name = cursed_lands duration = 40
					stacking = yes
				}
			}
		}
		any_realm_province = {
			limit = {
				owner = {
					character = ROOT
				}
				NOT = {
					culture = nehekharan
				}
			}
			add_province_modifier = {
				name = cursed_lands duration = 80
				stacking = yes
			}
		}
		hidden_tooltip = {
			FROM = {
				character_event = {
					id = svampires.86103 days = 5 random = 14
				}
			}
		}
	}
}

# A disease spreads across the lands I
character_event = {
	id = svampires.86200
	desc = EVTDESCsvampires86200
	picture = GFX_evt_bad_news
	border = GFX_event_normal_frame_intrigue
	hide_from = yes
	is_triggered_only = yes
	immediate = {
		log = "work event id = svampires.86200 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTAsvampires86200
		random_list = {
			20 = {
				add_trait = stressed
			}
			10 = {
				add_trait = depressed
			}
			70 = {
			}
		}
		add_trait = pneumonic
		any_realm_province = {
			limit = {
				owner = {
					character = ROOT
				}
				NOT = {
					culture = nehekharan
				}
			}
			add_province_modifier = {
				name = cursed_lands duration = 50
				stacking = yes
			}
		}
		hidden_tooltip = {
			FROM = {
				character_event = {
					id = svampires.86201 days = 5 random = 14
				}
			}
		}
	}
}

# Voodoo - continue to spread disease
character_event = {
	id = svampires.86201
	desc = EVTDESCsvampires86201
	picture = GFX_evt_voodoo_shaman
	border = GFX_event_normal_frame_intrigue
	is_triggered_only = yes
	immediate = {
		log = "work event id = svampires.86201 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTAsvampires86201
		FROM = {
			character_event = {
				id = svampires.86202 days = 15 random = 24
			}
		}
		ai_chance = {
			factor = 90
		}
	}
	option = {
		# Enough
		name = EVTOPTBsvampires86201
		ai_chance = {
			factor = 10
			modifier = {
				factor = 5
				FROM = {
					religion = shadowmen
				}
			}
		}
	}
}

# A disease spreads across the lands II
character_event = {
	id = svampires.86202
	desc = EVTDESCsvampires86202
	picture = GFX_evt_bad_news
	border = GFX_event_normal_frame_intrigue
	hide_from = yes
	is_triggered_only = yes
	immediate = {
		log = "work event id = svampires.86202 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTAsvampires86202
		any_courtier = {
			random = {
				chance = 20
				add_trait = pneumonic
				opinion = {
					who = ROOT modifier = opinion_cursed months = 1
				}
			}
		}
		any_realm_province = {
			limit = {
				owner = {
					character = ROOT
				}
				NOT = {
					culture = nehekharan
				}
			}
			add_province_modifier = {
				name = cursed_lands duration = 200
				stacking = yes
			}
		}
		hidden_tooltip = {
			FROM = {
				character_event = {
					id = svampires.86203 days = 5 random = 14
				}
			}
		}
	}
}

# Voodoo - continue to spread disease
character_event = {
	id = svampires.86203
	desc = EVTDESCsvampires86203
	picture = GFX_evt_voodoo_shaman
	border = GFX_event_normal_frame_intrigue
	is_triggered_only = yes
	immediate = {
		log = "work event id = svampires.86203 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTAsvampires86203
		FROM = {
			character_event = {
				id = svampires.86204 days = 50 random = 50
			}
		}
		ai_chance = {
			factor = 50
		}
	}
	option = {
		# Enough
		name = EVTOPTBsvampires86203
		ai_chance = {
			factor = 50
			modifier = {
				factor = 1.5
				FROM = {
					religion = shadowmen
				}
			}
		}
	}
}

# A disease spreads across the lands III
character_event = {
	id = svampires.86204
	desc = EVTDESCsvampires86204
	picture = GFX_evt_bad_news
	border = GFX_event_normal_frame_intrigue
	hide_from = yes
	is_triggered_only = yes
	immediate = {
		log = "work event id = svampires.86204 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTAsvampires86204
		any_courtier = {
			random = {
				chance = 20
				add_trait = pneumonic
				opinion = {
					who = ROOT modifier = opinion_cursed months = 12
				}
			}
		}
		any_vassal = {
			random = {
				chance = 20
				add_trait = pneumonic
				opinion = {
					who = ROOT modifier = opinion_cursed months = 12
				}
			}
			capital_scope = {
				add_province_modifier = {
					name = cursed_lands duration = 40
					stacking = yes
				}
			}
		}
		any_realm_province = {
			limit = {
				owner = {
					character = ROOT
				}
				NOT = {
					culture = nehekharan
				}
			}
			add_province_modifier = {
				name = cursed_lands duration = 30
				stacking = yes
			}
		}
		hidden_tooltip = {
			FROM = {
				character_event = {
					id = svampires.86203 days = 5 random = 14
				}
			}
		}
	}
}

# Cursed him
character_event = {
	id = svampires.87
	desc = EVTDESCsvampires87
	picture = GFX_evt_bad_news
	border = GFX_event_normal_frame_intrigue
	hide_from = yes
	is_triggered_only = yes
	immediate = {
		log = "work event id = svampires.87 for [Root.GetBestName]"
		if = {
			limit = {
				NOT = {
					has_dlc = "Reapers"
				}
			}
			add_trait = ill
		}
		if = {
			limit = {
				has_dlc = "Reapers"
			}
			add_symptom_effect = yes
		}
	}
	option = {
		name = EVTOPTAsvampires87

		trigger = {
			OR = {
				is_vampire_trigger = yes
				wh_is_mage_trigger = yes
			}
		}
		hidden_tooltip = {
			random_list = {
				75 = {
					FROM = {
						character_event = {
							id = svampires.85001
						}
					} # broke enchantment

				}
				25 = {
					FROM = {
						character_event = {
							id = svampires.87002
						}
					} # failed to break enchantment
					modifier = {
						factor = 0.95
						trait = magic_potential_2
					}
					modifier = {
						factor = 0.85
						trait = magic_potential_3
					}
					modifier = {
						factor = 0.75
						trait = magic_potential_4
					}
					modifier = {
						factor = 0.75
						is_vampire_trigger = yes
					}
					modifier = {
						factor = 0.75
						trait = vampire_necrarch_visible
					}
					modifier = {
						factor = 0.75
						trait = lore_heavens
						trait = vampire_jade_visible
					}
					modifier = {
						factor = 1.5
						has_character_modifier = magic_power_1
					}
					modifier = {
						factor = 1.15
						has_character_modifier = magic_power_2
					}
					modifier = {
						factor = 0.85
						has_character_modifier = magic_power_3
					}
					modifier = {
						factor = 0.5
						has_character_modifier = magic_power_4
					}
					modifier = {
						factor = 1.5
						trait = hedge_wizard
					}
				}

			}
		}
	}
	option = {
		name = EVTOPTBsvampires87
		hidden_tooltip = {
			FROM = {
				character_event = {
					id = svampires.87002
				}
			}
		}
	}
}

# Cursing the man - Continuation
character_event = {
	id = svampires.87002
	desc = EVTDESCsvampires87002
	picture = GFX_evt_voodoo_shaman
	border = GFX_event_normal_frame_intrigue
	is_triggered_only = yes
	immediate = {
		log = "work event id = svampires.87002 for [Root.GetBestName]"
	}

	option = {
		# Pin the doll
		name = EVTOPTAsvampires87002
		FROM = {
			character_event = {
				id = svampires.87100 days = 5 random = 14
			}
		}
		ai_chance = {
			factor = 25
		}
	}
	option = {
		# Carve the doll's eyes
		name = EVTOPTBsvampires87002

		trigger = {
			FROM = {
				NOT = {
					trait = blinded
				}
			}
		}
		FROM = {
			character_event = {
				id = svampires.87200 days = 5 random = 14
			}
		}
		ai_chance = {
			factor = 25
		}
	}
	option = {
		# Squash the doll
		name = EVTOPTCsvampires87002
		FROM = {
			character_event = {
				id = svampires.87300 days = 5 random = 14
			}
		}
		ai_chance = {
			factor = 25
		}
	}
	option = {
		# More
		name = EVTOPTDsvampires87002
		FROM = {
			character_event = {
				id = svampires.87003
			}
		}
		ai_chance = {
			factor = 25
		}
	}
}

# Pinging event
character_event = {
	id = svampires.87003
	hide_window = yes
	is_triggered_only = yes
	immediate = {
		log = "work event id = svampires.87003 for [Root.GetBestName]"
		FROM = {
			character_event = {
				id = svampires.87004
			}
		}
	}
}

# Cursing the man - Continuation II
character_event = {
	id = svampires.87004
	desc = EVTDESCsvampires87004
	picture = GFX_evt_voodoo_shaman
	border = GFX_event_normal_frame_intrigue
	is_triggered_only = yes
	immediate = {
		log = "work event id = svampires.87004 for [Root.GetBestName]"
	}

	option = {
		# Cut the doll's tiny bits
		name = EVTOPTAsvampires87004

		trigger = {
			FROM = {
				NOR = {
					trait = eunuch
					trait = infertile
				}
			}
		}
		FROM = {
			character_event = {
				id = svampires.87400 days = 5 random = 14
			}
		}
		ai_chance = {
			factor = 25
		}
	}
	option = {
		# Boil the doll's head
		name = EVTOPTBsvampires87004
		FROM = {
			character_event = {
				id = svampires.87500 days = 5 random = 14
			}
		}
		ai_chance = {
			factor = 25
		}
	}
	option = {
		# Bind the doll's heart
		name = EVTOPTCsvampires87004

		trigger = {
			FROM = {
				OR = {
					has_lover = yes
					any_friend = {
						is_alive = yes
					}
					is_married = yes
				}
			}
		}
		FROM = {
			character_event = {
				id = svampires.87600 days = 5 random = 14
			}
		}
		ai_chance = {
			factor = 25
		}
	}
	option = {
		# Back to previous
		name = EVTOPTDsvampires87004
		FROM = {
			character_event = {
				id = svampires.87005
			}
		}
		ai_chance = {
			factor = 25
		}
	}
}

# Pinging event
character_event = {
	id = svampires.87005
	hide_window = yes
	is_triggered_only = yes
	immediate = {
		log = "work event id = svampires.87005 for [Root.GetBestName]"
		FROM = {
			character_event = {
				id = svampires.87002
			}
		}
	}
}

# Pinning the doll
character_event = {
	id = svampires.87100
	desc = EVTDESCsvampires87100
	picture = GFX_evt_bad_news
	border = GFX_event_normal_frame_intrigue
	hide_from = yes
	is_triggered_only = yes
	immediate = {
		log = "work event id = svampires.87100 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTAsvampires87100
		if = {
			limit = {
				NOR = {
					trait = wounded
					trait = maimed
					trait = incapable
				}
			}
			add_trait = wounded
		}
		if = {
			limit = {
				trait = wounded
				NOR = {
					trait = maimed
					trait = incapable
				}
			}
			add_trait = maimed
		}
		if = {
			limit = {
				trait = maimed
				NOT = {
					trait = incapable
				}
			}
			add_trait = incapable
		}
		if = {
			limit = {
				trait = incapable
				is_invincible_trigger = no
			}
			death = {
				death_reason = death_murder_unknown
			}
		}
		hidden_tooltip = {
			FROM = {
				character_event = {
					id = svampires.87101 days = 5 random = 14
				}
			}
		}
	}
}

# Pinned the doll - What next?
character_event = {
	id = svampires.87101
	desc = EVTDESCsvampires87101
	picture = GFX_evt_voodoo_shaman
	border = GFX_event_normal_frame_intrigue
	is_triggered_only = yes
	immediate = {
		log = "work event id = svampires.87101 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTAsvampires87101
		FROM = {
			character_event = {
				id = svampires.87003
			}
		}
		ai_chance = {
			factor = 50
		}
	}
	option = {
		# Enough
		name = EVTOPTBsvampires87101
		ai_chance = {
			factor = 50
			modifier = {
				factor = 1.5
				FROM = {
					religion = shadowmen
				}
			}
		}
	}
}

# Carve the doll's eyes
character_event = {
	id = svampires.87200
	desc = EVTDESCsvampires87200
	picture = GFX_evt_bad_news
	border = GFX_event_normal_frame_intrigue
	hide_from = yes
	is_triggered_only = yes
	immediate = {
		log = "work event id = svampires.87200 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTAsvampires87200
		add_trait = blinded
		hidden_tooltip = {
			FROM = {
				character_event = {
					id = svampires.87201 days = 5 random = 14
				}
			}
		}
	}
}

# Carved the doll's eyes - What next?
character_event = {
	id = svampires.87201
	desc = EVTDESCsvampires87201
	picture = GFX_evt_voodoo_shaman
	border = GFX_event_normal_frame_intrigue
	is_triggered_only = yes
	immediate = {
		log = "work event id = svampires.87201 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTAsvampires87201
		FROM = {
			character_event = {
				id = svampires.87003
			}
		}
		ai_chance = {
			factor = 50
		}
	}
	option = {
		# Enough
		name = EVTOPTBsvampires87201
		ai_chance = {
			factor = 50
			modifier = {
				factor = 1.5
				FROM = {
					religion = shadowmen
				}
			}
		}
	}
}

# Squash the doll
character_event = {
	id = svampires.87300
	desc = EVTDESCsvampires87300
	picture = GFX_evt_bad_news
	border = GFX_event_normal_frame_intrigue
	hide_from = yes
	is_triggered_only = yes
	immediate = {
		log = "work event id = svampires.87300 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTAsvampires87300
		if = {
			limit = {
				NOR = {
					trait = undernourished
					trait = incapable
				}
			}
			add_trait = undernourished
		}
		if = {
			limit = {
				trait = undernourished
				NOT = {
					trait = incapable
				}
			}
			add_trait = incapable
		}
		if = {
			limit = {
				trait = incapable
				is_invincible_trigger = no
			}
			death = {
				death_reason = death_murder_unknown
			}
		}
		hidden_tooltip = {
			FROM = {
				character_event = {
					id = svampires.87301 days = 5 random = 14
				}
			}
		}
	}
}

# Squashed the doll - What next?
character_event = {
	id = svampires.87301
	desc = EVTDESCsvampires87301
	picture = GFX_evt_voodoo_shaman
	border = GFX_event_normal_frame_intrigue
	is_triggered_only = yes
	immediate = {
		log = "work event id = svampires.87301 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTAsvampires87301
		FROM = {
			character_event = {
				id = svampires.87003
			}
		}
		ai_chance = {
			factor = 50
		}
	}
	option = {
		# Enough
		name = EVTOPTBsvampires87301
		ai_chance = {
			factor = 50
			modifier = {
				factor = 1.5
				FROM = {
					religion = shadowmen
				}
			}
		}
	}
}

# Cut the doll's tiny bits
character_event = {
	id = svampires.87400
	desc = EVTDESCsvampires87400
	picture = GFX_evt_bad_news
	border = GFX_event_normal_frame_intrigue
	hide_from = yes
	is_triggered_only = yes
	immediate = {
		log = "work event id = svampires.87400 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTAsvampires87400
		if = {
			limit = {
				is_female = no
			}
			add_trait = eunuch
		}
		if = {
			limit = {
				is_female = yes
				fertility = -1
			}
			add_trait = infertile
		}
		hidden_tooltip = {
			FROM = {
				character_event = {
					id = svampires.87401 
					days = 5 
					random = 14
				}
			}
		}
	}
}

# Sterlized the doll - What next?
character_event = {
	id = svampires.87401
	desc = EVTDESCsvampires87401
	picture = GFX_evt_voodoo_shaman
	border = GFX_event_normal_frame_intrigue
	is_triggered_only = yes
	immediate = {
		log = "work event id = svampires.87401 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTAsvampires87401
		FROM = {
			character_event = {
				id = svampires.87003
			}
		}
		ai_chance = {
			factor = 50
		}
	}

	# Enough
	option = {
		name = EVTOPTBsvampires87401
		ai_chance = {
			factor = 50
			modifier = {
				factor = 1.5
				FROM = {
					religion = shadowmen
				}
			}
		}
	}
}

# Boil doll's head
character_event = {
	id = svampires.87500
	desc = EVTDESCsvampires87500
	picture = GFX_evt_lunatic
	border = GFX_event_normal_frame_intrigue
	hide_from = yes
	is_triggered_only = yes
	immediate = {
		log = "work event id = svampires.87500 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTAsvampires87500
		random = {
			chance = 20
			if = {
				limit = {
					NOT = {
						trait = infirm
					}
				}
				add_trait = infirm
			}
			change_learning = -1
		}
		change_variable = {
			which = "lunatic_counter"
			value = 7
		}
		hidden_tooltip = {
			character_event = {
				id = mutation.1005
			}
			FROM = {
				character_event = {
					id = svampires.87501 days = 5 random = 14
				}
			}
		}
	}
}

# Boiled the doll - What next?
character_event = {
	id = svampires.87501
	desc = EVTDESCsvampires87501
	picture = GFX_evt_voodoo_shaman
	border = GFX_event_normal_frame_intrigue
	is_triggered_only = yes
	immediate = {
		log = "work event id = svampires.87501 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTAsvampires87501
		FROM = {
			character_event = {
				id = svampires.87003
			}
		}
		ai_chance = {
			factor = 50
		}
	}
	option = {
		# Enough
		name = EVTOPTBsvampires87501
		ai_chance = {
			factor = 50
			modifier = {
				factor = 1.5
				FROM = {
					religion = shadowmen
				}
			}
		}
	}
}

# Bind doll's heart
character_event = {
	id = svampires.87600
	desc = EVTDESCsvampires87600
	picture = GFX_evt_lunatic
	border = GFX_event_normal_frame_intrigue
	hide_from = yes
	is_triggered_only = yes
	immediate = {
		log = "work event id = svampires.87600 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTAsvampires87600
		hidden_tooltip = {
			FROM = {
				character_event = {
					id = svampires.87601 days = 5 random = 14
				}
			}
		}
		if = {
			limit = {
				has_lover = yes
			}
			random_lover = {
				remove_lover = ROOT
				add_rival = ROOT
			}
			break = yes
		}
		if = {
			limit = {
				any_friend = {
					is_alive = yes
				}
			}
			random_friend = {
				remove_friend = ROOT
				add_rival = ROOT
			}
			break = yes
		}
		if = {
			limit = {
				is_married = yes
			}
			random_spouse = {
				add_rival = ROOT
			}
			break = yes
		}
	}
}

# Bound doll's heart - What next?
character_event = {
	id = svampires.87601
	desc = EVTDESCsvampires87601
	picture = GFX_evt_voodoo_shaman
	border = GFX_event_normal_frame_intrigue
	is_triggered_only = yes
	immediate = {
		log = "work event id = svampires.87601 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTAsvampires87601
		hidden_tooltip = {
			FROM = {
				character_event = {
					id = svampires.87003
				}
			}
		}
		ai_chance = {
			factor = 50
		}
	}
	option = {
		# Enough
		name = EVTOPTBsvampires87601
		ai_chance = {
			factor = 50
			modifier = {
				factor = 1.5
				FROM = {
					religion = shadowmen
				}
			}
		}
	}
}

# Mahtmasi uses shadow to quicken the voodoo doll plot
character_event = {
	id = svampires.88
	desc = EVTDESCsvampires88
	picture = GFX_evt_mahtmasi_summoning
	border = GFX_event_normal_frame_intrigue
	is_triggered_only = yes
	immediate = {
		log = "work event id = svampires.88 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTAsvampires88
		hidden_tooltip = {
			if = {
				limit = {
					has_plot = plot_make_voodoo_doll
				}
				plot_target_char = {
					character_event = {
						id = svampires.90 days = 27
					}
				}
				character_event = {
					id = svampires.88001 days = 50
				} # clean flag
				break = yes

			}
			if = {
				limit = {
					OR = {
						has_plot = plot_kill_character
						has_plot = plot_kill_spouse
					}
				}
				plot_target_char = {
					character_event = {
						id = svampires.90001 days = 27
					}
				}
				character_event = {
					id = svampires.88001 days = 50
				} # clean flag
				break = yes

			}
		}
		ai_chance = {
			factor = 50
		}
	}
}

# clean the shadowflag
character_event = {
	id = svampires.88001
	hide_window = yes
	is_triggered_only = yes
	immediate = {
		log = "work event id = svampires.88001 for [Root.GetBestName]"
		clr_character_flag = using_shadow_plot
	}
}

character_event = {
	id = svampires.89
	desc = EVTDESCsvampires89
	picture = GFX_evt_voodoo_shaman
	is_triggered_only = yes
	immediate = {
		log = "work event id = svampires.89 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTAsvampires89

		trigger = {
			religion = akghan
		}
		religion = shadowmen
		piety = -50
		ai_chance = {
			factor = 50
			modifier = {
				factor = 0
				trait = zealous
			}
			modifier = {
				factor = 1.4
				trait = cynical
			}
			modifier = {
				factor = 0.5
				trait = brave
			}
			modifier = {
				factor = 2
				trait = craven
			}
			modifier = {
				factor = 0.1
				age = 40
			}
			modifier = {
				factor = 1.5
				father = {
					character = FROM
				}
			}
			modifier = {
				factor = 1.5
				mother = {
					character = FROM
				}
			}
		}
	}
	option = {
		name = EVTOPTBsvampires89
		piety = 50
		ai_chance = {
			factor = 50
		}
	}
}

# The plot attempt
character_event = {
	id = svampires.90
	desc = EVTDESCsvampires.83005
	picture = GFX_evt_feast
	border = GFX_event_normal_frame_intrigue
	hide_from = yes
	is_triggered_only = yes
	prisoner = no
	trigger = {
		# Is the plot still in motion?
		OR = {
			FROM = {
				has_plot = plot_make_voodoo_doll
				plot_target_char = {
					character = ROOT
				}
			}
			FROMFROM = {
				has_plot = plot_make_voodoo_doll
				plot_target_char = {
					character = ROOT
				}
			}
		}
	}
	immediate = {
		log = "work event id = svampires.90 for [Root.GetBestName]"
		save_event_target_as = target_victim
	}
	option = {
		name = EVTOPTAsvampires.83005 # Does not notice weird behavior

		trigger = {
			NOT = {
				OR = {
					AND = {
						trait = paranoid
						random = 33
					}
					AND = {
						trait = arabyan_scholar
						random = 40
					}
					AND = {
						trait = deceitful
						random = 50
					}
					AND = {
						religion = shadowmen	# Knows the danger
						random = 60
					}
					AND = {
						religion = akghan	# Knows the danger
						random = 60
					}
					AND = {
						trait = trusting
						random = 90
					}
					AND = {
						NOT = {
							trait = paranoid
						}
						NOT = {
							trait = trusting
						}
						NOT = {
							trait = deceitful
						}
						NOT = {
							religion = shadowmen
						}
						NOT = {
							trait = arabyan_scholar
						}
						NOT = {
							religion = akghan
						}
						random = 75
					}
				}
			}
		}
		hidden_tooltip = {
			random_list = {
				25 = {
					modifier = {
						factor = 0
						FROM = {
							has_character_flag = using_shadow_plot
						}
					}
					hidden_tooltip = {
						FROM = {
							character_event = {
								id = svampires.83013 days = 1
							}
						}
					}
					character_event = {
						id = svampires.83006 days = 1
					} # Object stolen, he notices
				}
				75 = {
					hidden_tooltip = {
						FROM = {
							character_event = {
								id = svampires.83014 days = 1
							}
						}
					}
					character_event = {
						id = svampires.83007 days = 1
					} # Object stolen, he doesn't notices
				}
			}
		}
	}
	option = {
		name = EVTOPTBsvampires.83005 # Notices weird movement

		trigger = {
			OR = {
				AND = {
					trait = paranoid
					random = 33
				}
				AND = {
					trait = arabyan_scholar
					random = 40
				}
				AND = {
					trait = deceitful
					random = 50
				}
				AND = {
					religion = shadowmen	# Knows the danger
					random = 60
				}
				AND = {
					religion = akghan	# Knows the danger
					random = 60
				}
				AND = {
					trait = trusting
					random = 90
				}
				AND = {
					NOT = {
						trait = paranoid
					}
					NOT = {
						trait = trusting
					}
					NOT = {
						trait = deceitful
					}
					NOT = {
						trait = arabyan_scholar
					}
					NOT = {
						religion = shadowmen
					}
					NOT = {
						religion = akghan
					}
					random = 75
				}
			}
		}
		hidden_tooltip = {
			random_list = {
				50 = {
					modifier = {
						factor = 0
						FROM = {
							has_character_flag = using_shadow_plot
						}
					}
					hidden_tooltip = {
						FROM = {
							character_event = {
								id = svampires.83015 days = 1
							}
						}
					}
					character_event = {
						id = svampires.83008 days = 1
					} # Lives, plotter discovered
				}
				50 = {
					hidden_tooltip = {
						FROM = {
							character_event = {
								id = svampires.83016 days = 1
							}
						}
					}
					character_event = {
						id = svampires.83009 days = 1
					} # Lives, plotter unknown
				}
			}
		}
	}
}

# Poisoned Wine - the murder attempt
character_event = {
	id = svampires.90001
	desc = EVTDESC8155
	picture = GFX_evt_feast
	border = GFX_event_normal_frame_intrigue
	hide_from = yes
	is_triggered_only = yes
	prisoner = no
	trigger = {
		prisoner = no
		# Is the plot still in motion?
		OR = {
			FROM = {
				OR = {
					has_plot = plot_kill_character
					has_plot = plot_kill_spouse
				}
				plot_target_char = {
					character = ROOT
				}
			}
			FROMFROM = {
				OR = {
					has_plot = plot_kill_character
					has_plot = plot_kill_spouse
				}
				plot_target_char = {
					character = ROOT
				}
			}
		}
	}
	immediate = {
		log = "work event id = svampires.90001 for [Root.GetBestName]"
		save_event_target_as = target_victim
	}
	option = {
		name = "EVTOPTA8155" # Drinks the wine

		trigger = {
			NOT = {
				OR = {
					AND = {
						trait = paranoid
						random = 33
					}
					AND = {
						trait = temperate
						random = 50
					}
					AND = {
						trait = gluttonous
						random = 90
					}
					AND = {
						NOT = {
							trait = temperate
						}
						NOT = {
							trait = gluttonous
						}
						NOT = {
							trait = paranoid
						}
						random = 75
					}
				}
			}
		}
		hidden_tooltip = {
			random_list = {
				25 = {
					modifier = {
						factor = 0
						FROM = {
							has_character_flag = using_shadow_plot
						}
					}
					hidden_tooltip = {
						FROM = {
							character_event = {
								id = 8163 days = 1
							}
						}
					}
					character_event = {
						id = 8156 days = 1
					} # Dies, murderer discovered
				}
				75 = {
					hidden_tooltip = {
						FROM = {
							character_event = {
								id = 8164 days = 1
							}
						}
					}
					character_event = {
						id = 8157 days = 1
					} # Dies, murderer unknown
				}
			}
		}
	}
	option = {
		name = "EVTOPTB8155" # Discovers the poison

		trigger = {
			OR = {
				AND = {
					trait = paranoid
					random = 33
				}
				AND = {
					trait = temperate
					random = 50
				}
				AND = {
					trait = gluttonous
					random = 90
				}
				AND = {
					NOT = {
						trait = temperate
					}
					NOT = {
						trait = gluttonous
					}
					NOT = {
						trait = paranoid
					}
					random = 75
				}
			}
		}
		hidden_tooltip = {
			random_list = {
				50 = {
					modifier = {
						factor = 0
						FROM = {
							has_character_flag = using_shadow_plot
						}
					}
					hidden_tooltip = {
						FROM = {
							character_event = {
								id = 8165 days = 1
							}
						}
					}
					character_event = {
						id = 8158 days = 1
					} # Lives, murderer discovered
				}
				50 = {
					hidden_tooltip = {
						FROM = {
							character_event = {
								id = 8166 days = 1
							}
						}
					}
					character_event = {
						id = 8159 days = 1
					} # Lives, murderer unknown
				}
			}
		}
	}
}

# Vampires do not tolerate competition in love
character_event = {
	id = svampires.91
	desc = EVTDESCsvampires91
	picture = GFX_evt_vampire_politics
	religion_group = necromantic_group
	capable_only = yes
	is_triggered_only = yes
	prisoner = no
	trigger = {
		is_vampire_trigger = yes
		can_love_trigger = yes
		has_lover = yes
		any_lover = {
			is_vampire_trigger = yes
			num_of_lovers = 2
			can_love_trigger = yes
		}
	}
	weight_multiplier = {
		factor = 1
		modifier = {
			factor = 0.8
			trait = wroth
		}
		modifier = {
			factor = 0.6
			trait = vampire_lahmian_visible
		}
		modifier = {
			factor = 0.7
			trait = vampire_carstein_visible
		}
		modifier = {
			factor = 0.8
			trait = vampire_jade_visible
		}
		modifier = {
			factor = 0.5
			trait = envious
		}
		modifier = {
			factor = 0.8
			trait = cruel
		}
		modifier = {
			factor = 1.2
			trait = charitable
		}
		modifier = {
			factor = 1.2
			trait = kind
		}
		modifier = {
			factor = 1.2
			trait = patient
		}
	}
	immediate = {
		log = "work event id = svampires.91 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTAsvampires91
		random_lover = {
			limit = {
				is_vampire_trigger = yes
				num_of_lovers = 2
				can_love_trigger = yes
			}
			character_event = {
				id = svampires.91001
			}
		}
	}
	option = {
		name = EVTOPTBsvampires91

		trigger = {
			OR = {
				trait = charitable
				trait = kind
			}
		}
		ai_chance = {
			factor = 0
		}
	}
}

# Letcher receives ultimatum
character_event = {
	id = svampires.91001
	desc = EVTDESCsvampires91001
	picture = GFX_evt_vampire_politics
	capable_only = yes
	prisoner = no
	trigger = {
		is_vampire_trigger = yes
		can_love_trigger = yes
		has_lover = yes
		any_lover = {
			can_love_trigger = yes
			is_vampire_trigger = yes
			num_of_lovers = 2
		}
	}
	is_triggered_only = yes
	immediate = {
		log = "work event id = svampires.91001 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTAsvampires91001
		any_lover = {
			limit = {
				NOT = {
					character = FROM
				}
				can_love_trigger = yes
			}
			character_event = {
				id = svampires.91004
			}
		}
		any_lover = {
			limit = {
				character = FROM
			}
			character_event = {
				id = svampires.91003
			}
		}
	}
	option = {
		name = EVTOPTBsvampires91001
		any_lover = {
			limit = {
				character = FROM
			}
			character_event = {
				id = svampires.91002
			}
		}
	}
}

# The lover is dumped and becomes the letcher's rival
character_event = {
	id = svampires.91002
	desc = EVTDESCsvampires91002
	picture = GFX_evt_vampire_politics
	capable_only = yes
	prisoner = no
	is_triggered_only = yes
	immediate = {
		log = "work event id = svampires.91002 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTAsvampires91002
		remove_lover = FROM
		add_rival = FROM
	}
}

# The lover is conforted
character_event = {
	id = svampires.91003
	desc = EVTDESCsvampires91003
	picture = GFX_evt_vampire_politics
	capable_only = yes
	prisoner = no
	is_triggered_only = yes
	immediate = {
		log = "work event id = svampires.91003 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTAsvampires91003
		prestige = 100
	}
}

# Other lovers are dumped and become rivals of the selected
character_event = {
	id = svampires.91004
	desc = EVTDESCsvampires91004
	picture = GFX_evt_vampire_politics
	capable_only = yes
	prisoner = no
	is_triggered_only = yes
	immediate = {
		log = "work event id = svampires.91004 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTAsvampires91004
		remove_lover = FROM
		add_rival = FROMFROM
	}
}
