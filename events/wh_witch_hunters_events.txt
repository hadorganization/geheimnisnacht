namespace = swhunters

# Incapable Master gets removed by the others.
character_event = {
	id = swhunters.1
	desc = EVTDESCswhunters1
	picture = GFX_evt_witch_hunters
	is_triggered_only = yes

	immediate = {
		log = "work event id = swhunters.1"
	}

	option = {
		name = EVTOPTAswhunters1
		clr_character_flag = witch_hunter_accusation
		if = {
			limit = {
				NOT = {
					has_landed_title = k_witch_hunters_order
				}
			}
			character_event = {
				id = shunters.1
			}
			FROM = {
				character_event = {
					id = swhunters.10001
				}
			}
		}
		if = {
			limit = {
				has_landed_title = k_witch_hunters_order
			}
			character_event = {
				id = shunters.20002
			}
			FROM = {
				character_event = {
					id = swhunters.10001
				}
			}
		}
	}
}

# Incapable Master removed - Notify the accuser.
character_event = {
	id = swhunters.10001
	desc = EVTDESCswhunters10001
	picture = GFX_evt_witch_hunters
	is_triggered_only = yes

	immediate = {
		log = "work event id = swhunters.10001"
	}

	option = {
		name = EVTOPTAswhunters10001
		piety = 50
		clr_character_flag = witch_hunter_accusation
	}
}

# Master accused of bad conduct.
character_event = {
	id = swhunters.2
	desc = EVTDESCswhunters2
	picture = GFX_evt_witch_hunters
	is_triggered_only = yes

	immediate = {
		log = "work event id = swhunters.2"
	}

	option = {
		name = EVTOPTAswhunters2
		clr_character_flag = witch_hunter_accusation
		hidden_tooltip = {
			k_witch_hunters_order = {
				holder_scope = {
					character_event = {
						id = swhunters.3 days = 2
					}
				}
			} # verdict
			k_witch_hunters_order = {
				holder_scope = {
					character_event = {
						id = swhunters.20001
					}
				}
			}
			d_witch_hunter_seat_1 = {
				holder_scope = {
					character_event = {
						id = swhunters.20001
					}
				}
			}
			d_witch_hunter_seat_2 = {
				holder_scope = {
					character_event = {
						id = swhunters.20001
					}
				}
			}
			d_witch_hunter_seat_3 = {
				holder_scope = {
					character_event = {
						id = swhunters.20001
					}
				}
			}
			d_witch_hunter_seat_4 = {
				holder_scope = {
					character_event = {
						id = swhunters.20001
					}
				}
			}
			d_witch_hunter_seat_5 = {
				holder_scope = {
					character_event = {
						id = swhunters.20001
					}
				}
			}
			d_witch_hunter_seat_6 = {
				holder_scope = {
					character_event = {
						id = swhunters.20001
					}
				}
			}
			d_witch_hunter_seat_7 = {
				holder_scope = {
					character_event = {
						id = swhunters.20001
					}
				}
			}
			d_witch_hunter_seat_8 = {
				holder_scope = {
					character_event = {
						id = swhunters.20001
					}
				}
			}
			d_witch_hunter_seat_9 = {
				holder_scope = {
					character_event = {
						id = swhunters.20001
					}
				}
			}
			d_witch_hunter_seat_10 = {
				holder_scope = {
					character_event = {
						id = swhunters.20001
					}
				}
			}
			d_witch_hunter_seat_11 = {
				holder_scope = {
					character_event = {
						id = swhunters.20001
					}
				}
			}
			d_witch_hunter_seat_12 = {
				holder_scope = {
					character_event = {
						id = swhunters.20001
					}
				}
			}
		}
	}
}

# Council-Knights receive notification and vote.
character_event = {
	id = swhunters.20001
	desc = EVTDESCswhunters20001
	picture = GFX_evt_witch_hunters

	trigger = {
		NOT = {
			character = FROM
		}
		NOT = {
			character = FROMFROMFROM
		}
	} # accuser and accused don't get a vote
	is_triggered_only = yes

	immediate = {
		log = "work event id = swhunters.20001"
	}

	option = {
		name = EVTOPTAswhunters20001
		FROM = {
			change_variable = {
				which = "accused_hunter"
				value = 1
			}
		}
		ai_chance = {
			factor = 50
		}
	}

	option = {
		name = EVTOPTBswhunters20001
		ai_chance = {
			factor = 50
			modifier = {
				factor = 0.5
				opinion = {
					who = FROM
					value = 75
				}
			}
			modifier = {
				factor = 0.65
				opinion = {
					who = FROM
					value = 60
				}
			}
			modifier = {
				factor = 0.75
				opinion = {
					who = FROM
					value = 50
				}
			}
			modifier = {
				factor = 0.85
				opinion = {
					who = FROM
					value = 40
				}
			}
			modifier = {
				factor = 0.85
				opinion = {
					who = FROM
					value = 30
				}
			}
			modifier = {
				factor = 0.95
				opinion = {
					who = FROM
					value = 20
				}
			}
			modifier = {
				factor = 0.95
				opinion = {
					who = FROM
					value = 10
				}
			}
			modifier = {
				factor = 1.25
				NOT = {
					opinion = {
						who = FROM
						value = -10
					}
				}
			}
			modifier = {
				factor = 1.25
				NOT = {
					opinion = {
						who = FROM
						value = -20
					}
				}
			}
			modifier = {
				factor = 1.25
				NOT = {
					opinion = {
						who = FROM
						value = -30
					}
				}
			}
			modifier = {
				factor = 1.25
				NOT = {
					opinion = {
						who = FROM
						value = -40
					}
				}
			}
			modifier = {
				factor = 1.25
				NOT = {
					opinion = {
						who = FROM
						value = -50
					}
				}
			}
			modifier = {
				factor = 1.5
				NOT = {
					opinion = {
						who = FROM
						value = -60
					}
				}
			}
			modifier = {
				factor = 1.75
				NOT = {
					opinion = {
						who = FROM
						value = -75
					}
				}
			}
			modifier = {
				factor = 0.01
				FROM = {
					OR = {
						trait = incapable
						trait = inbred
						trait = possessed
						trait = excommunicated
						trait = lunatic_3
						trait = mutation_minor
						trait = mutation_major
						trait = mutation_massive
						trait = mage_apprentice
						trait = monstrous
						trait = immortal
						has_character_modifier = magic_power_1
						has_character_modifier = magic_power_2
						has_character_modifier = magic_power_3
						has_character_modifier = magic_power_4
						trait = magic_potential_1
						trait = magic_potential_2
						trait = magic_potential_3
						trait = magic_potential_4
					}
				}
			}
			modifier = {
				factor = 0.1
				FROM = {
					trait = possessed
				}
			}
			modifier = {
				factor = 0
				FROM = {
					OR = {
						trait = mutation_minor
						trait = mutation_major
						trait = mutation_massive
					}
				}
			}
			modifier = {
				factor = 0
				FROM = {
					NOT = {
						trait = witch_hunter
					}
				}
			}
			modifier = {
				factor = 0.25
				FROM = {
					OR = {
						has_character_modifier = magic_power_1
						has_character_modifier = magic_power_2
						has_character_modifier = magic_power_3
						has_character_modifier = magic_power_4
					}
				}
			}
			modifier = {
				factor = 0.25
				FROM = {
					OR = {
						trait = magic_potential_1
						trait = magic_potential_2
						trait = magic_potential_3
						trait = magic_potential_4
					}
				}
			}
			modifier = {
				factor = 0.1
				FROM = {
					trait = incapable
				}
			}
			modifier = {
				factor = 0.5
				FROM = {
					trait = mutation_minor
				}
			}
			modifier = {
				factor = 1.5
				FROM = {
					has_landed_title = k_witch_hunters_order
				}
			}
			modifier = {
				factor = 3
				FROM = {
					has_landed_title = k_witch_hunters_order
				}
				trait = envious
			}
			modifier = {
				factor = 0.1
				FROM = {
					trait = mutation_major
				}
			}
			modifier = {
				factor = 0
				FROM = {
					trait = mutation_massive
				}
			}
			modifier = {
				factor = 0.5
				trait = paranoid
			}
			modifier = {
				factor = 0.5
				FROM = {
					trait = cynical
				}
				trait = zealous
			}
			modifier = {
				factor = 0.85
				FROM = {
					trait = lunatic_1
				}
			}
			modifier = {
				factor = 0.75
				FROM = {
					trait = lunatic_2
				}
			}
			modifier = {
				factor = 0.5
				FROM = {
					trait = lunatic_3
				}
			}
			modifier = {
				factor = 1.25
				FROM = {
					trait = shy
				}
			}
			modifier = {
				factor = 0.85
				FROM = {
					trait = mystic
				}
			}
			modifier = {
				factor = 0.85
				FROM = {
					trait = intricate_webweaver
				}
			}
			modifier = {
				factor = 0.75
				FROM = {
					trait = intricate_webweaver
				}
			}
			modifier = {
				factor = 0.5
				FROM = {
					trait = elusive_shadow
				}
			}
			modifier = {
				factor = 1.15
				FROM = {
					trait = charismatic_negotiator
				}
			}
			modifier = {
				factor = 1.25
				FROM = {
					trait = grey_eminence
				}
			}
			modifier = {
				factor = 0.95
				FROM = {
					trait = fortune_builder
				}
			}
			modifier = {
				factor = 0.75
				FROM = {
					trait = midas_touched
				}
			}
			modifier = {
				factor = 1.15
				FROM = {
					trait = tough_soldier
				}
			}
			modifier = {
				factor = 1.25
				FROM = {
					trait = skilled_tactician
				}
			}
			modifier = {
				factor = 1.45
				FROM = {
					trait = brilliant_strategist
				}
			}
			modifier = {
				factor = 1.25
				FROM = {
					trait = detached_priest
				}
			}
			modifier = {
				factor = 1.35
				FROM = {
					trait = martial_cleric
				}
			}
			modifier = {
				factor = 1.5
				FROM = {
					trait = scholarly_theologian
				}
			}
			modifier = {
				factor = 1.75
				FROM = {
					trait = mastermind_theologian
				}
			}
			modifier = {
				factor = 0.95
				FROM = {
					trait = stressed
				}
			}
			modifier = {
				factor = 0.75
				FROM = {
					trait = infirm
				}
			}
			modifier = {
				factor = 0.75
				FROM = {
					trait = drunkard
				}
			}
			modifier = {
				factor = 0.5
				FROM = {
					trait = addict
				}
			}
			modifier = {
				factor = 0.75
				FROM = {
					trait = pregnant
				}
			}
			modifier = {
				factor = 0.75
				FROM = {
					trait = homosexual
				}
			}
			modifier = {
				factor = 0.5
				FROM = {
					trait = kinslayer
				}
			}
			modifier = {
				factor = 0.75
				FROM = {
					trait = clubfooted
				}
			}
			modifier = {
				factor = 0.75
				FROM = {
					trait = harelip
				}
			}
			modifier = {
				factor = 0.75
				FROM = {
					trait = hunchback
				}
			}
			modifier = {
				factor = 0.75
				FROM = {
					trait = lisp
				}
			}
			modifier = {
				factor = 0.75
				FROM = {
					trait = stutter
				}
			}
			modifier = {
				factor = 1.75
				FROM = {
					trait = dwarf
				}
			}
			modifier = {
				factor = 2
				FROM = {
					trait = inbred
				}
			}
			modifier = {
				factor = 0.75
				FROM = {
					trait = celibate
				}
			}
			modifier = {
				factor = 1.5
				FROM = {
					trait = hedonist
				}
			}
			modifier = {
				factor = 0.75
				FROM = {
					trait = scholar
				}
			}
			modifier = {
				factor = 1.25
				FROM = {
					trait = impaler
				}
			}
			modifier = {
				factor = 1.25
				FROM = {
					trait = poet
				}
			}
			modifier = {
				factor = 0.85
				FROM = {
					trait = lustful
				}
			}
			modifier = {
				factor = 1.15
				FROM = {
					trait = chaste
				}
			}
			modifier = {
				factor = 0.85
				FROM = {
					trait = gluttonous
				}
			}
			modifier = {
				factor = 1.15
				FROM = {
					trait = temperate
				}
			}
			modifier = {
				factor = 0.85
				FROM = {
					trait = greedy
				}
			}
			modifier = {
				factor = 0.95
				FROM = {
					trait = charitable
				}
			}
			modifier = {
				factor = 0.85
				FROM = {
					trait = slothful
				}
			}
			modifier = {
				factor = 1.25
				FROM = {
					trait = diligent
				}
			}
			modifier = {
				factor = 0.85
				FROM = {
					trait = envious
				}
			}
			modifier = {
				factor = 0.85
				FROM = {
					trait = kind
				}
			}
			modifier = {
				factor = 0.95
				FROM = {
					trait = wroth
				}
			}
			modifier = {
				factor = 1.15
				FROM = {
					trait = patient
				}
			}
			modifier = {
				factor = 0.85
				FROM = {
					trait = proud
				}
			}
			modifier = {
				factor = 1.15
				FROM = {
					trait = humble
				}
			}
			modifier = {
				factor = 0.85
				FROM = {
					trait = deceitful
				}
			}
			modifier = {
				factor = 0.85
				FROM = {
					trait = craven
				}
			}
			modifier = {
				factor = 0.75
				FROM = {
					trait = cynical
				}
			}
			modifier = {
				factor = 1.75
				FROM = {
					trait = zealous
				}
			}
			modifier = {
				factor = 0.95
				FROM = {
					trait = cruel
				}
			}
		}
	}
}

# Verdict given to the Grand Master
character_event = {
	id = swhunters.3
	desc = {
		text = EVTDESCAswhunters3
		trigger = {
			FROM = {
				check_variable = {
					which = "accused_hunter"
					value = 6
				}
			}
		}
	}
	desc = {
		text = EVTDESCBswhunters3
		trigger = {
			NOT = {
				FROM = {
					check_variable = {
						which = "accused_hunter"
						value = 6
					}
				}
			}
		}
	}
	picture = GFX_evt_witch_hunters
	is_triggered_only = yes

	immediate = {
		log = "work event id = swhunters.3"
	}

	option = {
		name = EVTOPTAswhunters3
		# Kill
		trigger = {
			FROM = {
				check_variable = {
					which = "accused_hunter"
					value = 6
				}
			}
			NOT = {
				character = FROM
			}
		}
		FROM = {
			character_event = {
				id = swhunters.30001
			}
		}
		FROMFROMFROM = {
			character_event = {
				id = swhunters.30003
			}
		}
		ai_chance = {
			factor = 50
		}
	}

	option = {
		name = EVTOPTBswhunters3
		# Exile
		trigger = {
			FROM = {
				check_variable = {
					which = "accused_hunter"
					value = 6
				}
			}
		}
		FROM = {
			character_event = {
				id = swhunters.30002
			}
		}
		FROMFROMFROM = {
			character_event = {
				id = swhunters.30004
			}
		}
		ai_chance = {
			factor = 50
			modifier = {
				factor = 0
				FROM = {
					OR = {
						trait = lunatic_3
						NOT = {
							trait = witch_hunter
						}
						trait = possessed
						trait = leper
						trait = dwarf
						trait = has_nurgles_rot
					}
				}
			}
			modifier = {
				factor = 0.5
				trait = cruel
			}
			modifier = {
				factor = 0.5
				trait = paranoid
			}
			modifier = {
				factor = 0.5
				trait = zealous
			}
		}
	}

	option = {
		name = EVTOPTCswhunters3
		# Innocent
		trigger = {
			NOT = {
				FROM = {
					check_variable = {
						which = "accused_hunter"
						value = 6
					}
				}
			}
		}
		FROM = {
			character_event = {
				id = swhunters.30005
			}
		}
		FROMFROMFROM = {
			character_event = {
				id = swhunters.30006
			}
		}
	}
}

# Burned for bad conduct
character_event = {
	id = swhunters.30001
	desc = EVTDESCswhunters30001
	picture = GFX_evt_burning_stake
	is_triggered_only = yes

	immediate = {
		log = "work event id = swhunters.30001"
	}

	option = {
		name = EVTOPTAswhunters30001
		piety = -250
		clr_character_flag = witch_hunter_accusation
		if = {
			limit = {
				is_invincible_trigger = yes
			}
			antideath_effect = yes
			break = yes
		}
		add_trait = staked
		death = {
			death_reason = death_execution_burning
			killer = FROM
		}
	}
}

# Exiled for bad conduct
character_event = {
	id = swhunters.30002
	desc = EVTDESCswhunters30002
	picture = GFX_evt_witch_hunters
	is_triggered_only = yes

	immediate = {
		log = "work event id = swhunters.30002"
	}

	option = {
		name = EVTOPTAswhunters30002
		piety = -250
		set_variable = {
			which = "accused_hunter"
			value = 0
		}
		clr_character_flag = witch_hunter_accusation
		if = {
			limit = {
				NOT = {
					has_landed_title = k_witch_hunters_order
				}
			}
			character_event = {
				id = shunters.1
			}
		}
		if = {
			limit = {
				has_landed_title = k_witch_hunters_order
			}
			character_event = {
				id = shunters.20002
			}
		}
		random_independent_ruler = {
			limit = {
				religion_group = ROOT
			}
			ROOT = {
				move_character = PREV
			}
		}
		remove_trait = witch_hunter
		opinion = {
			who = FROMFROMFROMFROM
			modifier = opinion_framed_me
			months = 180
		}
		location = {
			ROOT = {
				culture = PREV
			}
		}
	}
}

# Burned for bad conduct - Notify Accuser
character_event = {
	id = swhunters.30003
	desc = EVTDESCswhunters30003
	picture = GFX_evt_burning_stake
	is_triggered_only = yes

	immediate = {
		log = "work event id = swhunters.30003"
	}

	option = {
		name = EVTOPTAswhunters30003
		piety = 250
		clr_character_flag = witch_hunter_accusation
	}
}

# Exiled for bad conduct - Notify Accuser
character_event = {
	id = swhunters.30004
	desc = EVTDESCswhunters30004
	picture = GFX_evt_witch_hunters
	is_triggered_only = yes

	immediate = {
		log = "work event id = swhunters.30004"
	}

	option = {
		name = EVTOPTAswhunters30004
		piety = 150
		clr_character_flag = witch_hunter_accusation
	}
}

# Found innocent of charges
character_event = {
	id = swhunters.30005
	desc = EVTDESCswhunters30005
	picture = GFX_evt_witch_hunters
	is_triggered_only = yes

	immediate = {
		log = "work event id = swhunters.30005"
	}

	option = {
		name = EVTOPTAswhunters30005
		piety = 50
		clr_character_flag = witch_hunter_accusation
		set_variable = {
			which = "accused_hunter"
			value = 0
		}
		opinion = {
			who = FROMFROMFROMFROM
			modifier = opinion_accused_me
			months = 36
		}
		add_character_modifier = {
			name = accused_recently
			duration = 900
			hidden = yes
		}
	}
}

# Found innocent of charges - Notify Accuser
character_event = {
	id = swhunters.30006
	desc = EVTDESCswhunters30006
	picture = GFX_evt_witch_hunters
	is_triggered_only = yes

	immediate = {
		log = "work event id = swhunters.30006"
	}

	option = {
		name = EVTOPTAswhunters30006
		piety = -150
		clr_character_flag = witch_hunter_accusation
	}
}

# The son of a ruler volunteers to join the Witch Hunters
character_event = {
	id = swhunters.4
	desc = EVTDESCswhunters4
	picture = GFX_evt_witch_hunters
	border = GFX_event_normal_frame_religion
	min_age = 14
	max_age = 45
	only_capable = yes
	prisoner = no
	religion = sigmarite

	trigger = {
		NOT = {
			trait = witch_hunter
		}
		trait = creature_human
		is_ruler = no
		is_heretic = no
		martial = 6
		is_title_active = k_witch_hunters_order
		NOR = {
			has_character_modifier = magic_power_1
			has_character_modifier = magic_power_2
			has_character_modifier = magic_power_3
			has_character_modifier = magic_power_4
			trait = magic_potential_1
			trait = magic_potential_2
			trait = magic_potential_3
			trait = magic_potential_4
			trait = maimed
			trait = has_nurgles_rot
			trait = incapable
			trait = blinded
			trait = vampire_carstein_visible
			trait = vampire_blood_visible
			trait = vampire_lahmian_visible
			trait = vampire_strigoi_visible
			trait = vampire_necrarch_visible
			trait = vampire_mahtmasi_visible
			trait = vampire_jade_visible
			trait = vampire_carstein_hidden
			trait = vampire_blood_hidden
			trait = vampire_lahmian_hidden
			trait = vampire_strigoi_hidden
			trait = vampire_necrarch_hidden
			trait = vampire_mahtmasi_hidden
			trait = vampire_jade_hidden
			society_member_of = cult_of_khorne
			society_member_of = cult_of_nurgle			
			society_member_of = cult_of_slaanesh
			society_member_of = cult_of_tzeentch
			trait = mutation_minor
			trait = mutation_major
			trait = mutation_massive
		}
		OR = {
			father_even_if_dead = {
				primary_title = {
					higher_tier_than = BARON
				}
			}
			mother_even_if_dead = {
				primary_title = {
					higher_tier_than = BARON
				}
			}
		}
		liege = {
			holy_order = no
			liege = {
				holy_order = no
			}
		}
		NOT = {
			has_character_modifier = expelled_k_witch_hunters_order
		}
		NOT = {
			any_liege = {
				has_character_modifier = expelled_k_witch_hunters_order
			}
		}
		NOT = {
			is_pregnant = yes
		}
		NOT = {
			any_spouse = {
				is_pregnant = yes
				father_of_unborn = {
					character = ROOT
				} # Won't happen if spouse is pregnant with non-bastard child
			}
		}
	}

	mean_time_to_happen = {
		years = 100
		modifier = {
			factor = 0.25
			trait = zealous
		}
		modifier = {
			factor = 0.5
			trait = celibate
		}
		modifier = {
			factor = 1.75
			is_female = yes
		}
		modifier = {
			factor = 0.5
			trait = homosexual
		}
		modifier = {
			factor = 0.7
			trait = content
		}
		modifier = {
			factor = 0.75
			trait = chaste
		}
		modifier = {
			factor = 0.75
			NOT = {
				age = 25
			}
		}
		modifier = {
			factor = 1.5
			trait = slothful
		}
		modifier = {
			factor = 2.0
			trait = lustful
		}
		modifier = {
			factor = 2.0
			trait = cynical
		}
		modifier = {
			factor = 2.0
			trait = hedonist
		}
		modifier = {
			factor = 2.0
			trait = ambitious
		}
		modifier = {
			factor = 2.0
			any_heir_title = {
				always = yes
			}
		}
		modifier = {
			factor = 2.0
			is_primary_heir = yes
		}
		modifier = {
			factor = 2
			any_spouse = {
				reverse_opinion = {
					who = ROOT
					value = 100
				}
			}
		}
		modifier = {
			factor = 3.0
			NOT = {
				culture_group = imperial_group
			}
		}
		modifier = {
			factor = 2.0
			culture_group = kislevite_group
		}
	}

	immediate = {
		log = "work event id = swhunters.4"
	}

	option = {
		name = EVTOPTAswhunters4
		ai_chance = {
			factor = 100
		}
		liege = {
			character_event = {
				id = swhunters.40001
			}
		}
	}

	option = {
		name = EVTOPTBswhunters4
	}
}

# Son or brother asks to join the Witch Hunters
character_event = {
	id = swhunters.40001
	desc = EVTDESCswhunters40001
	picture = GFX_evt_witch_hunters
	border = GFX_event_normal_frame_religion
	is_triggered_only = yes

	immediate = {
		log = "work event id = swhunters.40001"
	}

	option = {
		name = EVTOPTAswhunters40001
		ai_chance = {
			factor = 100
		}
		piety = 100
		FROM = {
			character_event = {
				id = swhunters.40002
				tooltip = EVTTOOLTIP_SOA_1032
			}
		}
	}

	option = {
		name = EVTOPTBswhunters40001
		piety = -100
		FROM = {
			character_event = {
				id = swhunters.40003
				tooltip = EVTTOOLTIP_SOA_1033
			}
		}
	}
}

# Son or brother joins the Witch Hunters
character_event = {
	id = swhunters.40002
	desc = EVTDESCswhunters40002
	picture = GFX_evt_witch_hunters
	border = GFX_event_normal_frame_religion
	is_triggered_only = yes

	immediate = {
		log = "work event id = swhunters.40002"
	}

	option = {
		name = EXCELLENT
		k_witch_hunters_order = {
			holder_scope = {
				ROOT = {
					move_character = PREV
					hidden_tooltip = {
						clear_wealth = PREV
					}
					spouse = {
						remove_spouse = spouse
						hidden_tooltip = {
							character_event = {
								id = SoA.2863
							}
						}
					}
					add_trait = witch_hunter
					culture = witchhunter_culture
					religion = sigmarite
					any_spouse = {
						remove_spouse = PREV
					}
					if = {
						limit = {
							trait = in_hiding
						}
						remove_trait = in_hiding
						clr_character_flag = do_not_disturb
						add_character_modifier = {
							name = went_out_of_hiding_timer
							duration = 180
							hidden = yes
						}
						hidden_tooltip = {
							character_event = {
								id = CM.6400
							}
						} # Notify plotters and family
					}
				}
			}
		}
	}
}

# Liege refuses request to join the Witch Hunters
character_event = {
	id = swhunters.40003
	desc = EVTDESCswhunters40003
	picture = GFX_evt_witch_hunters
	border = GFX_event_normal_frame_religion
	is_triggered_only = yes

	immediate = {
		log = "work event id = swhunters.40003"
	}

	option = {
		name = EVTOPTAswhunters40003
		opinion = {
			who = FROM
			modifier = opinion_refused_request_holy_order
		}
	}
}

# A ruler asks for a loan.
letter_event = {
	id = swhunters.5
	desc = EVTDESCswhunters5
	# picture = GFX_evt_witch_hunters
	border = GFX_event_letter_frame_religion
	is_triggered_only = yes

	immediate = {
		log = "work event id = swhunters.5"
	}

	option = {
		name = EVTOPTAswhunters5
		trigger = {
			wealth = 500
		}
		wealth = -500
		FROM = {
			letter_event = {
				id = swhunters.50001
			}
		}
		ai_chance = {
			factor = 70
			modifier = {
				factor = 1.75
				trait = trusting
			}
		}
	}

	option = {
		name = EVTOPTBswhunters5
		FROM = {
			letter_event = {
				id = swhunters.50002
			}
		}
		FROM = {
			opinion = {
				who = ROOT
				modifier = opinion_refused_loan
			}
		}
		ai_chance = {
			factor = 30
			modifier = {
				factor = 1.75
				trait = paranoid
			}
		}
	}
}

# Notification event when borrowing money from the Witch Hunters
letter_event = {
	id = swhunters.50001
	desc = EVTDESCswhunters50001
	border = GFX_event_letter_frame_religion
	is_triggered_only = yes

	immediate = {
		log = "work event id = swhunters.50001"
	}

	option = {
		name = EXCELLENT
		wealth = 500
		add_character_modifier = {
			name = borrowed_from_k_witch_hunters_order
			duration = -1
			inherit = yes
		}
	}
}

# Notification the loan was refused.
letter_event = {
	id = swhunters.50002
	desc = EVTDESCswhunters50002
	border = GFX_event_letter_frame_religion
	is_triggered_only = yes

	immediate = {
		log = "work event id = swhunters.50002"
	}

	option = {
		name = EVTOPTAswhunters50002
	}
}

# Received donation
character_event = {
	id = swhunters.6
	desc = EVTDESCswhunters6
	notification = yes
	is_triggered_only = yes

	immediate = {
		log = "work event id = swhunters.6"
		wealth = 500
		opinion = {
			who = FROM
			modifier = opinion_generous_donation
		}
		FROM = {
			letter_event = {
				id = swhunters.60001
			}
		}
	}

	option = {
	}
}

# Notification Witch Hunters received payment
letter_event = {
	id = swhunters.60001
	desc = EVTDESCswhunters60001
	border = GFX_event_letter_frame_religion
	is_triggered_only = yes

	immediate = {
		log = "work event id = swhunters.60001"
	}

	option = {
		name = EXCELLENT
	}
}

# Ping event when expelling Witch Hunters from a Realm
character_event = {
	id = swhunters.7
	hide_window = yes
	is_triggered_only = yes

	immediate = {
		log = "work event id = swhunters.7"
		any_title_under = {
			limit = {
				tier = BARON
				location = {
					owner = {
						OR = {
							character = FROM
							is_liege_or_above = FROM
						}
					}
				}
			}
			usurp_title = FROM
		}
		if = {
			limit = {
				is_liege_or_above = FROM
			}
			set_defacto_liege = THIS
		}
		letter_event = {
			id = swhunters.70002
		}
		FROM = {
			letter_event = {
				id = swhunters.70001
			}
		}
		opinion = {
			who = FROM
			modifier = opinion_expelled_from_realm
		}
	}
}

# Answer from the Witch Hunters Order
letter_event = {
	id = swhunters.70001
	desc = EVTDESCswhunters70001
	border = GFX_event_letter_frame_religion
	is_triggered_only = yes

	immediate = {
		log = "work event id = swhunters.70001"
		remove_character_modifier = donated_to_holy_order
	}

	option = {
		name = EVTOPTAswhunters70001
	}
}

# Notification event when the Order has been expelled from a province
letter_event = {
	id = swhunters.70002
	desc = EVTDESCswhunters70002
	border = GFX_event_letter_frame_religion
	is_triggered_only = yes

	immediate = {
		log = "work event id = swhunters.70002"
	}

	option = {
		name = EVTOPTAswhunters70002
	}
}

# Notification a ruler welcomes Witch Hunters in his realm once more
letter_event = {
	id = swhunters.8
	desc = EVTDESCswhunters8
	border = GFX_event_letter_frame_religion
	is_triggered_only = yes

	immediate = {
		log = "work event id = swhunters.8"
	}

	option = {
		name = EXCELLENT
		FROM = {
			letter_event = {
				id = swhunters.80001
			}
		}
		random_courtier = {
			limit = {
				is_ruler = no
				trait = witch_hunter
			}
			move_character = FROM
			random_courtier = {
				limit = {
					is_ruler = no
					trait = witch_hunter
					NOT = {
						character = PREV
					}
				}
				move_character = FROM
			}
		}
	}
}

# Notification from the Order returning in the realm
letter_event = {
	id = swhunters.80001
	desc = EVTDESCswhunters80001
	border = GFX_event_letter_frame_religion
	is_triggered_only = yes

	immediate = {
		log = "work event id = swhunters.80001"
	}

	option = {
		name = EVTOPTAswhunters80001
	}
}

# The Grand Master demands one of your sons due to debt (only for AI, player asks by decision)
character_event = {
	id = swhunters.9
	hide_window = yes
	only_playable = yes
	religion_group = old_world_group

	trigger = {
		OR = {
			religion = sigmarite
			religion = myrmidian
			religion = ulrican
			religion = taalite
			religion = shallyan
			religion = manannite
		}
		is_heretic = no
		has_character_modifier = borrowed_from_k_witch_hunters_order
		NOT = {
			has_character_flag = sent_son_to_witch_hunters
		}
		k_witch_hunters_order = {
			holder_scope = {
				ai = yes
			}
		}
		any_child = {
			is_female = no
			is_adult = yes
			is_ruler = no
			prisoner = no
			NOT = {
				trait = incapable
			}
			NOR = {
				has_character_modifier = magic_power_1
				has_character_modifier = magic_power_2
				has_character_modifier = magic_power_3
				has_character_modifier = magic_power_4
				trait = magic_potential_1
				trait = magic_potential_2
				trait = magic_potential_3
				trait = magic_potential_4
				trait = maimed
				trait = has_nurgles_rot
				trait = incapable
				trait = blinded
				trait = vampire_carstein_visible
				trait = vampire_blood_visible
				trait = vampire_lahmian_visible
				trait = vampire_strigoi_visible
				trait = vampire_necrarch_visible
				trait = vampire_mahtmasi_visible
				trait = vampire_jade_visible
				trait = mutation_minor
				trait = mutation_major
				trait = mutation_massive
			}
		}
		has_dlc = "Sons of Abraham"
	}

	mean_time_to_happen = {
		months = 120
	}

	immediate = {
		log = "work event id = swhunters.9"
		random_child = {
			limit = {
				is_female = no
				is_adult = yes
				is_ruler = no
				prisoner = no
				NOT = {
					trait = incapable
				}
				NOR = {
					has_character_modifier = magic_power_1
					has_character_modifier = magic_power_2
					has_character_modifier = magic_power_3
					has_character_modifier = magic_power_4
					trait = magic_potential_1
					trait = magic_potential_2
					trait = magic_potential_3
					trait = magic_potential_4
					trait = maimed
					trait = has_nurgles_rot
					trait = incapable
					trait = blinded
					trait = vampire_carstein_visible
					trait = vampire_blood_visible
					trait = vampire_lahmian_visible
					trait = vampire_strigoi_visible
					trait = vampire_necrarch_visible
					trait = vampire_mahtmasi_visible
					trait = vampire_jade_visible
					trait = mutation_minor
					trait = mutation_major
					trait = mutation_massive
				}
			}
			character_event = {
				id = swhunters.90001
			}
		}
	}

	option = {
		name = OK
	}
}

character_event = {
	id = swhunters.90001
	hide_window = yes
	is_triggered_only = yes

	immediate = {
		log = "work event id = swhunters.90001"
		k_witch_hunters_order = {
			holder_scope = {
				character_event = {
					id = swhunters.90002
				}
			}
		}
	}
}

character_event = {
	id = swhunters.90002
	hide_window = yes
	is_triggered_only = yes

	immediate = {
		log = "work event id = swhunters.90002"
		FROMFROM = {
			letter_event = {
				id = swhunters.90003
			}
		}
	}
}
letter_event = {
	id = swhunters.90003
	desc = EVTDESCswhunters90003
	border = GFX_event_letter_frame_religion
	is_triggered_only = yes

	immediate = {
		log = "work event id = swhunters.90003"
	}

	option = {
		name = EVTOPTA_SOA_1003 # Agree
		ai_chance = {
			factor = 90
		}
		set_character_flag = sent_son_to_witch_hunters
		piety = 100
		k_witch_hunters_order = {
			holder_scope = {
				FROMFROM = {
					move_character = PREV
					hidden_tooltip = {
						clear_wealth = PREV
					}
					spouse = {
						remove_spouse = spouse
						hidden_tooltip = {
							character_event = {
								id = SoA.2862
							}
						}
					}
					add_trait = witch_hunter
					culture = witchhunter_culture
					religion = sigmarite
					any_spouse = {
						remove_spouse = PREV
					}
					if = {
						limit = {
							trait = in_hiding
						}
						remove_trait = in_hiding
						clr_character_flag = do_not_disturb
						add_character_modifier = {
							name = went_out_of_hiding_timer
							duration = 180
							hidden = yes
						}
						hidden_tooltip = {
							character_event = {
								id = CM.6400
							}
						} # Notify plotters and family
					}
				}
			}
		}
	}

	option = {
		name = EVTOPTB_SOA_1003 # Pay them back
		wealth = -500
		hidden_tooltip = {
			remove_character_modifier = borrowed_from_k_witch_hunters_order
		}
		FROM = {
			wealth = 500
		}
		ai_chance = {
			factor = 100
		}
	}

	option = {
		name = EVTOPTC_SOA_1003 # Refuse
		piety = -1000
		ai_chance = {
			factor = 10
		}
	}
}

# The Grand Master demands the right to build a castle in your demesne (only AI, player uses decision)
character_event = {
	id = swhunters.10
	hide_window = yes
	only_playable = yes
	religion_group = old_world_group

	trigger = {
		OR = {
			religion = sigmarite
			religion = myrmidian
			religion = ulrican
			religion = taalite
			religion = shallyan
			religion = manannite
		}
		is_heretic = no
		has_character_modifier = borrowed_from_k_witch_hunters_order
		NOT = {
			has_character_flag = sent_son_to_witch_hunters
		}
		any_demesne_province = {
			has_empty_holding = yes
		}
		k_witch_hunters_order = {
			holder_scope = {
				ai = yes
				wealth = 300
			}
		}
		has_dlc = "Sons of Abraham"
		NOT = {
			has_character_modifier = expelled_k_witch_hunters_order
		}
		NOT = {
			any_liege = {
				has_character_modifier = expelled_k_witch_hunters_order
			}
		}
	}

	mean_time_to_happen = {
		months = 60
	}

	immediate = {
		log = "work event id = swhunters.10"
		random_demesne_province = {
			limit = {
				has_empty_holding = yes
			}
			province_event = {
				id = swhunters.11
			}
		}
	}

	option = {
		name = OK
	}
}
province_event = {
	id = swhunters.11
	hide_window = yes
	is_triggered_only = yes

	immediate = {
		log = "work event id = swhunters.11"
		k_witch_hunters_order = {
			holder_scope = {
				character_event = {
					id = swhunters.12
				}
			}
		}
	}
}

character_event = {
	id = swhunters.12
	hide_window = yes
	is_triggered_only = yes

	immediate = {
		log = "work event id = swhunters.12"
		FROMFROM = {
			letter_event = {
				id = swhunters.13
			}
		}
	}
}
letter_event = {
	id = swhunters.13
	desc = EVTDESCswhunters13
	border = GFX_event_letter_frame_religion
	is_triggered_only = yes

	immediate = {
		log = "work event id = swhunters.13"
	}

	option = {
		name = EVTOPTA_SOA_1023 # Agree
		ai_chance = {
			factor = 100
		}
		hidden_tooltip = {
			remove_character_modifier = borrowed_from_k_witch_hunters_order
			remove_character_modifier = expelled_k_witch_hunters_order
			FROMFROM = {
				province_event = {
					id = swhunters.14
				}
			}
		}
		piety = 100
	}

	option = {
		name = EVTOPTB_SOA_1003 # Pay them back
		wealth = -500
		hidden_tooltip = {
			remove_character_modifier = borrowed_from_k_witch_hunters_order
		}
		FROM = {
			wealth = 500
		}
	}

	option = {
		name = EVTOPTC_SOA_1003 # Refuse
		piety = -1000
	}
}

# Castle has been erected
province_event = {
	id = swhunters.14
	desc = EVTDESCswhunters14
	picture = GFX_evt_castle_construction
	border = GFX_event_normal_frame_religion
	is_triggered_only = yes

	immediate = {
		log = "work event id = swhunters.14"
		FROMFROM = {
			wealth = -300
		}
	}

	option = {
		name = EVTOPTA_SOA_1024
		build_holding = {
			type = castle
			holder = FROMFROM
		}
	}
}

# The Grand Master humbly requests the right to build a castle in your demesne
character_event = {
	id = swhunters.15
	hide_window = yes
	only_playable = yes
	religion_group = old_world_group

	trigger = {
		OR = {
			religion = sigmarite
			religion = myrmidian
			religion = ulrican
			religion = taalite
			religion = shallyan
			religion = manannite
		}
		is_heretic = no
		k_witch_hunters_order = {
			holder_scope = {
				ai = yes
				wealth = 300
				NOT = {
					realm_size = 10
				}
				NOT = {
					num_of_count_titles = 1
				}
			}
		}
		any_demesne_province = {
			has_empty_holding = yes
			region = world_old_world
		}
		has_dlc = "Sons of Abraham"
		NOT = {
			has_character_modifier = expelled_k_witch_hunters_order
		}
		NOT = {
			any_liege = {
				has_character_modifier = expelled_k_witch_hunters_order
			}
		}
	}

	mean_time_to_happen = {
		months = 240
		modifier = {
			factor = 0.5
			k_witch_hunters_order = {
				holder_scope = {
					NOT = {
						demesne_size = 1
					}
				}
			}
		}
		modifier = {
			factor = 0.5
			k_witch_hunters_order = {
				holder_scope = {
					NOT = {
						demesne_size = 2
					}
				}
			}
		}
		modifier = {
			factor = 2.0
			k_witch_hunters_order = {
				holder_scope = {
					realm_size = 5
				}
			}
		}
	}

	immediate = {
		log = "work event id = swhunters.15"
		random_demesne_province = {
			limit = {
				has_empty_holding = yes
				region = world_old_world
			}
			province_event = {
				id = swhunters.16
			}
		}
	}
}
province_event = {
	id = swhunters.16
	hide_window = yes
	is_triggered_only = yes

	immediate = {
		log = "work event id = swhunters.16"
		k_witch_hunters_order = {
			holder_scope = {
				character_event = {
					id = swhunters.17
				}
			}
		}
	}
}

character_event = {
	id = swhunters.17
	hide_window = yes
	is_triggered_only = yes

	immediate = {
		log = "work event id = swhunters.17"
		FROMFROM = {
			letter_event = {
				id = swhunters.18
			}
		}
	}
}
letter_event = {
	id = swhunters.18
	desc = EVTDESCswhunters18
	border = GFX_event_letter_frame_religion
	is_triggered_only = yes

	immediate = {
		log = "work event id = swhunters.18"
	}

	option = {
		name = EVTOPTA_SOA_1023 # Agree
		ai_chance = {
			factor = 80
			modifier = {
				factor = 0
				has_character_modifier = expelled_k_witch_hunters_order
			}
		}
		hidden_tooltip = {
			FROMFROM = {
				province_event = {
					id = swhunters.19
				}
			}
			remove_character_modifier = expelled_k_witch_hunters_order
		}
		piety = 200
		wealth = 100
	}

	option = {
		name = EVTOPTB_SOA_1031 # Refuse
		ai_chance = {
			factor = 20
		}
		piety = -100
	}
}

# Castle has been erected
province_event = {
	id = swhunters.19
	desc = EVTDESCswhunters19
	picture = GFX_evt_castle_construction
	border = GFX_event_normal_frame_religion
	is_triggered_only = yes

	immediate = {
		log = "work event id = swhunters.19"
		FROMFROM = {
			wealth = -300
		}
	}

	option = {
		name = EVTOPTA_SOA_1024
		build_holding = {
		 	type = castle
		 	holder = FROMFROM
		}
	}
}

# Requesting recruits and fortresses as a player
# Ping to possible recruit by player's decision
character_event = {
	id = swhunters.20
	hide_window = yes
	is_triggered_only = yes

	immediate = {
		log = "work event id = swhunters.20"
		liege = {
			letter_event = {
				id = swhunters.21
			}
		}
	}
}

# Liege receives request by player
letter_event = {
	id = swhunters.21
	desc = EVTDESCswhunters21
	border = GFX_event_letter_frame_religion
	is_triggered_only = yes

	immediate = {
		log = "work event id = swhunters.21"
	}

	option = {
		name = EVTOPTAswhunters21
		FROM = {
			add_trait = celibate	# He'll lose them once and if he becomes a Witch Hunter
			add_trait = disinherited
			move_character = FROMFROMFROM
		}
		FROMFROMFROM = {
			letter_event = {
				id = swhunters.21001
			}
		}
		ai_chance = {
			factor = 50
			modifier = {
				factor = 2.5
				has_character_modifier = borrowed_from_k_witch_hunters_order
				NOT = {
					wealth = 500
				}
			}
			modifier = {
				factor = 0
				has_character_modifier = borrowed_from_k_witch_hunters_order
				wealth = 500
			}
			modifier = {
				factor = 2.5
				has_character_modifier = borrowed_from_k_witch_hunters_order
			}
			modifier = {
				factor = 1.5
				trait = zealous
			}
			modifier = {
				factor = 1.25
				trait = greedy
			}
			modifier = {
				factor = 1.25
				trait = shy
			}
			modifier = {
				factor = 1.5
				religion = sigmarite
			}
			modifier = {
				factor = 1.5
				religion_group = old_world_group
			}
			modifier = {
				factor = 0.15
				current_heir = {
					character = FROM
				}
			}
			modifier = {
				factor = 0.15
				any_spouse = {
					character = FROM
				}
			}
			modifier = {
				factor = 0.15
				mother = {
					character = FROM
				}
			}
			modifier = {
				factor = 0.15
				father = {
					character = FROM
				}
			}
			modifier = {
				factor = 0.05
				any_lover = {
					character = FROM
				}
			}
			modifier = {
				factor = 0.25
				any_friend = {
					character = FROM
				}
			}
			modifier = {
				factor = 0.25
				NOT = {
					opinion = {
						who = FROMFROMFROM
						value = -95
					}
				}
			}
			modifier = {
				factor = 0.5
				NOT = {
					opinion = {
						who = FROMFROMFROM
						value = -75
					}
				}
			}
			modifier = {
				factor = 0.5
				NOT = {
					opinion = {
						who = FROMFROMFROM
						value = -50
					}
				}
			}
			modifier = {
				factor = 0.75
				NOT = {
					opinion = {
						who = FROMFROMFROM
						value = -25
					}
				}
			}
			modifier = {
				factor = 1.25
				opinion = {
					who = FROMFROMFROM
					value = 25
				}
			}
			modifier = {
				factor = 1.25
				opinion = {
					who = FROMFROMFROM
					value = 50
				}
			}
			modifier = {
				factor = 1.5
				opinion = {
					who = FROMFROMFROM
					value = 75
				}
			}
			modifier = {
				factor = 1.75
				opinion = {
					who = FROMFROMFROM
					value = 100
				}
			}
		}
	}

	option = {
		name = EVTOPTBswhunters21
		trigger = {
			has_character_modifier = borrowed_from_k_witch_hunters_order
			wealth = 500
		}
		FROMFROMFROM = {
			letter_event = {
				id = swhunters.21002
			}
		}
		wealth = -500
		remove_character_modifier = borrowed_from_k_witch_hunters_order
		ai_chance = {
			factor = 75
			modifier = {
				factor = 0
				religion_group = chaos_gods_group
			}
			modifier = {
				factor = 0.25
				NOT = {
					opinion = {
						who = FROMFROMFROM
						value = -95
					}
				}
			}
			modifier = {
				factor = 0.5
				NOT = {
					opinion = {
						who = FROMFROMFROM
						value = -75
					}
				}
			}
			modifier = {
				factor = 0.5
				NOT = {
					opinion = {
						who = FROMFROMFROM
						value = -50
					}
				}
			}
			modifier = {
				factor = 0.75
				NOT = {
					opinion = {
						who = FROMFROMFROM
						value = -25
					}
				}
			}
			modifier = {
				factor = 1.25
				opinion = {
					who = FROMFROMFROM
					value = 25
				}
			}
			modifier = {
				factor = 1.25
				opinion = {
					who = FROMFROMFROM
					value = 50
				}
			}
			modifier = {
				factor = 1.5
				opinion = {
					who = FROMFROMFROM
					value = 75
				}
			}
			modifier = {
				factor = 1.75
				opinion = {
					who = FROMFROMFROM
					value = 100
				}
			}
		}
	}

	option = {
		name = EVTOPTCswhunters21
		increase_visibility_minor_effect = yes
		if = {
			limit = {
				religion = sigmarite
			}
			piety = -1000
		}
		if = {
			limit = {
				NOT = {
					religion = sigmarite
				}
				religion_group = old_world_group
			}
			piety = -500
		}
		if = {
			limit = {
				NOT = {
					religion_group = old_world_group
				}
				NOT = {
					religion_group = chaos_gods_group
				}
			}
			piety = -250
		}
		if = {
			limit = {
				religion_group = chaos_gods_group
			}
			piety = 150
		}
		FROMFROMFROM = {
			letter_event = {
				id = swhunters.21003
			}
		}
		ai_chance = {
			factor = 50
			modifier = {
				factor = 1.85
				NOT = {
					religion_group = old_world_group
				}
			}
			modifier = {
				factor = 3
				religion_group = chaos_gods_group
			}
			modifier = {
				factor = 1.5
				OR = {
					has_character_modifier = magic_power_1
					has_character_modifier = magic_power_2
					has_character_modifier = magic_power_3
					has_character_modifier = magic_power_4
					trait = magic_potential_1
					trait = magic_potential_2
					trait = magic_potential_3
					trait = magic_potential_4
					trait = maimed
					trait = has_nurgles_rot
					trait = incapable
					trait = blinded
					trait = vampire_carstein_visible
					trait = vampire_blood_visible
					trait = vampire_lahmian_visible
					trait = vampire_strigoi_visible
					trait = vampire_necrarch_visible
					trait = vampire_mahtmasi_visible
					trait = vampire_jade_visible
					trait = vampire_carstein_hidden
					trait = vampire_blood_hidden
					trait = vampire_lahmian_hidden
					trait = vampire_strigoi_hidden
					trait = vampire_necrarch_hidden
					trait = vampire_mahtmasi_hidden
					trait = vampire_jade_hidden
					society_member_of = cult_of_khorne
					society_member_of = cult_of_nurgle
					society_member_of = cult_of_slaanesh
					society_member_of = cult_of_tzeentch
					trait = mutation_minor
					trait = mutation_major
					trait = mutation_massive
				}
			}
		}
	}
}

# Accepted request, courtier arrives
letter_event = {
	id = swhunters.21001
	desc = EVTDESCswhunters21001
	border = GFX_event_letter_frame_religion
	is_triggered_only = yes

	immediate = {
		log = "work event id = swhunters.21001"
	}

	option = {
		name = EVTOPTAswhunters21001
	}
}

# Denied request, exstinguished debt instead
letter_event = {
	id = swhunters.21002
	desc = EVTDESCswhunters21002
	border = GFX_event_letter_frame_religion
	is_triggered_only = yes

	immediate = {
		log = "work event id = swhunters.21002"
	}

	option = {
		name = EVTOPTAswhunters21002
		wealth = 500
	}
}

# Denied request
letter_event = {
	id = swhunters.21003
	desc = EVTDESCswhunters21003
	border = GFX_event_letter_frame_religion
	is_triggered_only = yes

	immediate = {
		log = "work event id = swhunters.21003"
	}

	option = {
		name = EVTOPTAswhunters21003
	}
}

# Ping to possible castle province by player's decision
province_event = {
	id = swhunters.22
	hide_window = yes
	is_triggered_only = yes

	immediate = {
		log = "work event id = swhunters.22"
		owner = {
			letter_event = {
				id = swhunters.23
			}
		}
	}
}

# Liege receives request by player
letter_event = {
	id = swhunters.23
	desc = EVTDESCswhunters23
	border = GFX_event_letter_frame_religion
	is_triggered_only = yes

	immediate = {
		log = "work event id = swhunters.23"
	}

	option = {
		name = EVTOPTAswhunters23
		FROM = {
			build_holding = {
		 		type = castle
		 		holder = FROMFROMFROM
			}
		}
		FROMFROMFROM = {
			letter_event = {
				id = swhunters.23001
			}
		}
		ai_chance = {
			factor = 50
			modifier = {
				factor = 2.5
				has_character_modifier = borrowed_from_k_witch_hunters_order
				NOT = {
					wealth = 500
				}
			}
			modifier = {
				factor = 0
				has_character_modifier = borrowed_from_k_witch_hunters_order
				wealth = 500
			}
			modifier = {
				factor = 2.5
				has_character_modifier = borrowed_from_k_witch_hunters_order
			}
			modifier = {
				factor = 1.5
				trait = zealous
			}
			modifier = {
				factor = 1.25
				trait = greedy
			}
			modifier = {
				factor = 1.25
				trait = shy
			}
			modifier = {
				factor = 1.5
				religion = sigmarite
			}
			modifier = {
				factor = 1.5
				religion_group = old_world_group
			}
			modifier = {
				factor = 0.25
				FROM = {
					is_capital = yes
				}
			}
			modifier = {
				factor = 0.25
				NOT = {
					opinion = {
						who = FROMFROMFROM
						value = -95
					}
				}
			}
			modifier = {
				factor = 0.5
				NOT = {
					opinion = {
						who = FROMFROMFROM
						value = -75
					}
				}
			}
			modifier = {
				factor = 0.5
				NOT = {
					opinion = {
						who = FROMFROMFROM
						value = -50
					}
				}
			}
			modifier = {
				factor = 0.75
				NOT = {
					opinion = {
						who = FROMFROMFROM
						value = -25
					}
				}
			}
			modifier = {
				factor = 1.25
				opinion = {
					who = FROMFROMFROM
					value = 25
				}
			}
			modifier = {
				factor = 1.25
				opinion = {
					who = FROMFROMFROM
					value = 50
				}
			}
			modifier = {
				factor = 1.5
				opinion = {
					who = FROMFROMFROM
					value = 75
				}
			}
			modifier = {
				factor = 1.75
				opinion = {
					who = FROMFROMFROM
					value = 100
				}
			}
		}
	}

	option = {
		name = EVTOPTBswhunters23
		trigger = {
			has_character_modifier = borrowed_from_k_witch_hunters_order
			wealth = 500
		}
		FROMFROMFROM = {
			letter_event = {
				id = swhunters.23002
			}
		}
		wealth = -500
		remove_character_modifier = borrowed_from_k_witch_hunters_order
		ai_chance = {
			factor = 75
			modifier = {
				factor = 0
				religion_group = chaos_gods_group
			}
			modifier = {
				factor = 0.25
				NOT = {
					opinion = {
						who = FROMFROMFROM
						value = -95
					}
				}
			}
			modifier = {
				factor = 0.5
				NOT = {
					opinion = {
						who = FROMFROMFROM
						value = -75
					}
				}
			}
			modifier = {
				factor = 0.5
				NOT = {
					opinion = {
						who = FROMFROMFROM
						value = -50
					}
				}
			}
			modifier = {
				factor = 0.75
				NOT = {
					opinion = {
						who = FROMFROMFROM
						value = -25
					}
				}
			}
			modifier = {
				factor = 1.25
				opinion = {
					who = FROMFROMFROM
					value = 25
				}
			}
			modifier = {
				factor = 1.25
				opinion = {
					who = FROMFROMFROM
					value = 50
				}
			}
			modifier = {
				factor = 1.5
				opinion = {
					who = FROMFROMFROM
					value = 75
				}
			}
			modifier = {
				factor = 1.75
				opinion = {
					who = FROMFROMFROM
					value = 100
				}
			}
		}
	}

	option = {
		name = EVTOPTCswhunters23
		increase_visibility_minor_effect = yes
		if = {
			limit = {
				religion = sigmarite
			}
			piety = -1000
		}
		if = {
			limit = {
				NOT = {
					religion = sigmarite
				}
				religion_group = old_world_group
			}
			piety = -500
		}
		if = {
			limit = {
				NOT = {
					religion_group = old_world_group
				}
				NOT = {
					religion_group = chaos_gods_group
				}
			}
			piety = -250
		}
		if = {
			limit = {
				religion_group = chaos_gods_group
			}
			piety = 150
		}
		FROMFROMFROM = {
			letter_event = {
				id = swhunters.23003
			}
		}
		ai_chance = {
			factor = 50
			modifier = {
				factor = 1.85
				NOT = {
					religion_group = old_world_group
				}
			}
			modifier = {
				factor = 3
				religion_group = chaos_gods_group
			}
			modifier = {
				factor = 1.5
				OR = {
					has_character_modifier = magic_power_1
					has_character_modifier = magic_power_2
					has_character_modifier = magic_power_3
					has_character_modifier = magic_power_4
					trait = magic_potential_1
					trait = magic_potential_2
					trait = magic_potential_3
					trait = magic_potential_4
					trait = maimed
					trait = has_nurgles_rot
					trait = incapable
					trait = blinded
					trait = vampire_carstein_visible
					trait = vampire_blood_visible
					trait = vampire_lahmian_visible
					trait = vampire_strigoi_visible
					trait = vampire_necrarch_visible
					trait = vampire_mahtmasi_visible
					trait = vampire_jade_visible
					trait = vampire_carstein_hidden
					trait = vampire_blood_hidden
					trait = vampire_lahmian_hidden
					trait = vampire_strigoi_hidden
					trait = vampire_necrarch_hidden
					trait = vampire_mahtmasi_hidden
					trait = vampire_jade_hidden
					society_member_of = cult_of_khorne
					society_member_of = cult_of_nurgle
					society_member_of = cult_of_slaanesh
					society_member_of = cult_of_tzeentch
					trait = mutation_minor
					trait = mutation_major
					trait = mutation_massive
				}
			}
		}
	}
}

# Accepted request, castle is built
letter_event = {
	id = swhunters.23001
	desc = EVTDESCswhunters23001
	border = GFX_event_letter_frame_religion
	is_triggered_only = yes

	immediate = {
		log = "work event id = swhunters.23001"
	}

	option = {
		name = EVTOPTAswhunters23001
		wealth = -500
	}
}

# Denied request, exstinguished debt instead
letter_event = {
	id = swhunters.23002
	desc = EVTDESCswhunters23002
	border = GFX_event_letter_frame_religion
	is_triggered_only = yes

	immediate = {
		log = "work event id = swhunters.23002"
	}

	option = {
		name = EVTOPTAswhunters23002
		wealth = 500
	}
}

# Denied request
letter_event = {
	id = swhunters.23003
	desc = EVTDESCswhunters23003
	border = GFX_event_letter_frame_religion
	is_triggered_only = yes

	immediate = {
		log = "work event id = swhunters.23003"
	}

	option = {
		name = EVTOPTAswhunters23003
	}
}

# Witch Hunters join your war for free
letter_event = {
	id = swhunters.24
	desc = EVTDESCswhunters24
	border = GFX_event_letter_frame_religion
	is_triggered_only = yes

	immediate = {
		log = "work event id = swhunters.24"
	}

	option = {
		name = EVTOPTAswhunters24
	}
}

# Witch Hunters refuse to join war
letter_event = {
	id = swhunters.24001
	desc = EVTDESCswhunters240001
	border = GFX_event_letter_frame_religion
	is_triggered_only = yes

	immediate = {
		log = "work event id = swhunters.24001"
	}

	option = {
		name = EVTOPTAswhunters240001
		wealth = 50
	}
}

# Realm asks for help in a war
letter_event = {
	id = swhunters.25
	desc = EVTDESCswhunters25
	border = GFX_event_letter_frame_religion
	is_triggered_only = yes

	immediate = {
		log = "work event id = swhunters.25"
	}

	option = {
		name = EVTOPTDswhunters25
		join_defender_wars = FROM
		join_attacker_wars = FROM
		piety = 100
		wealth = 50
		opinion = {
			modifier = opinion_asked_assistance
			who = FROM
			years = 15
		}
		FROM = {
			letter_event = {
				id = swhunters.24 days = 1
			}
		}
		ai_chance = {
			factor = 50
			modifier = {
				factor = 1.5		# help pious ruler
				FROM = {
					has_character_modifier = donated_to_holy_order
				}
			}
			modifier = {
				factor = 0.1	# I think you've got that
				FROM = {
					any_war = {
						attacker = {
							war_score = -10
						}
					}
				}
			}
			modifier = {
				factor = 0.25	# I think you've got that
				FROM = {
					any_war = {
						defender = {
							war_score = 30
						}
					}
				}
			}
			modifier = {
				factor = 2 # Hold thight, we're coming!
				FROM = {
					any_war = {
						defender = {
							NOT = {
								war_score = -30
							}
						}
					}
				}
			}
			modifier = {
				factor = 0.75
				NOT = {
					opinion = {
						who = FROM
						value = 0
					}
				}
			}
			modifier = {
				factor = 0.5
				FROM = {
					NOT = {
						religion = sigmarite
					}
				}
			}
			modifier = {
				factor = 0.15
				FROM = {
					OR = {
						has_character_modifier = magic_power_1
						has_character_modifier = magic_power_2
						has_character_modifier = magic_power_3
						has_character_modifier = magic_power_4
					}
				}
			}
		}
	}

	option = {
		name = EVTOPTCswhunters25
		piety = -150
		FROM = {
			letter_event = {
				id = swhunters.24001 days = 1
			}
		}
		ai_chance = {
			factor = 50
			modifier = {
				factor = 1.75		# I've got my own problems
				any_war = {
					defender = {
						NOT = {
							war_score = 10
						}
					}
				}
			}
			modifier = {
				factor = 1.25		# I've got my own problems
				war = yes
			}
			modifier = {
				factor = 0.75
				FROM = {
					has_character_modifier = donated_to_holy_order
				}
			}
			modifier = {
				factor = 0.85
				FROM = {
					piety = 500
				}
			}
			modifier = {
				factor = 0.75
				FROM = {
					piety = 1000
				}
			}
			modifier = {
				factor = 0.5
				FROM = {
					piety = 1500
				}
			}
			modifier = {
				factor = 0.85
				is_friend = FROM
			}
			modifier = {
				factor = 0.75
				is_lover = FROM
			}
			modifier = {
				factor = 0.95
				opinion = {
					who = FROM
					value = 20
				}
			}
			modifier = {
				factor = 0.85
				opinion = {
					who = FROM
					value = 40
				}
			}
			modifier = {
				factor = 0.85
				opinion = {
					who = FROM
					value = 60
				}
			}
			modifier = {
				factor = 0.85
				opinion = {
					who = FROM
					value = 80
				}
			}
			modifier = {
				factor = 0.85
				opinion = {
					who = FROM
					value = 100
				}
			}
			modifier = {
				factor = 1.25
				NOT = {
					opinion = {
						who = FROM
						value = 0
					}
				}
			}
			modifier = {
				factor = 1.25
				NOT = {
					opinion = {
						who = FROM
						value = -20
					}
				}
			}
			modifier = {
				factor = 1.25
				NOT = {
					opinion = {
						who = FROM
						value = -40
					}
				}
			}
			modifier = {
				factor = 1.5
				NOT = {
					opinion = {
						who = FROM
						value = -60
					}
				}
			}
			modifier = {
				factor = 1.5
				NOT = {
					opinion = {
						who = FROM
						value = -80
					}
				}
			}
			modifier = {
				factor = 1.5
				NOT = {
					opinion = {
						who = FROM
						value = -100
					}
				}
			}
		}
	}
}

# Asking to investigate in a province
# Ping to possible castle province by player's decision
province_event = {
	id = swhunters.26
	hide_window = yes
	is_triggered_only = yes

	immediate = {
		log = "work event id = swhunters.26"
		owner = {
			letter_event = {
				id = swhunters.27
			}
		}
	}
}

# Liege receives request by player
letter_event = {
	id = swhunters.27
	desc = EVTDESCswhunters27
	border = GFX_event_letter_frame_religion
	is_triggered_only = yes

	immediate = {
		log = "work event id = swhunters.27"
	}

	option = {
		name = EVTOPTAswhunters27
		FROMFROMFROM = {
			random_courtier = {
				limit = {
					is_ruler = no
					trait = witch_hunter
				}
				letter_event = {
					id = swhunters.28
				}
				move_character = ROOT
			}
		}
		FROMFROMFROM = {
			letter_event = {
				id = swhunters.27001
			}
		}
		ai_chance = {
			factor = 50
			modifier = {
				factor = 2.5
				has_character_modifier = borrowed_from_k_witch_hunters_order
				NOT = {
					wealth = 500
				}
			}
			modifier = {
				factor = 0
				has_character_modifier = borrowed_from_k_witch_hunters_order
				wealth = 500
			}
			modifier = {
				factor = 2.5
				has_character_modifier = borrowed_from_k_witch_hunters_order
			}
			modifier = {
				factor = 1.5
				trait = zealous
			}
			modifier = {
				factor = 1.25
				trait = greedy
			}
			modifier = {
				factor = 1.25
				trait = shy
			}
			modifier = {
				factor = 1.5
				religion = sigmarite
			}
			modifier = {
				factor = 1.5
				religion_group = old_world_group
			}
			modifier = {
				factor = 0.25
				FROM = {
					is_capital = yes
				}
			}
			modifier = {
				factor = 0.25
				NOT = {
					opinion = {
						who = FROMFROMFROM
						value = -95
					}
				}
			}
			modifier = {
				factor = 0.5
				NOT = {
					opinion = {
						who = FROMFROMFROM
						value = -75
					}
				}
			}
			modifier = {
				factor = 0.5
				NOT = {
					opinion = {
						who = FROMFROMFROM
						value = -50
					}
				}
			}
			modifier = {
				factor = 0.75
				NOT = {
					opinion = {
						who = FROMFROMFROM
						value = -25
					}
				}
			}
			modifier = {
				factor = 1.25
				opinion = {
					who = FROMFROMFROM
					value = 25
				}
			}
			modifier = {
				factor = 1.25
				opinion = {
					who = FROMFROMFROM
					value = 50
				}
			}
			modifier = {
				factor = 1.5
				opinion = {
					who = FROMFROMFROM
					value = 75
				}
			}
			modifier = {
				factor = 1.75
				opinion = {
					who = FROMFROMFROM
					value = 100
				}
			}
		}
	}

	option = {
		name = EVTOPTBswhunters27
		trigger = {
			has_character_modifier = borrowed_from_k_witch_hunters_order
			wealth = 500
		}
		FROMFROMFROM = {
			letter_event = {
				id = swhunters.27002
			}
		}
		wealth = -500
		remove_character_modifier = borrowed_from_k_witch_hunters_order
		ai_chance = {
			factor = 75
			modifier = {
				factor = 0
				religion_group = chaos_gods_group
			}
			modifier = {
				factor = 0.25
				NOT = {
					opinion = {
						who = FROMFROMFROM
						value = -95
					}
				}
			}
			modifier = {
				factor = 0.5
				NOT = {
					opinion = {
						who = FROMFROMFROM
						value = -75
					}
				}
			}
			modifier = {
				factor = 0.5
				NOT = {
					opinion = {
						who = FROMFROMFROM
						value = -50
					}
				}
			}
			modifier = {
				factor = 0.75
				NOT = {
					opinion = {
						who = FROMFROMFROM
						value = -25
					}
				}
			}
			modifier = {
				factor = 1.25
				opinion = {
					who = FROMFROMFROM
					value = 25
				}
			}
			modifier = {
				factor = 1.25
				opinion = {
					who = FROMFROMFROM
					value = 50
				}
			}
			modifier = {
				factor = 1.5
				opinion = {
					who = FROMFROMFROM
					value = 75
				}
			}
			modifier = {
				factor = 1.75
				opinion = {
					who = FROMFROMFROM
					value = 100
				}
			}
		}
	}

	option = {
		name = EVTOPTCswhunters27
		increase_visibility_minor_effect = yes
		if = {
			limit = {
				religion = sigmarite
			}
			piety = -1000
		}
		if = {
			limit = {
				NOT = {
					religion = sigmarite
				}
				religion_group = old_world_group
			}
			piety = -500
		}
		if = {
			limit = {
				NOT = {
					religion_group = old_world_group
				}
				NOT = {
					religion_group = chaos_gods_group
				}
			}
			piety = -250
		}
		if = {
			limit = {
				religion_group = chaos_gods_group
			}
			piety = 150
		}
		FROMFROMFROM = {
			letter_event = {
				id = swhunters.27003
			}
		}
		ai_chance = {
			factor = 50
			modifier = {
				factor = 1.85
				NOT = {
					religion_group = old_world_group
				}
			}
			modifier = {
				factor = 3
				religion_group = chaos_gods_group
			}
			modifier = {
				factor = 0.35
				religion = sigmarite
			}
			modifier = {
				factor = 1.5
				OR = {
					has_character_modifier = magic_power_1
					has_character_modifier = magic_power_2
					has_character_modifier = magic_power_3
					has_character_modifier = magic_power_4
					trait = magic_potential_1
					trait = magic_potential_2
					trait = magic_potential_3
					trait = magic_potential_4
					trait = maimed
					trait = has_nurgles_rot
					trait = incapable
					trait = blinded
					trait = vampire_carstein_visible
					trait = vampire_blood_visible
					trait = vampire_lahmian_visible
					trait = vampire_strigoi_visible
					trait = vampire_necrarch_visible
					trait = vampire_mahtmasi_visible
					trait = vampire_jade_visible
					trait = vampire_carstein_hidden
					trait = vampire_blood_hidden
					trait = vampire_lahmian_hidden
					trait = vampire_strigoi_hidden
					trait = vampire_necrarch_hidden
					trait = vampire_mahtmasi_hidden
					trait = vampire_jade_hidden
					society_member_of = cult_of_khorne
					society_member_of = cult_of_nurgle
					society_member_of = cult_of_slaanesh
					society_member_of = cult_of_tzeentch
					trait = mutation_minor
					trait = mutation_major
					trait = mutation_massive
				}
			}
		}
	}
}

# Accepted request
letter_event = {
	id = swhunters.27001
	desc = EVTDESCswhunters27001
	border = GFX_event_letter_frame_religion
	is_triggered_only = yes

	immediate = {
		log = "work event id = swhunters.27001"
	}

	option = {
		name = EVTOPTAswhunters27001
	}
}

# Denied request, exstinguished debt instead
letter_event = {
	id = swhunters.27002
	desc = EVTDESCswhunters27002
	border = GFX_event_letter_frame_religion
	is_triggered_only = yes

	immediate = {
		log = "work event id = swhunters.27002"
	}

	option = {
		name = EVTOPTAswhunters27002
		wealth = 500
	}
}

# Denied request
letter_event = {
	id = swhunters.27003
	desc = EVTDESCswhunters27003
	border = GFX_event_letter_frame_religion
	is_triggered_only = yes

	immediate = {
		log = "work event id = swhunters.27003"
	}

	option = {
		name = EVTOPTAswhunters27003
	}
}

# Agent receives message and goes on mission
letter_event = {
	id = swhunters.28
	desc = EVTDESCswhunters28
	border = GFX_event_letter_frame_religion
	is_triggered_only = yes

	immediate = {
		log = "work event id = swhunters.28"
	}

	option = {
		name = EVTOPTAswhunters28
		random_list = {
			60 = {
				modifier = {
					factor = 1.5
					trait = paranoid
				}
				modifier = {
					factor = 0.5
					NOT = {
						intrigue = 10
					}
				}
				modifier = {
					factor = 1.5
					intrigue = 15
				}
				modifier = {
					factor = 1.5
					intrigue = 20
				}
				modifier = {
					factor = 1.5
					learning = 10
				}
				modifier = {
					factor = 1.5
					learning = 15
				}
				modifier = {
					factor = 1.5
					learning = 20
				}
				modifier = {
					factor = 1.5
					trait = bright
				}
				modifier = {
					factor = 1.65
					trait = smart
				}
				modifier = {
					factor = 1.75
					trait = quick
				}
				modifier = {
					factor = 1.85
					trait = brilliant
				}
				modifier = {
					factor = 1.95
					trait = genius
				}
				modifier = {
					factor = 0.95
					trait = dim
				}
				modifier = {
					factor = 0.85
					trait = dumb
				}
				modifier = {
					factor = 0.75
					trait = slow
				}
				modifier = {
					factor = 0.65
					trait = idiot
				}
				modifier = {
					factor = 0.5
					trait = imbecile
				}
				modifier = {
					factor = 0.5
					trait = trusting
				}
				modifier = {
					factor = 0.85
					trait = just
				}
				modifier = {
					factor = 0.85
					trait = lunatic_1
				}
				modifier = {
					factor = 0.75
					trait = lunatic_2
				}
				modifier = {
					factor = 0.5
					trait = lunatic_3
				}
				piety = 150
				prestige = 50
				FROMFROM = {
					province_event = {
						id = swhunters.28001 days = 150
					}
				}
				FROMFROMFROMFROM = {
					letter_event = {
						id = swhunters.28002 days = 150
					}
				}
			}
			40 = {
				modifier = {
					factor = 0
					location = {
						NOR = {
							has_province_modifier = nurgle_province_disease
							has_province_modifier = beastmen_unrest
							has_province_modifier = warpdust_traces
							has_province_modifier = slaanesh_hedonism
							has_province_modifier = warpstone_meteor
							has_province_modifier = lahmian_presence
						}
					}
					location = {
						owner = {
							NOR = {
								society_member_of = cult_of_khorne
								society_member_of = cult_of_nurgle
								society_member_of = cult_of_slaanesh
								society_member_of = cult_of_tzeentch
							}
						}
					}
				}
				if = {
					limit = {
						is_invincible_trigger = yes
					}
					antideath_effect = yes
					break = yes
				}
				death = {
					death_reason = death_murder_unknown
				}
				FROMFROMFROMFROM = {
					letter_event = {
						id = swhunters.28003 days = 150
					}
				}
			}
		}
	}
}

# Province has been ridden of any evil presence
province_event = {
	id = swhunters.28001
	desc = EVTDESCswhunters28001
	picture = GFX_evt_witch_hunters

	trigger = {
		OR = {
			has_province_modifier = nurgle_province_disease
			has_province_modifier = beastmen_unrest
			has_province_modifier = warpdust_traces
			has_province_modifier = slaanesh_hedonism
			has_province_modifier = warpstone_meteor
			has_province_modifier = lahmian_presence
		}
	}
	is_triggered_only = yes

	immediate = {
		log = "work event id = swhunters.28001"
	}

	option = {
		name = EVTOPTAswhunters28001
		hidden_tooltip = {
			remove_province_modifier = nurgle_province_disease
			remove_province_modifier = beastmen_unrest
			remove_province_modifier = warpdust_traces
			remove_province_modifier = slaanesh_hedonism
			remove_province_modifier = warpstone_meteor
			remove_province_modifier = lahmian_presence
		}
	}
}

# Agent has finished with the provincial cleansing and asks to proceed further with his suspects
letter_event = {
	id = swhunters.28002
	desc = EVTDESCswhunters28002
	border = GFX_event_letter_frame_religion
	is_triggered_only = yes

	trigger = {
		FROM = {
			is_alive = yes
		}
	}

	immediate = {
		log = "work event id = swhunters.28002"
	}

	option = {
		# Find and burn any heretic and corrupt in the province
		name = EVTOPTAswhunters28002
		hidden_tooltip = {
			character_event = {
				id = swhunters.31 days = 70
			}
			FROM = {
				liege = {
					character_event = {
						id = swhunters.29 days = 30 random = 30
					}
					any_courtier = {
						character_event = {
							id = swhunters.29 days = 30 random = 30
						}
					}
				}
			}

		}
	}

	option = {
		# Find and catch any heretic and corrupt in the province
		name = EVTOPTBswhunters28002
		hidden_tooltip = {
			character_event = {
				id = swhunters.32 days = 70
			}
			FROM = {
				liege = {
					character_event = {
						id = swhunters.30 days = 30 random = 30
					}
					any_courtier = {
						character_event = {
							id = swhunters.30 days = 30 random = 30
						}
					}
				}
			}

		}
	}

	option = {
		# Return
		name = EVTOPTCswhunters28002
		FROM = {
			move_character = ROOT
			remove_trait = on_witch_hunt
		}
	}
}

# The Agent was killed
letter_event = {
	id = swhunters.28003
	desc = EVTDESCswhunters28003
	border = GFX_event_letter_frame_religion
	is_triggered_only = yes

	immediate = {
		log = "work event id = swhunters.28003"
	}

	option = {
		name = EVTOPTAswhunters28003
		piety = -50
	}
}

# Witch Hunter bust!
character_event = {
	id = swhunters.29
	hide_window = yes

	trigger = {
		NOT = {
			character = FROM
		}
		NOT = {
			character = FROMFROM
		}
		FROMFROM = {
			is_alive = yes
		}
		OR = {
 			trait = magic_potential_1
			trait = magic_potential_2
			trait = magic_potential_3
			trait = magic_potential_4
			has_character_flag = magic_potential_1
			has_character_flag = magic_potential_2
			has_character_flag = magic_potential_3
			has_character_flag = magic_potential_4
			has_character_modifier = magic_power_1
			has_character_modifier = magic_power_2
			has_character_modifier = magic_power_3
			has_character_modifier = magic_power_4
			intrigue = 20
			trait = elusive_shadow
			trait = mystic
			trait = hunchback
			trait = dwarf
			trait = stutter
			trait = harelip
			trait = seducer
			trait = seductress
			trait = monstrous
			trait = beautiful
			trait = unsightly
			trait = creature_toad
			trait = creature_pig
			trait = homosexual
			trait = transgender
			trait = shy
			trait = addict
			trait = hedonist
			religion_group = chaos_gods_group
			trait = vampire_carstein_visible
			trait = vampire_blood_visible
			trait = vampire_lahmian_visible
			trait = vampire_necrarch_visible
			trait = vampire_strigoi_visible
			trait = vampire_mahtmasi_visible
			trait = vampire_jade_visible
			trait = vampire_carstein_hidden
			trait = vampire_blood_hidden
			trait = vampire_lahmian_hidden
			trait = vampire_necrarch_hidden
			trait = vampire_strigoi_hidden
			trait = vampire_mahtmasi_hidden
			trait = vampire_jade_hidden
			trait = lunatic_1
			trait = lunatic_2
			trait = lunatic_3
			society_member_of = cult_of_khorne
			society_member_of = cult_of_nurgle
			society_member_of = cult_of_slaanesh
			society_member_of = cult_of_tzeentch
			society_member_of = cult_of_undivided
			trait = mutation_minor
			trait = mutation_major
			trait = mutation_massive
		}
	}
	is_triggered_only = yes

	immediate = {
		log = "work event id = swhunters.29"
		random_list = {
			60 = {
				modifier = {
					factor = 5
					has_character_modifier = known_satanist
				}
				modifier = {
					factor = 2.5
					has_character_modifier = highly_suspect
				}
				modifier = {
					factor = 1.5
					has_character_modifier = under_suspicion
				}
				if = {
					limit = {
						is_invincible_trigger = yes

					}
					antideath_effect = yes
					break = yes
				}
				add_trait = staked
				death = {
					death_reason = death_execution_burning
					killer = FROM
				}
				if = {
					limit = {
						OR = {
							society_member_of = cult_of_khorne
							society_member_of = cult_of_nurgle
							society_member_of = cult_of_slaanesh
							society_member_of = cult_of_tzeentch
							society_member_of = cult_of_undivided
						}
							  set_discovered_society = yes
					}
				}
				liege = {
					opinion = {
						modifier = opinion_meddling_hunters
						who = FROM
						years = 3
					}
					opinion = {
						modifier = opinion_meddling_hunters
						who = FROMFROM
						years = 5
					}
				}
			}
			40 = {
				# Safe!
				modifier = {
					factor = 1.85
					OR = {
						trait = vampire_carstein_visible
						trait = vampire_blood_visible
						trait = vampire_lahmian_visible
						trait = vampire_necrarch_visible
						trait = vampire_strigoi_visible
						trait = vampire_mahtmasi_visible
						trait = vampire_jade_visible
						trait = vampire_carstein_hidden
						trait = vampire_blood_hidden
						trait = vampire_lahmian_hidden
						trait = vampire_necrarch_hidden
						trait = vampire_strigoi_hidden
						trait = vampire_mahtmasi_hidden
						trait = vampire_jade_hidden
					}
				}
				modifier = {
					factor = 1.75
					OR = {
						has_character_modifier = magic_power_3
						has_character_modifier = magic_power_4
					}
				}
				modifier = {
					factor = 1.75
					trait = genius
				}
				modifier = {
					factor = 1.5
					trait = paranoid
				}
				modifier = {
					factor = 0.75
					trait = drunkard
				}
				modifier = {
					factor = 0.5
					trait = addict
				}
				modifier = {
					factor = 0.5
					trait = imbecile
				}
				modifier = {
					factor = 0.5
					trait = gregarious
				}
			}
		}
	}
}

# Witch Hunter bust! - Imprisoning
character_event = {
	id = swhunters.30
	hide_window = yes

	trigger = {
		NOT = {
			character = FROM
		}
		NOT = {
			character = FROMFROM
		}
		FROMFROM = {
			is_alive = yes
		}
		OR = {
 			trait = magic_potential_1
			trait = magic_potential_2
			trait = magic_potential_3
			trait = magic_potential_4
			has_character_flag = magic_potential_1
			has_character_flag = magic_potential_2
			has_character_flag = magic_potential_3
			has_character_flag = magic_potential_4
			has_character_modifier = magic_power_1
			has_character_modifier = magic_power_2
			has_character_modifier = magic_power_3
			has_character_modifier = magic_power_4
			intrigue = 20
			trait = elusive_shadow
			trait = mystic
			trait = hunchback
			trait = dwarf
			trait = stutter
			trait = harelip
			trait = seducer
			trait = seductress
			trait = monstrous
			trait = beautiful
			trait = unsightly
			trait = creature_toad
			trait = creature_pig
			trait = homosexual
			trait = transgender
			trait = shy
			trait = addict
			trait = hedonist
			religion_group = chaos_gods_group
			trait = vampire_carstein_visible
			trait = vampire_blood_visible
			trait = vampire_lahmian_visible
			trait = vampire_necrarch_visible
			trait = vampire_strigoi_visible
			trait = vampire_mahtmasi_visible
			trait = vampire_jade_visible
			trait = vampire_carstein_hidden
			trait = vampire_blood_hidden
			trait = vampire_lahmian_hidden
			trait = vampire_necrarch_hidden
			trait = vampire_strigoi_hidden
			trait = vampire_mahtmasi_hidden
			trait = vampire_jade_hidden
			trait = lunatic_1
			trait = lunatic_2
			trait = lunatic_3
			society_member_of = cult_of_khorne
			society_member_of = cult_of_nurgle			
			society_member_of = cult_of_slaanesh
			society_member_of = cult_of_tzeentch
			trait = mutation_minor
			trait = mutation_major
			trait = mutation_massive
		}
	}
	is_triggered_only = yes

	immediate = {
		log = "work event id = swhunters.30"
		random_list = {
			40 = {
				modifier = {
					factor = 5
					has_character_modifier = known_satanist
				}
				modifier = {
					factor = 2.5
					has_character_modifier = highly_suspect
				}
				modifier = {
					factor = 1.5
					has_character_modifier = under_suspicion
				}
				imprison = FROM
				opinion = {
					modifier = opinion_meddling_hunters
					who = FROM
					years = 3
				}
				opinion = {
					modifier = opinion_meddling_hunters
					who = FROMFROM
					years = 5
				}
				liege = {
					opinion = {
						modifier = opinion_meddling_hunters
						who = FROM
						years = 3
					}
					opinion = {
						modifier = opinion_meddling_hunters
						who = FROMFROM
						years = 5
					}
				}
			}
			60 = {
				# Safe!
				modifier = {
					factor = 2.5	# Vampires are hardly captured
					OR = {
						trait = vampire_carstein_visible
						trait = vampire_blood_visible
						trait = vampire_lahmian_visible
						trait = vampire_necrarch_visible
						trait = vampire_strigoi_visible
						trait = vampire_mahtmasi_visible
						trait = vampire_jade_visible
						trait = vampire_carstein_hidden
						trait = vampire_blood_hidden
						trait = vampire_lahmian_hidden
						trait = vampire_necrarch_hidden
						trait = vampire_strigoi_hidden
						trait = vampire_mahtmasi_hidden
						trait = vampire_jade_hidden
					}
				}
				modifier = {
					factor = 1.75
					OR = {
						has_character_modifier = magic_power_3
						has_character_modifier = magic_power_4
					}
				}
				modifier = {
					factor = 1.75
					trait = genius
				}
				modifier = {
					factor = 1.5
					trait = paranoid
				}
				modifier = {
					factor = 0.75
					trait = drunkard
				}
				modifier = {
					factor = 0.5
					trait = addict
				}
				modifier = {
					factor = 0.5
					trait = imbecile
				}
				modifier = {
					factor = 0.5
					trait = gregarious
				}
			}
		}
	}
}

# The Agent has finished purging
character_event = {
	id = swhunters.31
	desc = EVTDESCswhunters31
	picture = GFX_evt_burning_stake
	is_triggered_only = yes

	immediate = {
		log = "work event id = swhunters.31"
	}

	option = {
		name = EVTOPTAswhunters31
		FROMFROM = {
			piety = 50
			move_character = ROOT
			remove_trait = on_witch_hunt
		}
	}
}

# The Agent has finished capturing
character_event = {
	id = swhunters.32
	desc = EVTDESCswhunters32
	picture = GFX_evt_burning_stake
	is_triggered_only = yes

	immediate = {
		log = "work event id = swhunters.32"
	}

	option = {
		name = EVTOPTAswhunters32
		FROMFROM = {
			piety = 50
			move_character = ROOT
			remove_trait = on_witch_hunt
		}
	}
}
