
# OUTLINE OF BASIC WITCH HUNTER VS CULTIST SYSTEM
# Learning determines how good a witch hunter is, they gain learning when they complete a mission

# Intrigue determines how good a hidden cultist is; when it comes to exposure, the result is based on their intrigue vs the witch hunter's learning
# Beware: Paranoid witch hunters will consider even a good explanation proof of guilt as well, as clearly a good cultist would be a good liar!
namespace = witchhunter

# First spawn some witch hunters in the relevant courts - any court count or above that is a theocracy gets a few, from the old world religions on_yearly_pulse
character_event = {
	id = witchhunter.0
	title = WITCH_HUNTERS # Witch Hunters
	desc = EVTDESC_WITCHHUNTER_0 # "Witch Hunters are a necessary evil - though their methods can be cruel, they are the first line of defense against the spread of Chaos. As a major religious site, you have several witch hunters in your court."
	picture = "GFX_evt_witch_hunters"
	only_playable = yes
	min_age = 16
	religion_group = old_world_group
	is_triggered_only = yes

	trigger = {
		is_theocracy = yes
		top_liege = {
			religion_group = old_world_group
			NOT = {
				has_character_modifier = expelled_k_witch_hunters_order
			}
		}
		is_nomadic = no
		is_tribal = no
		NOT = {
			num_of_friends = 3
		} # no number of courtiers with witch hunter trait command exists, so we just make all witch hunters friends of the arch priest
	}

	immediate = {
		log = "work event id = witchhunter.0 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPT_WITCHHUNTER_0A # "I feel safer already."
		create_random_priest = {
			random_traits = yes
			dynasty = culture
			culture = witchhunter_culture
			religion = sigmarite
			female = no
			age = 18
		}
		new_character = {
			add_friend = ROOT
			add_trait = witch_hunter
		}
	}
}

# Now, individual witch hunters can go on missions to try and root out chaos
# First they are invited to investigate provinces where cultists are active with the province flag events
character_event = {
	id = witchhunter.1
	title = WITCH_HUNTERS # Witch Hunters
	desc = EVTDESC_WITCHHUNTER_1 # "One of your demesne provinces bears the taint of chaos. Your courtiers and barons want you to call in a professional to track down the root of this evil, and cleanse it from your lands."
	picture = "GFX_evt_witch_hunters"
	is_triggered_only = yes
	religion_group = old_world_group
	prisoner = no
	capable_only = yes

	trigger = {
		higher_tier_than = BARON
		any_demesne_province = {
			OR = {
				has_province_modifier = nurgle_province_disease
				has_province_modifier = beastmen_unrest
				has_province_modifier = warpdust_traces
				has_province_modifier = slaanesh_hedonism
			}
			top_liege = {
				NOT = {
					has_character_modifier = expelled_k_witch_hunters_order
				}
			}
			NOT = {
				has_province_modifier = witch_hunter_purge_in_progress
			}
			any_realm_character = {
				trait = witch_hunter
				NOT = {
					trait = on_witch_hunt
				}
			}
		}
	}

	immediate = {
		log = "work event id = witchhunter.1 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPT_WITCHHUNTER_1A # "We must send for a witch hunter immediately."
		random_realm_character = {
			limit = {
				trait = witch_hunter
				NOT = {
					trait = on_witch_hunt
				}
			}
			character_event = {
				id = witchhunter.2
			}
		}
	}

	option = {
		name = EVTOPT_WITCHHUNTER_1B # humanflavor.3.b # No, Witch hunters cause too much trouble.
		trigger = {
			OR = {
				ai = no
				society_member_of = cult_of_slaanesh
				society_member_of = cult_of_tzeentch
				society_member_of = cult_of_khorne
				society_member_of = cult_of_nurgle
			}
		}
		increase_visibility_minor_effect = yes
	}
}

character_event = {
	id = witchhunter.2
	title = EVIL_STIRS # Evil Stirs
	desc = EVTDESC_WITCHHUNTER_2 # "A province lord has sent for you, asking your aid in uncovering and rooting out the taint of chaos in one of his provinces."
	picture = "GFX_evt_witch_hunters"
	is_triggered_only = yes

	immediate = {
		log = "work event id = witchhunter.2 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPT_WITCHHUNTER_2A # "I leave immediately."
		FROM = {
			character_event = {
				id = witchhunter.3
			}
		}
	}
}

character_event = {
	id = witchhunter.3
	title = ON_A_DARK_AND_STORMY_NIGHT # On a dark and stormy night...
	desc = EVTDESC_WITCHHUNTER_3 # "A witch hunter arrives in your court. He will begin his investigation immediately."
	picture = "GFX_evt_witch_hunters"
	is_triggered_only = yes

	immediate = {
		log = "work event id = witchhunter.3 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPT_WITCHHUNTER_3A # EXCELLENT # Excellent.
		FROM = {
			character_event = {
				id = witchhunter.4
			}
		}
	}
}

character_event = {
	id = witchhunter.4
	title = ON_A_DARK_AND_STORMY_NIGHT # On a dark and stormy night...
	desc = EVTDESC_WITCHHUNTER_4 # "You arrive at the court. Now, it's time to get to work..."
	picture = "GFX_evt_beheading"
	is_triggered_only = yes

	immediate = {
		log = "work event id = witchhunter.4 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPT_WITCHHUNTER_4A # "Indeed!"
		add_trait = on_witch_hunt
		move_character = FROM
		character_event = {
			id = witchhunter.5 days = 730
		} # witch hunts last for 2 years, then the witch hunter leaves again
	}
}

character_event = {
	id = witchhunter.5
	title = EVTNAMEWITCHHUNTER.5 # Your investigation is finished
	desc = EVTDESC_WITCHHUNTER_5 # "You've done what you can here. It's time to move on again and root out new evils."
	picture = "GFX_evt_witch_hunters"
	is_triggered_only = yes

	immediate = {
		log = "work event id = witchhunter.5 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPT_WITCHHUNTER_5A # "Indeed, time to return to the temple."
		remove_trait = on_witch_hunt
		change_learning = 1 # learning determines how good a witch hunter is
		liege = {
			character_event = {
				id = witchhunter.6
			}
		}
		banish = yes
	}
}

character_event = {
	id = witchhunter.6
	title = THE_INVESTIGATION_IS_FINISHED # The investigation is finished
	desc = EVTDESC_WITCHHUNTER_6 # "The Witch Hunter comes to your council meeting and informs you that he has done what he can to root out heresy in your demesne and he must now go to other lands where the foul taint of chaos is ever-growing."
	picture = "GFX_evt_witch_hunters"
	is_triggered_only = yes

	immediate = {
		log = "work event id = witchhunter.6 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPT_WITCHHUNTER_6A # "It was about time!"
		random_demesne_province = {
			limit = {
				has_province_modifier = witch_hunter_purge_in_progress
			}
			remove_province_modifier = witch_hunter_purge_in_progress
		}
	}
}

# the witch hunter informs the liege that he is starting to root out chaos in the province
character_event = {
	id = witchhunter.7
	title = WITCH_HUNT # Witch Hunt
	desc = EVTDESC_WITCHHUNTER_7 # "The Witch Hunter asks permission to start rooting out the foul taint of chaos in your demesne. The methods will be harsh, but he promises to get to the bottom of this and cleanse your land."
	picture = "GFX_evt_witch_hunters"
	is_triggered_only = yes

	trigger = {
		any_courtier = {
			trait = on_witch_hunt
			prisoner = no
			NOT = {
				trait = incapable
			}
		}
		any_demesne_province = {
			OR = {
				has_province_modifier = nurgle_province_disease
				has_province_modifier = beastmen_unrest
				has_province_modifier = warpdust_traces
				has_province_modifier = slaanesh_hedonism
				has_province_modifier = warpstone_meteor
			}
			NOT = {
				has_province_modifier = witch_hunter_purge_in_progress
			}
		}
	}

	immediate = {
		log = "work event id = witchhunter.7 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPT_WITCHHUNTER_7A # "Very well."
		random_demesne_province = {
			limit = {
				OR = {
					has_province_modifier = nurgle_province_disease
					has_province_modifier = beastmen_unrest
					has_province_modifier = warpdust_traces
					has_province_modifier = slaanesh_hedonism
					has_province_modifier = warpstone_meteor
				}
				NOT = {
					has_province_modifier = witch_hunter_purge_in_progress
				}
			}
			add_province_modifier = {
				name = witch_hunter_purge_in_progress
				duration = 730
			}
		}
	}

	option = {
		name = EVTOPT_WITCHHUNTER_7B # "No, leave the peasants alone."
		trigger = {
			ai = no
		}
		increase_visibility_minor_effect = yes
	}
}

# the witch hunter starts looking for cultist courtiers - this time he identifies a random individual
character_event = {
	id = witchhunter.8
	prisoner = no
	min_age = 16
	title = WITCH_HUNT # Witch Hunt
	desc = EVTDESC_WITCHHUNTER_8 # "No one is immune to the taint of chaos, and while it is better to burn an entire village than risk contamination by one individual, you must be more careful here in the court. But there is one courtier who you suspect to be a cultist..."
	picture = "GFX_evt_witch_hunters"

	trigger = {
		trait = on_witch_hunt
		liege = {
			religion_group = old_world_group
		}
		top_liege = {
			NOT = {
				has_character_modifier = expelled_k_witch_hunters_order
			}
		}
		NOT = {
			trait = incapable
		}
	}

	mean_time_to_happen = {
		months = 3
	}

	immediate = {
		log = "work event id = witchhunter.8 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPT_WITCHHUNTER_8A # "I will confront this individual."
		random_courtier = {
			limit = {
				age = 16
				prisoner = no
				nor = {
					has_character_modifier = wh_accused
					trait = khorne_demon
					trait = nurgle_demon
					trait = slaanesh_demon
					trait = tzeentch_demon
					trait = hashut_kdaai
				}
				OR = {
					lower_tier_than = DUKE
					ai = no
				}
				OR = {
					trait = lustful
					trait = hedonist
					trait = mystic
					trait = paranoid
					trait = hunchback
					trait = ugly
					trait = dwarf
					trait = imbecile
					nor = {
						religion = ROOT
						culture_group = ROOT
					}
				}
			}
			character_event = {
				id = witchhunter.9
			}
		}
	}
}

# courtier is confronted
character_event = {
	id = witchhunter.9
	title = WITCH_HUNT # Witch Hunt
	desc = EVTDESC_WITCHHUNTER_9 # "You are confronted by the witch hunter currently investigating your court, who asks you to explain certain suspicious actions of yours..."
	picture = "GFX_evt_witch_hunters"
	is_triggered_only = yes

	immediate = {
		log = "work event id = witchhunter.9 for [Root.GetBestName]"
		add_character_modifier = {
			name = wh_accused
			duration = 730
			hidden = yes
		}
	}

	option = {
		name = EVTOPT_WITCHHUNTER_9A # "I.. ehh, heresy? No no, let me explain!"
		# first the events where the courtier successfully explains the suspicious actions
		hidden_tooltip = {
			random_list = {
				60 = {
					modifier = {
						factor = 5
						has_character_modifier = known_satanist
					}
					modifier = {
						factor = 2.5
						has_character_modifier = highly_suspect
					}
					modifier = {
						factor = 1.5
						has_character_modifier = under_suspicion
					}
					modifier = {
						factor = 1.5
						FROM = {
							trait = paranoid
						}
					}
					modifier = {
						factor = 1.25
						FROM = {
							learning = 5
						}
					}
					modifier = {
						factor = 1.25
						FROM = {
							learning = 10
						}
					}
					modifier = {
						factor = 1.5
						FROM = {
							learning = 15
						}
					}
					modifier = {
						factor = 1.5
						FROM = {
							learning = 20
						}
					}
					modifier = {
						factor = 0.5
						NOT = {
							FROM = {
								learning = 5
							}
						}
					}
					modifier = {
						factor = 0.65
						NOT = {
							FROM = {
								learning = 10
							}
						}
					}
					modifier = {
						factor = 0.75
						NOT = {
							FROM = {
								learning = 15
							}
						}
					}
					modifier = {
						factor = 0.85
						NOT = {
							FROM = {
								learning = 20
							}
						}
					}
					modifier = {
						factor = 1.25
						FROM = {
							intrigue = 5
						}
					}
					modifier = {
						factor = 1.25
						FROM = {
							intrigue = 10
						}
					}
					modifier = {
						factor = 1.5
						FROM = {
							intrigue = 15
						}
					}
					modifier = {
						factor = 1.5
						FROM = {
							intrigue = 20
						}
					}
					modifier = {
						factor = 0.5
						NOT = {
							FROM = {
								intrigue = 5
							}
						}
					}
					modifier = {
						factor = 0.65
						NOT = {
							FROM = {
								intrigue = 10
							}
						}
					}
					modifier = {
						factor = 0.75
						NOT = {
							FROM = {
								intrigue = 15
							}
						}
					}
					modifier = {
						factor = 0.85
						NOT = {
							FROM = {
								intrigue = 20
							}
						}
					}
					modifier = {
						factor = 1.25
						intrigue = 5

					}
					modifier = {
						factor = 1.25
						intrigue = 10

					}
					modifier = {
						factor = 1.5
						intrigue = 15

					}
					modifier = {
						factor = 1.75
						intrigue = 20

					}
					modifier = {
						factor = 0.5
						NOT = {
							intrigue = 5
						}
					}
					modifier = {
						factor = 0.75
						NOT = {
							intrigue = 10
						}
					}
					modifier = {
						factor = 0.75
						NOT = {
							intrigue = 15
						}
					}
					modifier = {
						factor = 0.75
						NOT = {
							intrigue = 20
						}
					}
					modifier = {
						factor = 1.25
						learning = 5

					}
					modifier = {
						factor = 1.25
						learning = 10

					}
					modifier = {
						factor = 1.5
						learning = 15

					}
					modifier = {
						factor = 1.75
						learning = 20

					}
					modifier = {
						factor = 0.5
						NOT = {
							learning = 5
						}
					}
					modifier = {
						factor = 0.75
						NOT = {
							learning = 10
						}
					}
					modifier = {
						factor = 0.75
						NOT = {
							learning = 15
						}
					}
					modifier = {
						factor = 0.75
						NOT = {
							learning = 20
						}
					}
					modifier = {
						factor = 0.5
						trait = witch_hunter

					}
					modifier = {
						factor = 10
						OR = {
							trait = mutation_minor
							trait = mutation_major
							trait = mutation_massive
						}
					}
					modifier = {
						factor = 2
						OR = {
							wh_has_any_magic_potential_reveal_trigger = yes
							wh_is_mage_trigger = yes
						}
					}
					modifier = {
						factor = 0.5 # If you are not a cultist, there's actually a lower chance of getting framed...
						NOR = {
							society_member_of = cult_of_khorne
							society_member_of = cult_of_nurgle
							society_member_of = cult_of_slaanesh
							society_member_of = cult_of_tzeentch
						}
					}
					FROM = {
						character_event = {
							id = witchhunter.10
						}
					}
				}
				40 = {
					FROM = {
						character_event = {
							id = witchhunter.11
						}
					}
				}
			}
		}
	}
}

# witch hunter is convinced the courtier is not a heretic
character_event = {
	id = witchhunter.10
	title = WITCH_HUNT # Witch Hunt
	desc = EVTDESC_WITCHHUNTER_10 # "The Courtier had a good explanation. He seems to be telling the truth."
	picture = "GFX_evt_witch_hunters"
	is_triggered_only = yes

	immediate = {
		log = "work event id = witchhunter.10 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPT_WITCHHUNTER_10A # "Fine..."
		ai_chance = {
			factor = 80
			modifier = {
				factor = 0.5
				trait = paranoid
			}
		}
	}

	option = {
		name = EVTOPT_WITCHHUNTER_10B # "A good cultist is a good liar! This is proof of guilt!"
		liege = {
			character_event = {
				id = witchhunter.12
			}
		}
		ai_chance = {
			factor = 20
			modifier = {
				factor = 0
				FROM = {
					trait = witch_hunter
				}
			}
		}
	}
}

# witch hunter is convinced the courtier is a heretic
character_event = {
	id = witchhunter.11
	title = WITCH_HUNT # Witch Hunt
	desc = EVTDESC_WITCHHUNTER_11 # "The Courtier did not had a good explanation. You must inform the liege of this heretic in his midst!"
	picture = "GFX_evt_witch_hunters"
	is_triggered_only = yes

	immediate = {
		log = "work event id = witchhunter.11 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPT_WITCHHUNTER_11A # "At once!"
		FROM = {
			character_event = {
				id = witchhunter.12
			}
		}
	}
}

# the courtier is informed of the charge and wants to defends himself to his liege, or if independent, banish or imprison him
character_event = {
	id = witchhunter.12
	title = WITCH_HUNT # Witch Hunt
	desc = EVTDESC_WITCHHUNTER_12 # "The Witch Hunter is convinced that you are a heretic or a cultist. What do you do?"
	picture = "GFX_evt_witch_hunters"
	is_triggered_only = yes

	immediate = {
		log = "work event id = witchhunter.12 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPT_WITCHHUNTER_12A # "Banish him!"
		trigger = {
			independent = yes
		}
		increase_visibility_minor_effect = yes
		FROM = {
			banish = yes
		}
		FROM = {
			remove_trait = on_witch_hunt
		}
	}

	option = {
		name = EVTOPT_WITCHHUNTER_12B # IMPRISON_HIM
		trigger = {
			independent = yes
		}
		increase_visibility_effect = yes
		FROM = {
			imprison = yes
		}
		FROM = {
			remove_trait = on_witch_hunt
		}
	}

	option = {
		name = EVTOPT_WITCHHUNTER_12C # "Appeal to my liege!"
		trigger = {
			independent = no
		}
		liege = {
			character_event = {
				id = witchhunter.13
			}
		}
	}
}

# liege is informed one of this courtiers is a suspected cultist/heretic
character_event = {
	id = witchhunter.13
	title = WITCH_HUNT # Witch Hunt
	desc = EVTDESC_WITCHHUNTER_13 # "My liege, the Witch Hunter has accused me of heresy. These charges are completely baseless, I implore you to intervene on my behalf and clear my good name! In the name of all that is holy!"
	picture = "GFX_evt_witch_hunters"
	is_triggered_only = yes

	immediate = {
		log = "work event id = witchhunter.13 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPT_WITCHHUNTER_13A # "All heretics must die by fire!"
		trigger = {
			OR = {
				ai = no
				trait = zealous
				trait = paranoid
				trait = arbitrary
				trait = cruel
				NOT = {
					ROOT = {
						opinion = {
							who = FROM
							value = 1
						}
					}
				}
			}
		}
		decrease_visibility_effect = yes
		FROM = {
			character_event = {
				id = witchhunter.14
			}
		}
	}

	option = {
		name = EVTOPT_WITCHHUNTER_13B # "I'm sure you are not a heretic."
		trigger = {
			OR = {
				ai = no
				ROOT = {
					opinion = {
						who = FROM
						value = 25
					}
				}
			}
		}
		increase_visibility_minor_effect = yes
		FROM = {
			character_event = {
				id = witchhunter.16
			}
		}
	}

	option = {
		name = EVTOPT_WITCHHUNTER_13C # "To the dungeons with you!"
		if = {
			limit = {
				ai = no
			}
			increase_visibility_minor_effect = yes

		}
		FROM = {
			character_event = {
				id = witchhunter.15
			}
		}
	}
}

character_event = {
	id = witchhunter.14
	title = WITCH_HUNT # Witch Hunt
	desc = EVTDESC_WITCHHUNTER_14 # "Your liege sides with the Witch Hunter. Guards seize you, and drag you to the court yard, where a great fire is being prepared for your execution."
	picture = "GFX_evt_burning_stake"
	is_triggered_only = yes

	immediate = {
		log = "work event id = witchhunter.14 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPT_WITCHHUNTER_14A # "Nooooo!"
		if = {
			limit = {
				is_landed = yes
			}
			any_playable_ruler = {
				limit = {
					ai = no
					same_realm = ROOT
					NOT = {
						has_character_flag = witchhunter29
					}
				}
				character_event = {
					id = witchhunter.29 days = 7
				}
			}
		}
		if = {
			limit = {
				is_invincible_trigger = yes
			}
			antideath_effect = yes
			break = yes
		}
		add_trait = staked
		if = {
			limit = {
				OR = {
					society_member_of = cult_of_khorne
					society_member_of = cult_of_nurgle
					society_member_of = cult_of_slaanesh
					society_member_of = cult_of_tzeentch
					society_member_of = cult_of_undivided
				}
			}
			set_discovered_society = yes
		}
		death = {
			death_reason = death_execution_burning
			killer = FROM
		}
	}
}

character_event = {
	id = witchhunter.15
	title = WITCH_HUNT # Witch Hunt
	desc = EVTDESC_WITCHHUNTER_15 # "Your liege sides with the Witch Hunter. Guards seize you, and drag you to the dungeons. At least your liege was merciful, and did not condemn you to death by fire."
	picture = "GFX_evt_into_the_dungeon"
	is_triggered_only = yes

	immediate = {
		log = "work event id = witchhunter.15 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPT_WITCHHUNTER_15A # "Nooooo!"
		imprison = FROM
	}
}

character_event = {
	id = witchhunter.16
	title = WITCH_HUNT # Witch Hunt
	desc = EVTDESC_WITCHHUNTER_16 # "Your liege intervenes, and the Witch Hunter - grudgingly - backs off. You will not suffer death by fire."
	picture = "GFX_evt_into_the_dungeon"
	is_triggered_only = yes

	immediate = {
		log = "work event id = witchhunter.16 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPT_WITCHHUNTER_16A # "A close call!"
	}
}

# Now for the witch hunter actually removing the chaos taint from the province
character_event = {
	id = witchhunter.17
	prisoner = no
	min_age = 16
	title = WITCH_HUNT # Witch Hunt
	desc = EVTDESC_WITCHHUNTER_17 # "You have managed to remove the taint of chaos from the province. But there may still be cultists and heretics lurking about..."
	picture = "GFX_evt_witch_hunters"

	trigger = {
		NOT = {
			trait = incapable
		}
		trait = on_witch_hunt
		liege = {
			any_demesne_province = {
				OR = {
					has_province_modifier = nurgle_province_disease
					has_province_modifier = beastmen_unrest
					has_province_modifier = warpdust_traces
					has_province_modifier = slaanesh_hedonism
					has_province_modifier = warpstone_meteor
				}
			}
		}
	}

	mean_time_to_happen = {
		years = 2
		modifier = {
			factor = 0.9
			learning = 5
		}
		modifier = {
			factor = 0.9
			learning = 10
		}
		modifier = {
			factor = 0.5
			learning = 15
		}
		modifier = {
			factor = 0.5
			learning = 20
		}
	}

	immediate = {
		log = "work event id = witchhunter.17 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPT_WITCHHUNTER_17A # EXCELLENT # Excellent.
		liege = {
			character_event = {
				id = witchhunter.18
			}
		}
	}
}

# liege is informed that the taint has been removed
character_event = {
	id = witchhunter.18
	title = WITCH_HUNT # Witch Hunt
	desc = EVTDESC_WITCHHUNTER_18 # "The Witch Hunter has purged the taint of chaos from your demesne province, but warns you that heretics and cultists may still be about. He will continue his investigation for a while yet."
	picture = "GFX_evt_witch_hunters"
	is_triggered_only = yes

	immediate = {
		log = "work event id = witchhunter.18 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPT_WITCHHUNTER_18A # "Good job, Witch Hunter."
		random_demesne_province = {
			limit = {
				OR = {
					has_province_modifier = nurgle_province_disease
					has_province_modifier = beastmen_unrest
					has_province_modifier = warpdust_traces
					has_province_modifier = slaanesh_hedonism
					has_province_modifier = warpstone_meteor
				}
			}
			remove_province_modifier = witch_hunter_purge_in_progress
			remove_province_modifier = nurgle_province_disease
			remove_province_modifier = beastmen_unrest
			remove_province_modifier = warpdust_traces
			remove_province_modifier = slaanesh_hedonism
			remove_province_modifier = warpstone_meteor
		}
	}
}

# Now the Witch Hunter goes after actual cultists, or those with high suspicion factors
character_event = {
	id = witchhunter.19
	prisoner = no
	min_age = 16
	title = WITCH_HUNT # Witch Hunt
	desc = EVTDESC_WITCHHUNTER_19 # "No one is immune to the taint of chaos, and while it is better to burn an entire village than risk contamination by one individual, you must be more careful here in the court. But there is one courtier who you suspect to be a cultist..."
	picture = "GFX_evt_witch_hunters"

	trigger = {
		NOT = {
			trait = incapable
		}
		trait = on_witch_hunt
		liege = {
			religion_group = old_world_group
		}
		top_liege = {
			NOT = {
				has_character_modifier = expelled_k_witch_hunters_order
			}
		}
		liege = {
			any_courtier = {
				OR = {
					AND = {
						NOT = {
							has_character_modifier = wh_accused
						}
						prisoner = no
						age = 16
						has_character_modifier = under_suspicion
					}
					AND = {
						prisoner = no
						NOT = {
							has_character_modifier = wh_accused
						}
						age = 16
						has_character_modifier = highly_suspect
					}
					AND = {
						prisoner = no
						NOT = {
							has_character_modifier = wh_accused
						}
						age = 16
						has_character_modifier = known_satanist
					}
				}
			}
		}
	}

	mean_time_to_happen = {
		months = 3
	}

	immediate = {
		log = "work event id = witchhunter.19 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPT_WITCHHUNTER_19A # "I will confront this individual."
		random_courtier = {
			limit = {
				OR = {
					AND = {
						NOT = {
							has_character_modifier = wh_accused
						}
						prisoner = no
						age = 16
						has_character_modifier = under_suspicion
					}
					AND = {
						prisoner = no
						NOT = {
							has_character_modifier = wh_accused
						}
						age = 16
						has_character_modifier = highly_suspect
					}
					AND = {
						prisoner = no
						NOT = {
							has_character_modifier = wh_accused
						}
						age = 16
						has_character_modifier = known_satanist
					}
				}
			}
			character_event = {
				id = witchhunter.20
			}
		}
	}
}

# courtier is confronted
character_event = {
	id = witchhunter.20
	title = WITCH_HUNT # Witch Hunt
	desc = EVTDESC_WITCHHUNTER_20 # "You are confronted by the witch hunter currently investigating your court, who asks you to explain certain suspicious actions of yours..."
	picture = "GFX_evt_witch_hunters"
	is_triggered_only = yes

	immediate = {
		log = "work event id = witchhunter.20 for [Root.GetBestName]"
		add_character_modifier = {
			name = wh_accused
			duration = 730
			hidden = yes
		}
	}

	option = {
		name = EVTOPT_WITCHHUNTER_20A # "I.. ehh, heresy? No no, let me explain!"
		# first the events where the courtier successfully explains the suspicious actions
		hidden_tooltip = {
			random_list = {
				60 = {
					modifier = {
						factor = 5
						has_character_modifier = known_satanist
					}
					modifier = {
						factor = 2.5
						has_character_modifier = highly_suspect
					}
					modifier = {
						factor = 1.5
						has_character_modifier = under_suspicion
					}
					modifier = {
						factor = 1.5
						FROM = {
							trait = paranoid
						}
					}
					modifier = {
						factor = 1.25
						FROM = {
							learning = 5
						}
					}
					modifier = {
						factor = 1.25
						FROM = {
							learning = 10
						}
					}
					modifier = {
						factor = 1.5
						FROM = {
							learning = 15
						}
					}
					modifier = {
						factor = 1.5
						FROM = {
							learning = 20
						}
					}
					modifier = {
						factor = 0.5
						NOT = {
							FROM = {
								learning = 5
							}
						}
					}
					modifier = {
						factor = 0.65
						NOT = {
							FROM = {
								learning = 10
							}
						}
					}
					modifier = {
						factor = 0.75
						NOT = {
							FROM = {
								learning = 15
							}
						}
					}
					modifier = {
						factor = 0.85
						NOT = {
							FROM = {
								learning = 20
							}
						}
					}
					modifier = {
						factor = 1.25
						FROM = {
							intrigue = 5
						}
					}
					modifier = {
						factor = 1.25
						FROM = {
							intrigue = 10
						}
					}
					modifier = {
						factor = 1.5
						FROM = {
							intrigue = 15
						}
					}
					modifier = {
						factor = 1.5
						FROM = {
							intrigue = 20
						}
					}
					modifier = {
						factor = 0.5
						NOT = {
							FROM = {
								intrigue = 5
							}
						}
					}
					modifier = {
						factor = 0.65
						NOT = {
							FROM = {
								intrigue = 10
							}
						}
					}
					modifier = {
						factor = 0.75
						NOT = {
							FROM = {
								intrigue = 15
							}
						}
					}
					modifier = {
						factor = 0.85
						NOT = {
							FROM = {
								intrigue = 20
							}
						}
					}
					modifier = {
						factor = 1.25
						intrigue = 5

					}
					modifier = {
						factor = 1.25
						intrigue = 10

					}
					modifier = {
						factor = 1.5
						intrigue = 15

					}
					modifier = {
						factor = 1.75
						intrigue = 20

					}
					modifier = {
						factor = 0.5
						NOT = {
							intrigue = 5
						}
					}
					modifier = {
						factor = 0.75
						NOT = {
							intrigue = 10
						}
					}
					modifier = {
						factor = 0.75
						NOT = {
							intrigue = 15
						}
					}
					modifier = {
						factor = 0.75
						NOT = {
							intrigue = 20
						}
					}
					modifier = {
						factor = 1.25
						learning = 5

					}
					modifier = {
						factor = 1.25
						learning = 10

					}
					modifier = {
						factor = 1.5
						learning = 15

					}
					modifier = {
						factor = 1.75
						learning = 20

					}
					modifier = {
						factor = 0.5
						NOT = {
							learning = 5
						}
					}
					modifier = {
						factor = 0.75
						NOT = {
							learning = 10
						}
					}
					modifier = {
						factor = 0.75
						NOT = {
							learning = 15
						}
					}
					modifier = {
						factor = 0.75
						NOT = {
							learning = 20
						}
					}
					modifier = {
						factor = 0.5
						trait = witch_hunter

					}
					modifier = {
						factor = 10
						OR = {
							trait = mutation_minor
							trait = mutation_major
							trait = mutation_massive
						}
					}
					modifier = {
						factor = 2
						OR = {
							wh_has_any_magic_potential_reveal_trigger = yes
							wh_is_mage_trigger = yes
						}
					}
					modifier = {
						factor = 0.5 # If you are not a cultist, there's actually a lower chance of getting framed...
						NOR = {
							society_member_of = cult_of_khorne
							society_member_of = cult_of_nurgle
							society_member_of = cult_of_slaanesh
							society_member_of = cult_of_tzeentch
						}
					}
					FROM = {
						character_event = {
							id = witchhunter.21
						}
					}
				}
				40 = {
					FROM = {
						character_event = {
							id = witchhunter.22
						}
					}
				}
			}
		}
	}
}

# witch hunter is convinced the courtier is not a heretic
character_event = {
	id = witchhunter.21
	title = WITCH_HUNT # Witch Hunt
	desc = EVTDESC_WITCHHUNTER_21 # "The Courtier had a good explanation. He seems to be telling the truth."
	picture = "GFX_evt_witch_hunters"
	is_triggered_only = yes

	immediate = {
		log = "work event id = witchhunter.21 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPT_WITCHHUNTER_21A # "Fine..."
		ai_chance = {
			factor = 80
			modifier = {
				factor = 0.5
				trait = paranoid
			}
		}
	}

	option = {
		name = EVTOPT_WITCHHUNTER_21B # "A good cultist is a good liar! This is proof of guilt!"
		liege = {
			character_event = {
				id = witchhunter.12
			}
		}
		ai_chance = {
			factor = 20
			modifier = {
				factor = 0
				FROM = {
					trait = witch_hunter
				}
			}
		}
	}
}

# witch hunter is convinced the courtier is a heretic
character_event = {
	id = witchhunter.22
	title = WITCH_HUNT # Witch Hunt
	desc = EVTDESC_WITCHHUNTER_22 # "The Courtier did not had a good explanation. You must inform the liege of this heretic in his midst!"
	picture = "GFX_evt_witch_hunters"
	is_triggered_only = yes

	immediate = {
		log = "work event id = witchhunter.22 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPT_WITCHHUNTER_22B # "At once!"
		FROM = {
			character_event = {
				id = witchhunter.23
			}
		}
	}
}

# the courtier is informed of the charge and wants to defends himself to his liege, or if independent, banish or imprison him
character_event = {
	id = witchhunter.23
	title = WITCH_HUNT # Witch Hunt
	desc = EVTDESC_WITCHHUNTER_23 # " The Witch Hunter is convinced that you are a heretic or a cultist. What do you do?"
	picture = "GFX_evt_witch_hunters"
	is_triggered_only = yes

	immediate = {
		log = "work event id = witchhunter.23 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPT_WITCHHUNTER_23A # "Banish him!"
		trigger = {
			independent = yes
		}
		increase_visibility_minor_effect = yes
		FROM = {
			banish = yes
		}
		FROM = {
			remove_trait = on_witch_hunt
		}
	}

	option = {
		name = EVTOPT_WITCHHUNTER_23B # IMPRISON_HIM
		trigger = {
			independent = yes
		}
		increase_visibility_effect = yes
		FROM = {
			imprison = yes
		}
		FROM = {
			remove_trait = on_witch_hunt
		}
	}

	option = {
		name = EVTOPT_WITCHHUNTER_23C # "Appeal to my liege!"
		trigger = {
			independent = no
		}
		liege = {
			character_event = {
				id = witchhunter.24
			}
		}
	}
}

# liege is informed one of this courtiers is a suspected cultist/heretic
character_event = {
	id = witchhunter.24
	title = WITCH_HUNT # Witch Hunt
	desc = EVTDESC_WITCHHUNTER_24 # "My liege, the Witch Hunter has accused me of heresy. These charges are completely baseless, I implore you to intervene on my behalf and clear my good name! In the name of all that is holy!"
	picture = "GFX_evt_witch_hunters"
	is_triggered_only = yes

	immediate = {
		log = "work event id = witchhunter.24 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPT_WITCHHUNTER_24A # "All heretics must die by fire!"
		trigger = {
			OR = {
				ai = no
				trait = zealous
				trait = paranoid
				trait = arbitrary
				trait = cruel
				NOT = {
					ROOT = {
						opinion = {
							who = FROM
							value = 1
						}
					}
				}
			}
		}
		decrease_visibility_effect = yes
		FROM = {
			character_event = {
				id = witchhunter.25
			}
		}
	}

	option = {
		name = EVTOPT_WITCHHUNTER_24B # "I'm sure you are not a heretic."
		trigger = {
			OR = {
				ai = no
				ROOT = {
					opinion = {
						who = FROM
						value = 50
					}
				}
			}
		}
		increase_visibility_minor_effect = yes
		FROM = {
			character_event = {
				id = witchhunter.27
			}
		}
	}

	option = {
		name = EVTOPT_WITCHHUNTER_24C # "To the dungeons with you!"
		if = {
			limit = {
				ai = no
			}
			increase_visibility_minor_effect = yes
		}
		FROM = {
			character_event = {
				id = witchhunter.26
			}
		}
	}
}

character_event = {
	id = witchhunter.25
	title = WITCH_HUNT # Witch Hunt
	desc = EVTDESC_WITCHHUNTER_25 # "Your liege sides with the Witch Hunter. Guards seize you, and drag you to the court yard, where a great fire is being prepared for your execution."
	picture = "GFX_evt_burning_stake"
	is_triggered_only = yes

	immediate = {
		log = "work event id = witchhunter.25 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPT_WITCHHUNTER_25A # "Nooooo!"
		if = {
			limit = {
				is_landed = yes
			}
			any_playable_ruler = {
				limit = {
					ai = no
					same_realm = ROOT
					NOT = {
						has_character_flag = witchhunter29
					}
				}
				character_event = {
					id = witchhunter.29 days = 7
				}
			}
		}
		if = {
			limit = {
				is_invincible_trigger = yes
			}
			antideath_effect = yes
			break = yes
		}
		add_trait = staked
		if = {
			limit = {
				OR = {
					society_member_of = cult_of_khorne
					society_member_of = cult_of_nurgle
					society_member_of = cult_of_slaanesh
					society_member_of = cult_of_tzeentch
					society_member_of = cult_of_undivided
				}
			}
			set_discovered_society = yes
		}
		death = {
			death_reason = death_execution_burning
			killer = FROM
		}
	}
}

character_event = {
	id = witchhunter.26
	title = WITCH_HUNT # Witch Hunt
	desc = EVTDESC_WITCHHUNTER_26 # "Your liege sides with the Witch Hunter. Guards seize you, and drag you to the dungeons. At least your liege was merciful, and did not condemn you to death by fire."
	picture = "GFX_evt_into_the_dungeon"
	is_triggered_only = yes

	immediate = {
		log = "work event id = witchhunter.26 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPT_WITCHHUNTER_26A # "Nooooo!"
		imprison = FROM
	}
}

character_event = {
	id = witchhunter.27
	title = WITCH_HUNT # Witch Hunt
	desc = EVTDESC_WITCHHUNTER_27 # "Your liege intervenes, and the Witch Hunter - grudgingly - backs off. You will not suffer death by fire."
	picture = "GFX_evt_witch_hunters"
	is_triggered_only = yes

	immediate = {
		log = "work event id = witchhunter.27 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPT_WITCHHUNTER_27A # "A close call!"
	}
}

# Now Witch Hunters randomly seek out individual lords who have high suspicion factors - first the suspicious lord gets an event
character_event = {
	id = witchhunter.28
	title = WITCH_HUNT # Witch Hunt
	desc = EVTDESC_WITCHHUNTER_28 # "The religious authorities send word. They'd like you to host a Witch Hunter for a while, as part of a routine investigation of chaos influences in the land."
	picture = "GFX_evt_witch_hunters"
	is_triggered_only = yes
	prisoner = no
	min_age = 16

	trigger = {
		NOT = {
			trait = incapable
		}
		top_liege = {
			NOT = {
				has_character_modifier = expelled_k_witch_hunters_order
			}
		}
		higher_tier_than = BARON
		liege = {
			religion_group = old_world_group
		}
		OR = {
			has_character_modifier = under_suspicion
			has_character_modifier = highly_suspect
			has_character_modifier = known_satanist
		}
	}

	immediate = {
		log = "work event id = witchhunter.28 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPT_WITCHHUNTER_28A # "Sure... why not?"
		decrease_visibility_effect = yes
		random_realm_character = {
			limit = {
				religion = ROOT
				trait = witch_hunter
				NOT = {
					trait = on_witch_hunt
				}
			}
			character_event = {
				id = witchhunter.2
			}
		}
	}

	option = {
		name = EVTOPT_WITCHHUNTER_28B # "No! Witch Hunters cause trouble."
		trigger = {
			ai = no
		}
		increase_visibility_effect = yes
	}
}

character_event = {
	id = witchhunter.29
	title = WITCH_HUNT # Witch Hunt
	desc = EVTDESC_WITCHHUNTER_29 # "This noble of your realm has been burned alive by the witch hunters, on suspicion of heresy or cultist activities."
	picture = "GFX_evt_burning_stake"
	is_triggered_only = yes

	immediate = {
		log = "work event id = witchhunter.29 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPT_WITCHHUNTER_29A # I_SEE # I see.
	}

	option = {
		name = EVTOPT_WITCHHUNTER_29B # "Do not bother me with such news again."
		set_character_flag = witchhunter29
	}
}

# Now for vampire hunting - this time just for open vampires
# first a witch hunter who is not on a witch hunt tells the liege that there are open vampires in his realm
character_event = {
	id = witchhunter.30
	title = WITCH_HUNT # Witch Hunt
	desc = EVTDESC_WITCHHUNTER_30 # "There are known vampires in the realm... these must be rooted out with fire, stakes, and sharp silver swords!"
	picture = "GFX_evt_witch_hunters"
	is_triggered_only = yes
	min_age = 16
	prisoner = no

	trigger = {
		NOT = {
			trait = incapable
		}
		trait = witch_hunter
		NOT = {
			trait = on_witch_hunt
		}
		top_liege = {
			NOT = {
				has_character_modifier = expelled_k_witch_hunters_order
			}
		}
		OR = {
			any_realm_character = {
				OR = {
					trait = vampire_lahmian_visible
					trait = vampire_carstein_visible
					trait = vampire_blood_visible
					trait = vampire_strigoi_visible
					trait = vampire_necrarch_visible
					trait = vampire_jade_visible
					trait = vampire_mahtmasi_visible
				}
			}
			any_realm_lord = {
				OR = {
					trait = vampire_lahmian_visible
					trait = vampire_carstein_visible
					trait = vampire_blood_visible
					trait = vampire_strigoi_visible
					trait = vampire_necrarch_visible
					trait = vampire_jade_visible
					trait = vampire_mahtmasi_visible
				}
			}
		}
		top_liege = {
			NOT = {
				has_character_flag = vampires_allowed
			}
			religion_group = old_world_group
		}
	}

	immediate = {
		log = "work event id = witchhunter.30 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPT_WITCHHUNTER_30A # "I must inform my liege at once!"
		top_liege = {
			character_event = {
				id = witchhunter.31
			}
		}
	}
}

# top liege is informed
character_event = {
	id = witchhunter.31
	title = WITCH_HUNT # Witch Hunt
	desc = EVTDESC_WITCHHUNTER_31 # "My liege, there are known vampires infesting your realm! These must be hunted down at once. Will you give the temple the authority to cleanse the land of this foul taint?"
	picture = "GFX_evt_witch_hunters"
	is_triggered_only = yes

	immediate = {
		log = "work event id = witchhunter.31 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPT_WITCHHUNTER_31A # "Yes, of course - get to work at once."
		trigger = {
			nor = {
				trait = vampire_lahmian_visible
				trait = vampire_carstein_visible
				trait = vampire_blood_visible
				trait = vampire_strigoi_visible
				trait = vampire_necrarch_visible
				trait = vampire_jade_visible
				trait = vampire_mahtmasi_visible
			}
		}
		# vampires with either martial or intrigue of 15+ manage to escape and are banished
		any_realm_character = {
			limit = {
				OR = {
					ai = no
					NOT = {
						has_character_flag = lucky_escape
					}
				}
				OR = {
					martial = 15
					intrigue = 15
				}
				OR = {
					trait = vampire_lahmian_visible
					trait = vampire_carstein_visible
					trait = vampire_blood_visible
					trait = vampire_strigoi_visible
					trait = vampire_necrarch_visible
					trait = vampire_jade_visible
					trait = vampire_mahtmasi_visible
				}
			}
			character_event = {
				id = witchhunter.32
			}
		}
		any_realm_lord = {
			limit = {
				OR = {
					ai = no
					NOT = {
						has_character_flag = lucky_escape
					}
				}
				OR = {
					martial = 15
					intrigue = 15
				}
				OR = {
					trait = vampire_lahmian_visible
					trait = vampire_carstein_visible
					trait = vampire_blood_visible
					trait = vampire_strigoi_visible
					trait = vampire_necrarch_visible
					trait = vampire_jade_visible
					trait = vampire_mahtmasi_visible
				}
			}
			character_event = {
				id = witchhunter.32
			}
		}
		# vampires with less get destroyed
		any_realm_character = {
			limit = {
				nor = {
					martial = 15
					intrigue = 15
				}
				OR = {
					ai = no
					AND = {
						age = 1
						NOT = {
							has_character_flag = lucky_escape
						}
					}
				}
				OR = {
					trait = vampire_lahmian_visible
					trait = vampire_carstein_visible
					trait = vampire_blood_visible
					trait = vampire_strigoi_visible
					trait = vampire_necrarch_visible
					trait = vampire_jade_visible
					trait = vampire_mahtmasi_visible
				}
			}
			character_event = {
				id = witchhunter.33
			}
		}
		any_realm_lord = {
			limit = {
				nor = {
					martial = 15
					intrigue = 15
				}
				OR = {
					ai = no
					AND = {
						age = 1
						NOT = {
							has_character_flag = lucky_escape
						}
					}
				}
				OR = {
					trait = vampire_lahmian_visible
					trait = vampire_carstein_visible
					trait = vampire_blood_visible
					trait = vampire_strigoi_visible
					trait = vampire_necrarch_visible
					trait = vampire_jade_visible
					trait = vampire_mahtmasi_visible
				}
			}
			character_event = {
				id = witchhunter.33
			}
		}
	}

	option = {
		name = EVTOPT_WITCHHUNTER_32B # "No, leave them alone..."
		trigger = {
			OR = {
				trait = vampire_lahmian_visible
				trait = vampire_carstein_visible
				trait = vampire_blood_visible
				trait = vampire_strigoi_visible
				trait = vampire_necrarch_visible
				trait = vampire_jade_visible
				trait = vampire_mahtmasi_visible
			}
		}
		FROM = {
			if = {
				limit = {
					is_invincible_trigger = yes
				}
				antideath_effect = yes
				break = yes
			}
			death = {
				death_reason = death_murder
				killer = ROOT
			}
		}
		ai_chance = {
			factor = 100
		}
	}

	option = {
		name = EVTOPT_WITCHHUNTER_32B # "No, leave them alone..."
		trigger = {
			ai = no
			nor = {
				trait = vampire_lahmian_visible
				trait = vampire_carstein_visible
				trait = vampire_blood_visible
				trait = vampire_strigoi_visible
				trait = vampire_necrarch_visible
				trait = vampire_jade_visible
				trait = vampire_mahtmasi_visible
			}
		}
		set_character_flag = vampires_allowed
	}
}

# vampire hunters come, vampire escapes
character_event = {
	id = witchhunter.32
	title = VAMPIRE_HUNTERS # Vampire Hunters
	desc = EVTDESC_WITCHHUNTER_33 # "Your top liege has ordered that open vampires in the realm be exterminated - temple armies led by Witch Hunters approach with fire and silver blades, but due to your skills you manage to escape them alive!"
	picture = "GFX_evt_witch_hunters"
	is_triggered_only = yes

	immediate = {
		log = "work event id = witchhunter.32 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPT_WITCHHUNTER_33A # "My lands... lost!"
		banish = yes
		set_character_flag = lucky_escape
	}
}

# vampire hunters come, vampire escapes
character_event = {
	id = witchhunter.33
	title = VAMPIRE_HUNTERS # Vampire Hunters
	desc = EVTDESC_WITCHHUNTER_34 # "Your top liege has ordered that open vampires in the realm be exterminated and temple armies led by Witch Hunters approach with fire and silver blades. You try to run, but they manage to corner you!"
	picture = "GFX_evt_witch_hunters"
	is_triggered_only = yes

	immediate = {
		log = "work event id = witchhunter.33 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPT_WITCHHUNTER_34A # "No, not like this - I was promised eternal life!"
		if = {
			limit = {
				is_invincible_trigger = yes
			}
			antideath_effect = yes
			break = yes
		}
		add_trait = staked
		death = {
			death_reason = death_execution_burning
			killer = FROM
		}
	}
}

# Pick up event - if there are no witch hunters in the realm, the top liege spawns several himself on_yearly_pulse
character_event = {
	id = witchhunter.34
	title = WITCH_HUNTERS # Witch Hunters
	desc = EVTDESC_WITCHHUNTER_35 # "Witch Hunters are a necessary evil - though their methods can be cruel, they are the first line of defense against the spread of Chaos. Since there are no witch hunters in your realm, do you want to invite some?"
	picture = "GFX_evt_witch_hunters"
	is_triggered_only = yes
	only_playable = yes
	religion_group = old_world_group

	trigger = {
		higher_tier_than = COUNT
		nor = {
			top_liege = {
				has_character_modifier = expelled_k_witch_hunters_order
			}
			any_realm_character = {
				trait = witch_hunter
			}
			has_character_flag = witchhunter34
		}
		is_nomadic = no
		is_tribal = no
	}

	immediate = {
		log = "work event id = witchhunter.34 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPT_WITCHHUNTER_35A # "Yes, immediately."
		create_random_priest = {
			random_traits = yes
			dynasty = culture
			culture = witchhunter_culture
			religion = sigmarite
			female = no
			age = 18
		}
		new_character = {
			add_trait = witch_hunter
		}
		create_random_priest = {
			random_traits = yes
			dynasty = culture
			culture = witchhunter_culture
			religion = sigmarite
			female = no
			age = 28
		}
		new_character = {
			add_trait = witch_hunter
		}
	}

	option = {
		name = EVTOPT_WITCHHUNTER_35B # "No, Witch Hunters are troublesome."
		trigger = {
			ai = no
		}
		increase_visibility_minor_effect = yes
		set_character_flag = witchhunter34
	}
}

# Now for open chaos religion hunting
# first a witch hunter who is not on a witch hunt tells the liege that there are open vampires in his realm
character_event = {
	id = witchhunter.35
	title = WITCH_HUNT # Witch Hunt
	desc = witchhunter35desc # "There are known worshippers of Chaos in the realm... these must be rooted out with fire, steel, and cannon if need be!"
	picture = "GFX_evt_witch_hunters"
	is_triggered_only = yes
	prisoner = no
	min_age = 16

	trigger = {
		trait = witch_hunter
		nor = {
			trait = incapable
			trait = on_witch_hunt
		}
		top_liege = {
			NOT = {
				has_character_modifier = expelled_k_witch_hunters_order
			}
		}
		OR = {
			any_realm_character = {
				nor = {
					trait = khorne_demon
					trait = nurgle_demon
					trait = slaanesh_demon
					trait = tzeentch_demon
					trait = hashut_kdaai
				}
				OR = {
					religion = khorne
					religion = slaanesh
					religion = nurgle
					religion = tzeentch
					religion = chaos
				}
			}
			any_realm_lord = {
				nor = {
					trait = khorne_demon
					trait = nurgle_demon
					trait = slaanesh_demon
					trait = tzeentch_demon
					trait = hashut_kdaai
				}
				OR = {
					religion = khorne
					religion = slaanesh
					religion = nurgle
					religion = tzeentch
					religion = chaos
				}
			}
		}
		top_liege = {
			NOT = {
				has_character_flag = chaos_allowed
			}
			religion_group = old_world_group
		}
	}

	immediate = {
		log = "work event id = witchhunter.35 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPT_WITCHHUNTER_30A # "I must inform my liege at once!"
		top_liege = {
			character_event = {
				id = witchhunter.36
			}
		}
	}
}

# top liege is informed
character_event = {
	id = witchhunter.36
	title = WITCH_HUNT # Witch Hunt
	desc = witchhunter36desc # "My liege, there are known followers of the ruinous powers infesting your realm! These must be hunted down at once. Will you give the temple the authority to cleanse the land of this foul taint?"
	picture = "GFX_evt_witch_hunters"
	is_triggered_only = yes

	immediate = {
		log = "work event id = witchhunter.36 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPT_WITCHHUNTER_31A # "Yes, of course - get to work at once."
		# vampires with either martial or intrigue of 15+ manage to escape and are banished
		any_realm_character = {
			limit = {
				nor = {
					trait = khorne_demon
					trait = nurgle_demon
					trait = slaanesh_demon
					trait = tzeentch_demon
					trait = hashut_kdaai
				}
				OR = {
					ai = no
					AND = {
						age = 1
						NOT = {
							has_character_flag = lucky_escape
						}
					}
				}
				OR = {
					martial = 15
					intrigue = 15
				}
				OR = {
					religion = khorne
					religion = slaanesh
					religion = nurgle
					religion = tzeentch
					religion = chaos
				}
			}
			character_event = {
				id = witchhunter.37
			}
		}
		any_realm_lord = {
			limit = {
				nor = {
					trait = khorne_demon
					trait = nurgle_demon
					trait = slaanesh_demon
					trait = tzeentch_demon
					trait = hashut_kdaai
				}
				OR = {
					ai = no
					AND = {
						age = 1
						NOT = {
							has_character_flag = lucky_escape
						}
					}
				}
				OR = {
					martial = 15
					intrigue = 15
				}
				OR = {
					religion = khorne
					religion = slaanesh
					religion = nurgle
					religion = tzeentch
					religion = chaos
				}
			}
			character_event = {
				id = witchhunter.37
			}
		}
		# chaos guys with less get destroyed
		any_realm_character = {
			limit = {
				nor = {
					trait = khorne_demon
					trait = nurgle_demon
					trait = slaanesh_demon
					trait = tzeentch_demon
					trait = hashut_kdaai
					martial = 15
					intrigue = 15
				}
				OR = {
					ai = no
					has_character_flag = lucky_escape
				}
				OR = {
					religion = khorne
					religion = slaanesh
					religion = nurgle
					religion = tzeentch
					religion = chaos
				}
			}
			character_event = {
				id = witchhunter.38
			}
		}
		any_realm_lord = {
			limit = {
				nor = {
					trait = khorne_demon
					trait = nurgle_demon
					trait = slaanesh_demon
					trait = tzeentch_demon
					trait = hashut_kdaai
					martial = 15
					intrigue = 15
				}
				OR = {
					ai = no
					has_character_flag = lucky_escape
				}
				OR = {
					religion = khorne
					religion = slaanesh
					religion = nurgle
					religion = tzeentch
					religion = chaos
				}
			}
			character_event = {
				id = witchhunter.38
			}
		}
	}

	option = {
		name = EVTOPT_WITCHHUNTER_32B # "No, leave them alone..."
		trigger = {
			ai = no
		}
		set_character_flag = chaos_allowed
		increase_visibility_effect = yes
	}
}

# witch hunters come, chaos escapes
character_event = {
	id = witchhunter.37
	title = VAMPIRE_HUNTERS # Vampire Hunters
	desc = witchhunter37desc # "Your top liege has ordered that open chaos followers in the realm be exterminated - temple armies led by Witch Hunters approach with fire and steel, but due to your skills you manage to escape them alive!"
	picture = "GFX_evt_witch_hunters"
	is_triggered_only = yes

	immediate = {
		log = "work event id = witchhunter.37 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPT_WITCHHUNTER_33A # "My lands... lost!"
		banish = yes
		set_character_flag = lucky_escape
	}
}

# vampire hunters come, vampire escapes
character_event = {
	id = witchhunter.38
	title = VAMPIRE_HUNTERS # Vampire Hunters
	desc = witchhunter38desc # "Your top liege has ordered that open chaos followers in the realm be exterminated and temple armies led by Witch Hunters approach with fire and steel. You try to run, but they manage to corner you!"
	picture = "GFX_evt_witch_hunters"
	is_triggered_only = yes

	immediate = {
		log = "work event id = witchhunter.38 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPT_WITCHHUNTER_34A # "No, not like this - I was promised eternal life!"
		if = {
			limit = {
				is_invincible_trigger = yes
			}
			antideath_effect = yes
			break = yes
		}
		add_trait = staked
		death = {
			death_reason = death_execution_burning
			killer = FROM
		}
	}
}

# MAINTENANCE EVENT TO CLEAR THE EXONERATE FLAG EVERY 2 YEARS, HIDDEN EVENT CALLED FROM BI ANNUAL PULSE ON ACTIONS
# character_event = {

# id = witchhunter.39
# title = VAMPIRE_HUNTERS # Vampire Hunters

# desc = witchhunter39desc # HIDDEN
# picture = "GFX_evt_witch_hunters"

# hide_window = yes
# 	is_triggered_only = yes

# 	trigger = {
# 		has_character_modifier = wh_accused

# 		age = 1
# 	}

# 	option = {
# 		name = EVTOPT_WITCHHUNTER_34A # HIDDEN

# 		remove_character_flag = wh_accused
# 	}

# }
# EVENT TO MAKE UNLANDED CHAOS/VAMPS DISAPPEAR VOLUNTARILY, triggered on yearly pulse
character_event = {
	id = witchhunter.40
	title = WITCH_HUNTERS
	desc = witchhunter40desc # Your top liege is a servant of the gods of good, and will not tolerate you in his realm. It is better to flee now, rather than to risk destruction at the hands of the Witch Hunters...
	picture = "GFX_evt_witch_hunters"
	is_triggered_only = yes

	trigger = {
		nor = {
			trait = khorne_demon
			trait = nurgle_demon
			trait = slaanesh_demon
			trait = tzeentch_demon
		}
		OR = {
			religion_group = chaos_gods_group
			trait = vampire_lahmian_visible
			trait = vampire_carstein_visible
			trait = vampire_blood_visible
			trait = vampire_strigoi_visible
			trait = vampire_necrarch_visible
			trait = vampire_jade_visible
			trait = vampire_mahtmasi_visible
		}
		is_landed = no
		top_liege = {
			religion_group = old_world_group
		}
		top_liege = {
			NOT = {
				has_character_modifier = expelled_k_witch_hunters_order
			}
		}
	}

	immediate = {
		log = "work event id = witchhunter.40 for [Root.GetBestName]"
	}

	option = {
		name = witchhunter40A # Agreed, I must leave at once!
		random_independent_ruler = {
			limit = {
				religion_group = ROOT
			}
			ROOT = {
				move_character = PREV
			}
		}
	}
}
