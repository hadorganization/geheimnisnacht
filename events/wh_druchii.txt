namespace = wh_druchii

# Umbrella event when started the preparation for an invasion (Druchii) 0 - 50
character_event = {
	id = wh_druchii.1
	hide_window = yes
	is_triggered_only = yes

	# the chain stops when the modifier expires
	trigger = {
		has_character_modifier = preparing_ulthuan_invasion
	}

	immediate = {
		log = "work event id = wh_druchii.1 for [Root.GetBestName]"
		random_list = {
			30 = {
				# Some troops
				character_event = {
					id = wh_druchii.6
					days = 40
					random = 15
				}
			}
			20 = {
				modifier = {
					factor = 1.25
					martial = 15
				}
				modifier = {
					factor = 1.25
					martial = 20
				}
				modifier = {
					factor = 1.25
					diplomacy = 15
				}
				modifier = {
					factor = 1.25
					diplomacy = 20
				}
				modifier = {
					factor = 1.25
					prestige = 1000
				}
				modifier = {
					factor = 0.75
					NOT = {
						martial = 10
					}
				}
				modifier = {
					factor = 0.5
					NOT = {
						martial = 7
					}
				}
				modifier = {
					factor = 0.75
					NOT = {
						diplomacy = 10
					}
				}
				modifier = {
					factor = 0.5
					NOT = {
						diplomacy = 7
					}
				}
				modifier = {
					factor = 0.5
					NOT = {
						prestige = 100
					}
				}
				# Famous Commander
				character_event = {
					id = wh_druchii.5
					days = 40
					random = 15
				}
			}
			10 = {
				modifier = {
					factor = 1.25
					martial = 15
				}
				modifier = {
					factor = 1.25
					martial = 20
				}
				modifier = {
					factor = 1.25
					diplomacy = 15
				}
				modifier = {
					factor = 1.25
					diplomacy = 20
				}
				modifier = {
					factor = 1.25
					prestige = 1000
				}
				modifier = {
					factor = 0.75
					NOT = {
						martial = 10
					}
				}
				modifier = {
					factor = 0.5
					NOT = {
						martial = 7
					}
				}
				modifier = {
					factor = 0.75
					NOT = {
						diplomacy = 10
					}
				}
				modifier = {
					factor = 0.5
					NOT = {
						diplomacy = 7
					}
				}
				modifier = {
					factor = 0.5
					NOT = {
						prestige = 100
					}
				}
				# More troops
				character_event = {
					id = wh_druchii.4
					days = 40
					random = 15
				}
			}
			40 = {
				# repeat each month until expirement
				character_event = {
					id = wh_druchii.1
					days = 40
					random = 15
				}
			}
		}
	}
}

# Ulthuan is under attack!
character_event = {
	id = wh_druchii.2
	desc = {
		text = EVTDESCA_druchiiinv.2
		trigger = {
			religion_group = cadai_group
		}
	}
	desc = {
		text = EVTDESCB_druchiiinv.2
		trigger = {
			religion_group = cytharai_group
		}
	}
	picture = GFX_evt_ulthuan_war
	border = GFX_event_normal_frame_war
	ai = no
	is_triggered_only = yes

	immediate = {
		log = "work event id = wh_druchii.2 for [Root.GetBestName]"
	}

	option = {
		trigger = {
			religion_group = cadai_group
		}
		name = EVTOPTAdruchiiinv.2
	}

	option = {
		trigger = {
			religion_group = cytharai_group
		}
		name = EVTOPTBdruchiiinv.2
	}
}

# You waited to long
character_event = {
	id = wh_druchii.3
	desc = {
		text = EVTDESCA_druchiiinv.3
		trigger = {
			religion_group = cadai_group
		}
	}
	desc = {
		text = EVTDESCB_druchiiinv.3
		trigger = {
			religion_group = cytharai_group
		}
	}
	picture = GFX_evt_ulthuan_war
	border = GFX_event_normal_frame_war
	is_triggered_only = yes

	# If you start the war, the event won't pop up
	trigger = {
		NOT = {
			any_war = {
				using_cb = ulthuan_invasion
			}
		}
	}

	immediate = {
		log = "work event id = wh_druchii.3 for [Root.GetBestName]"
	}

	option = {
		trigger = {
			religion_group = cadai_group
		}
		name = EVTOPTAdruchiiinv.3
		disband_event_forces = prepared_invasion
		clr_character_flag = preparing_druchii_invasion
		prestige = -1000
		add_character_modifier = {
			modifier = attempted_ulthuan_invasion
			duration = 3650
		}
	}

	option = {
		trigger = {
			religion_group = cytharai_group
		}
		name = EVTOPTBdruchiiinv.3
		disband_event_forces = prepared_invasion
		clr_character_flag = preparing_druchii_invasion
		prestige = -1000
		add_character_modifier = {
			modifier = attempted_ulthuan_invasion
			duration = 3650
		}
	}
}

# Troops flock to your banner
character_event = {
	id = wh_druchii.4
	desc = {
		text = EVTDESCA_druchiiinv.4
		trigger = {
			religion_group = cadai_group
		}
	}
	desc = {
		text = EVTDESCB_druchiiinv.4
		trigger = {
			religion_group = cytharai_group
		}
	}
	picture = GFX_evt_ulthuan_war
	border = GFX_event_normal_frame_war
	is_triggered_only = yes

	# the chain stops when the modifier expires
	trigger = {
		has_character_modifier = preparing_ulthuan_invasion
	}

	immediate = {
		log = "work event id = wh_druchii.4 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTBdruchiiinv.4
		capital_scope = {
			ROOT = {
				spawn_unit = {
					province = PREV
					owner = ROOT
					match_character = ROOT
					match_mult = 0.01
					earmark = prepared_invasion
					attrition = 1.0
				}
				spawn_fleet = {
					province = closest
					owner = ROOT
					match_character = ROOT
					match_mult = 0.01
					match_min = 7
					earmark = prepared_invasion
				}
			}
		}
		hidden_tooltip = {
			character_event = {
				id = wh_druchii.1
				days = 40
				random = 15
			}
		}
	}
}

# A hero and his retinue appear in your court
character_event = {
	id = wh_druchii.5
	desc = {
		text = EVTDESCA_druchiiinv.5
		trigger = {
			religion_group = cadai_group
		}
	}
	desc = {
		text = EVTDESCB_druchiiinv.5
		trigger = {
			religion_group = cytharai_group
		}
	}
	picture = GFX_evt_ulthuan_war
	border = GFX_event_normal_frame_war
	is_triggered_only = yes

	# the chain stops when the modifier expires
	trigger = {
		has_character_modifier = preparing_ulthuan_invasion
	}

	immediate = {
		log = "work event id = wh_druchii.5 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTBdruchiiinv.5
		capital_scope = {
			create_character = {
				random_traits = yes
				dynasty = random
				religion = ROOT
				culture = ROOT
				female = no
				age = 30
				attributes = {
					martial = 8
				}
				trait = brave
				trait = zealous
				trait = brilliant_strategist
				trait = holy_warrior
			}
			new_character = {
				spawn_unit = {
					province = PREV
					owner = ROOT
					match_character = ROOT
					match_mult = 0.015
					earmark = prepared_invasion
					attrition = 1.0
				}
			}
		}
		spawn_fleet = {
			province = closest
			owner = ROOT
			match_character = ROOT
			match_mult = 0.15
			match_min = 10
			earmark = prepared_invasion
		}
		hidden_tooltip = {
			character_event = {
				id = wh_druchii.1
				days = 40
				random = 15
			}
		}
	}
}

# A smaller force arrives for the invasion
character_event = {
	id = wh_druchii.6
	desc = {
		text = EVTDESCA_druchiiinv.6
		trigger = {
			religion_group = cadai_group
		}
	}
	desc = {
		text = EVTDESCB_druchiiinv.6
		trigger = {
			religion_group = cytharai_group
		}
	}
	picture = GFX_evt_ulthuan_war
	border = GFX_event_normal_frame_war
	is_triggered_only = yes

	# the chain stops when the modifier expires
	trigger = {
		has_character_modifier = preparing_ulthuan_invasion
	}

	immediate = {
		log = "work event id = wh_druchii.6 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTBdruchiiinv.6
		capital_scope = {
			ROOT = {
				spawn_unit = {
					province = PREV
					owner = ROOT
					match_character = ROOT
					match_mult = 0.0075
					earmark = prepared_invasion
					attrition = 1.0
				}
				spawn_fleet = {
					province = closest
					owner = ROOT
					match_character = ROOT
					match_mult = 0.0075
					match_min = 5
					earmark = prepared_invasion
				}
			}
		}
		hidden_tooltip = {
			character_event = {
				id = wh_druchii.1
				days = 40
				random = 15
			}
		}
	}
}

# Stupid AI, attack!
character_event = {
	id = wh_druchii.7
	hide_window = yes
	is_triggered_only = yes

	immediate = {
		log = "work event id = wh_druchii.7 for [Root.GetBestName]"
		e_ulthuan = {
			holder_scope = {
				ROOT = {
					war = {
						casus_belli = ulthuan_invasion
						target = PREVPREV # The top liege of the owner of the province
						thirdparty_title = PREV # The de jure kingdom
					}
				}
			}
		}
	}
}

# kill in some ways 50 - 100
# Feed to nauglir - (Jailer)
character_event = {
	id = wh_druchii.50
	desc = EVTDESCA_druchiiinv.8
	picture = GFX_evt_nauglir
	border = GFX_event_normal_frame_war
	is_triggered_only = yes

	immediate = {
		log = "work event id = wh_druchii.50 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTAdruchiiinv.8
		any_vassal = {
			limit = {
				nor = {
					trait = brave
					trait = quick
					trait = genius
				}
			}
			opinion = {
				modifier = opinion_scared_into_submission
				who = ROOT
			}
		}
		any_courtier = {
			limit = {
				nor = {
					trait = brave
					trait = quick
					trait = genius
				}
				is_ruler = no
			}
			opinion = {
				modifier = opinion_scared_into_submission
				who = ROOT
			}
		}
	}
}

# Feed to nauglir - (Victim)
character_event = {
	id = wh_druchii.51
	desc = EVTDESCA_druchiiinv.9
	picture = GFX_evt_nauglir
	border = GFX_event_normal_frame_war
	ai = no
	is_triggered_only = yes

	immediate = {
		log = "work event id = wh_druchii.51 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTAdruchiiinv.9
	}
}

# Feed to dragon - (Jailer)
character_event = {
	id = wh_druchii.52
	desc = EVTDESCA_druchiiinv.10
	picture = GFX_evt_dragon
	border = GFX_event_normal_frame_war
	is_triggered_only = yes

	immediate = {
		log = "work event id = wh_druchii.52 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTAdruchiiinv.10
		any_vassal = {
			limit = {
				nor = {
					trait = brave
					trait = quick
					trait = genius
				}
			}
			opinion = {
				modifier = opinion_scared_into_submission
				who = ROOT
			}
		}
		any_courtier = {
			limit = {
				nor = {
					trait = brave
					trait = quick
					trait = genius
				}
				is_ruler = no
			}
			opinion = {
				modifier = opinion_scared_into_submission
				who = ROOT
			}
		}
	}
}

# Feed to dragon - (Victim)
character_event = {
	id = wh_druchii.53
	desc = EVTDESCA_druchiiinv.11
	picture = GFX_evt_dragon
	border = GFX_event_normal_frame_war
	ai = no
	is_triggered_only = yes

	immediate = {
		log = "work event id = wh_druchii.53 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTAdruchiiinv.11
	}
}

# Feed to gryphon - (Jailer)
character_event = {
	id = wh_druchii.54
	desc = EVTDESCA_druchiiinv.12
	picture = GFX_evt_gryphon
	border = GFX_event_normal_frame_war
	is_triggered_only = yes

	immediate = {
		log = "work event id = wh_druchii.54 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTAdruchiiinv.12
		any_vassal = {
			limit = {
				nor = {
					trait = brave
					trait = quick
					trait = genius
				}
			}
			opinion = {
				modifier = opinion_scared_into_submission
				who = ROOT
			}
		}
		any_courtier = {
			limit = {
				nor = {
					trait = brave
					trait = quick
					trait = genius
				}
				is_ruler = no
			}
			opinion = {
				modifier = opinion_scared_into_submission
				who = ROOT
			}
		}
	}
}

# Feed to gryphon - (Victim)
character_event = {
	id = wh_druchii.55
	desc = EVTDESCA_druchiiinv.13
	picture = GFX_evt_gryphon
	border = GFX_event_normal_frame_war
	ai = no
	is_triggered_only = yes

	immediate = {
		log = "work event id = wh_druchii.55 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTAdruchiiinv.13
	}
}

# Feed to wyvern - (Jailer)
character_event = {
	id = wh_druchii.56
	desc = EVTDESCA_druchiiinv.12005
	picture = GFX_evt_wyvern
	border = GFX_event_normal_frame_war
	is_triggered_only = yes

	immediate = {
		log = "work event id = wh_druchii.56 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTAdruchiiinv.12005
		any_vassal = {
			limit = {
				nor = {
					trait = brave
					trait = quick
					trait = genius
				}
			}
			opinion = {
				modifier = opinion_scared_into_submission
				who = ROOT
			}
		}
		any_courtier = {
			limit = {
				nor = {
					trait = brave
					trait = quick
					trait = genius
				}
				is_ruler = no
			}
			opinion = {
				modifier = opinion_scared_into_submission
				who = ROOT
			}
		}
	}
}

# Feed to wyvern - (Victim)
character_event = {
	id = wh_druchii.57
	desc = EVTDESCA_druchiiinv.13005
	picture = GFX_evt_wyvern
	border = GFX_event_normal_frame_war
	ai = no
	is_triggered_only = yes

	immediate = {
		log = "work event id = wh_druchii.57 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTAdruchiiinv.13005
	}
}

# some favor 100 - 200
# Malekith dies (ping)
character_event = {
	id = wh_druchii.100
	hide_window = yes
	is_triggered_only = yes

	trigger = {
		trait = malekith
	}

	immediate = {
		log = "work event id = wh_druchii.100 for [Root.GetBestName]"
		killer = {
			long_character_event = {
				id = wh_druchii.101
			}
		}
		# destroy the Empire
		current_heir = {
			character_event = {
				id = wh_druchii.102
				days = 24
				random = 15
			}
		}
	}
}

# Malekith dies (killer)
long_character_event = {
	id = wh_druchii.101
	title = EVTTITLE_druchiiinv.15
	desc = {
		text = EVTDESCA_druchiiinv.15
		trigger = {
			is_female = yes
			wh_has_any_magic_potential_reveal_trigger = yes
		}
	}
	desc = {
		text = EVTDESCB_druchiiinv.15
		trigger = {
			is_female = no
			wh_has_any_magic_potential_reveal_trigger = yes
		}
	}
	desc = {
		text = EVTDESCC_druchiiinv.15
		trigger = {
			wh_has_any_magic_potential_reveal_trigger = no
		}
	}
	picture = GFX_evt_malekith
	border = GFX_event_long_frame_war
	is_triggered_only = yes

	immediate = {
		log = "work event id = wh_druchii.15 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTAdruchiiinv.15
		prestige = 500
	}
}

# Malekith dies - Naggaroth dissolves into infighting
character_event = {
	id = wh_druchii.102
	desc = EVTDESCA_druchiiinv.20
	picture = GFX_evt_malekith
	border = GFX_event_normal_frame_war
	is_triggered_only = yes

	immediate = {
		log = "work event id = wh_druchii.102 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTAdruchiiinv.20
		prestige = -200
		e_naggaroth = {
			destroy_landed_title = THIS
		}
		hidden_tooltip = {
			set_government_type = druchii_government
		}
	}
}

# Malekith loses the title - Naggaroth dissolves into infighting
# ROOT is the new holder, FROM is the title, FROMFROM is the old holder
character_event = {
	id = wh_druchii.103
	desc = EVTDESCA_druchiiinv.21
	picture = GFX_evt_malekith
	border = GFX_event_normal_frame_war
	is_triggered_only = yes

	trigger = {
		FROMFROM = {
			trait = malekith
		}
		FROM = {
			title = e_naggaroth
		}
	}

	immediate = {
		log = "work event id = wh_druchii.103 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTAdruchiiinv.21
		prestige = -200
		if = {
			limit = {
				any_vassal = {
					has_landed_title = d_blackguard
				}
			}
			d_blackguard = {
				set_government_type = druchii_government
				destroy_landed_title = THIS
			}
		}
		e_naggaroth = {
			set_government_type = druchii_government
			destroy_landed_title = THIS
		}
	}
}

# Malekith cracks on factions
character_event = {
	id = wh_druchii.104
	desc = EVTDESCA_druchiiinv.16
	picture = GFX_evt_malekith
	border = GFX_event_normal_frame_war
	ai = no
	is_triggered_only = yes

	immediate = {
		log = "work event id = wh_druchii.104 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTAdruchiiinv.16
	}
}

# if malekith loses his claim on k_nagarythe, he gets it back on_yearly_pulse
character_event = {
	id = wh_druchii.105
	title = YOUR_CLAIM
	desc = EVTDESCDARKELF.24 # Though temporarily defeated, you will never give up your claims to your ancestral homeland.
	picture = "GFX_evt_large_army"
	only_playable = yes
	culture_group = druchi_group
	is_triggered_only = yes

	trigger = {
		trait = malekith
		nor = {
			has_claim = k_nagarythe
			has_landed_title = k_nagarythe
		}
	}

	immediate = {
		log = "work event id = wh_druchii.105 for [Root.GetBestName]"
	}

	option = {
		name = IT_WILL_BE_MINE
		add_claim = k_nagarythe
	}
}

# A Druchii is under Malekith, not hiding his magical capabilities
character_event = {
	id = wh_druchii.106
	hide_window = yes
	only_men = yes
	capable_only = yes

	trigger = {
		independent = no
		trait = creature_elf
		nor = {
			trait = in_hiding
			trait = malekith
		}
		top_liege = {
			trait = malekith
		}
		OR = {
			wh_is_mage_trigger = yes
			wh_has_any_magic_potential_reveal_trigger = yes
		}
	}

	mean_time_to_happen = {
		years = 5
		modifier = {
			factor = 3
			trait = magic_potential_1
		}
		modifier = {
			factor = 2
			trait = magic_potential_2
		}
		modifier = {
			factor = 1.75
			trait = magic_potential_3
		}
		modifier = {
			factor = 1.5
			trait = magic_potential_4
		}
		modifier = {
			factor = 1.25
			has_character_modifier = magic_power_1
		}
		modifier = {
			factor = 0.75
			has_character_modifier = magic_power_2
		}
		modifier = {
			factor = 0.5
			has_character_modifier = magic_power_3
		}
		modifier = {
			factor = 0.25
			has_character_modifier = magic_power_4
		}
	}

	immediate = {
		log = "work event id = wh_druchii.106 for [Root.GetBestName]"
		character_event = {
			id = wh_druchii.107
		}
	}
}

character_event = {
	id = wh_druchii.107
	desc = {
		text = EVTDESCA_druchiiinv.18
		trigger = {
			FROM = {
				father = {
					NOT = {
						character = ROOT
					}
				}
			}
		}
	}
	desc = {
		text = EVTDESCB_druchiiinv.18
		trigger = {
			FROM = {
				father = {
					character = ROOT
				}
			}
		}
	}
	picture = GFX_evt_malekith
	is_triggered_only = yes

	immediate = {
		log = "work event id = wh_druchii.107 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTAdruchiiinv.18
		trigger = {
			FROM = {
				father = {
					NOT = {
						character = ROOT
					}
				}
			}
		}
		character_event = {
			id = wh_druchii.19
		}
	}

	option = {
		name = EVTOPTBdruchiiinv.18
		trigger = {
			FROM = {
				father = {
					character = ROOT
				}
			}
		}
		character_event = {
			id = wh_druchii.19
		}
	}
}

character_event = {
	id = wh_druchii.108
	desc = EVTDESCA_druchiiinv.19
	picture = GFX_evt_malekith
	is_triggered_only = yes

	immediate = {
		log = "work event id = wh_druchii.108 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTAdruchiiinv.19
		if = {
			limit = {
				is_invincible_trigger = yes
			}
			antideath_effect = yes
			break = yes
		}
		death = {
			death_reason = death_execution
		}
	}
}

# A courtier wins a victory against enemies
character_event = {
	id = wh_druchii.109
	title = A_COURTIER_WINS_A_VICTORY
	desc = EVTDESCDARKELF.0 # While on a border patrol, a courtier won a great victory against a hostile force. He cut into their ranks, and a dozens of them to the sword. He is truly blessed by Khaine!
	picture = "GFX_evt_large_army"
	only_playable = yes
	min_age = 16
	culture_group = druchi_group
	is_triggered_only = yes

	trigger = {
		any_courtier = {
			is_female = no
			age = 16
			martial = 12
			trait = brave
		}
	}

	immediate = {
		log = "work event id = wh_druchii.109 for [Root.GetBestName]"
	}

	option = {
		name = WE_SHALL_HONOR_HIM
		random_courtier = {
			limit = {
				is_female = no
				age = 16
				martial = 12
				trait = brave
			}
			prestige = 100
		}
	}

	option = {
		name = EVTOPTDARKELF.0.b # I could have done just as well.
		trigger = {
			trait = proud
			trait = cruel
			trait = brave
			martial = 12
		}
		random_courtier = {
			limit = {
				is_female = no
				age = 16
				martial = 12
				trait = brave
			}
			prestige = 5
		}
	}
}

# A courtier flees from enemies
character_event = {
	id = wh_druchii.110
	title = A_COURTIER_DISGRACES_HIMSELF
	desc = EVTDESCDARKELF.1 # While on a border patrol, a courtier's warband was ambushed, but he fled and left his men to die! His name is in disgrace, and he has angered Khaine with his cowardice.
	picture = "GFX_evt_large_army"
	only_playable = yes
	min_age = 16
	culture_group = druchi_group
	is_triggered_only = yes

	trigger = {
		any_courtier = {
			is_female = no
			age = 16
			OR = {
				trait = craven
				trait = misguided_warrior
				trait = drunkard
				trait = weak
			}
		}
	}

	immediate = {
		log = "work event id = wh_druchii.110 for [Root.GetBestName]"
	}

	option = {
		name = THAT_WAS_ILLDONE
		random_courtier = {
			limit = {
				is_female = no
				age = 16
				OR = {
					trait = craven
					trait = misguided_warrior
					trait = drunkard
					trait = weak
				}
			}
			prestige = -100
			piety = -100
		}
	}

	option = {
		name = EVTOPTDARKELF.1.b # Imprison him! I'll torture him myself later...
		random_courtier = {
			limit = {
				is_female = no
				age = 16
				OR = {
					trait = craven
					trait = misguided_warrior
					trait = drunkard
					trait = weak
				}
			}
			imprison = yes
			piety = -100
			prestige = -100
		}
	}

	option = {
		name = BANISH_HIM_FOR_COWARDICE
		random_courtier = {
			limit = {
				OR = {
					trait = craven
					trait = misguided_warrior
					trait = drunkard
					trait = weak
				}
				is_female = no
				age = 16
			}
			banish = yes
			piety = -100
			prestige = -100
		}
	}
}

# a high intrigue unlanded courtier plots to kill another courtier - this also reduces teh character population of "useless" courtiers, preventing late game lag for a nearly immortal race
character_event = {
	id = wh_druchii.111
	title = DANGEROUS_SCHEME
	desc = EVTDESCDARKELF.2 # Your lord's court is crowded, and it's time to thin the herd. By getting rid of your competitors, your own favor in the eyes of your liege can only increase...
	picture = "GFX_evt_shadow"
	min_age = 16
	culture_group = druchi_group
	is_triggered_only = yes

	trigger = {
		is_landed = no
		intrigue = 13
	}

	immediate = {
		log = "work event id = wh_druchii.111 for [Root.GetBestName]"
	}

	option = {
		name = I_HAVE_AN_EVIL_PLAN
		wealth = 10
		random_courtier = {
			limit = {
				is_landed = no
				age = 50
				is_councillor = no
				nor = {
					intrigue = 12
					martial = 12
					is_friend = ROOT
				}
			}
			if = {
				limit = {
					is_invincible_trigger = yes
				}
				antideath_effect = yes
				break = yes
			}
			death = {
				death_reason = death_murder_unknown
			}
		}
	}
}

# ambitious Dark Elves frequently get rivals
character_event = {
	id = wh_druchii.112
	title = A_HATED_RIVAL
	desc = EVTDESCDARKELF.3 # While working on one of your schemes, a rival at court has emerged. You will have to work towards destroying this individual before you yourself are destroyed!
	picture = "GFX_evt_shadow"
	min_age = 16
	culture_group = druchi_group
	is_triggered_only = yes

	trigger = {
		is_ruler = no
		OR = {
			intrigue = 10
			martial = 10
		}
	}

	immediate = {
		log = "work event id = wh_druchii.112 for [Root.GetBestName]"
	}

	option = {
		name = I_WILL_PREVAIL
		random_courtier = {
			limit = {
				nor = {
					is_rival = ROOT
					is_friend = ROOT
				}
			}
			add_rival = ROOT
		}
		liege = {
			character_event = {
				id = wh_druchii.113
				days = 7
			}
		}
	}
}

# liege is informed of rivalry between two courtiers
character_event = {
	id = wh_druchii.113
	title = RIVALRY
	desc = EVTDESCDARKELF.4 # Court rumors say that one of your courtiers has gained a rival at court; it should be interesting to see how this plays out in the future as they work towards foiling each other's schemes.
	picture = "GFX_evt_shadow"
	ai = no
	is_triggered_only = yes

	trigger = {
		not = {
			has_character_flag = wh_druchii.113_block
		}
	}

	immediate = {
		log = "work event id = wh_druchii.113 for [Root.GetBestName]"
	}

	option = {
		name = THE_STRONGEST_WILL_SURVIVE
	}

	option = {
		name = EVTOPTDARKELF.4.b # Do not bother me with this again.
		set_character_flag = wh_druchii.113_block
	}
}

# Prisoner from the Bretonnia event arrives in Naggaroth
# Evil ruler gets offer to buy noble
character_event = {
	id = wh_druchii.114
	title = CORSAIRS_OFFER_YOU_A_DEAL
	desc = EVTDESCDARKELF.5 # A group of corsairs have captured a noble, and offer to sell him to you for a small fee. He is surely worth more than that in ransom... or else he would make a worthy sacrifice to Khaine?
	picture = "GFX_evt_into_the_dungeon"
	is_triggered_only = yes

	immediate = {
		log = "work event id = wh_druchii.114 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTDARKELF.5.a # A most excellent deal. Throw him in the cells!
		wealth = -10
		FROM = {
			character_event = {
				id = wh_druchii.115
				days = 2
			}
		}
	}

	option = {
		trigger = {
			ai = no
		}
		name = NOT_INTERESTED
	}
}

# defeated ruler is imprisoned
character_event = {
	id = wh_druchii.115
	title = PRISON
	desc = EVTDESCDARKELF.6 # You pass out, and after days or weeks of fever dreams lying wounded on a ship somewhere, you wake up in a dark dungeon. Gods, where is this place, and why is it so dark and cold?
	picture = "GFX_evt_into_the_dungeon"
	is_triggered_only = yes

	immediate = {
		log = "work event id = wh_druchii.115 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTDARKELF.6.a # W-wait... am I in... Naggaroth?
		imprison = FROM
	}

	option = {
		name = EVTOPTDARKELF.6.b # I'll get out... and when I do...
		imprison = FROM
	}
}

# Now for some events for dark elf rulers

# Can buy some dwarf slaves for province build time and cost modifier
character_event = {
	id = wh_druchii.116
	title = DWARF_SLAVES
	desc = EVTDESCDARKELF.7 # You are approached by a slave trader: He has a fine stock of 100 dwarf slaves, who could help you with building anything in your demesne that you require.
	picture = "GFX_evt_into_the_dungeon"
	only_playable = yes
	culture_group = druchi_group
	is_triggered_only = yes

	trigger = {
		wealth = 1000
		any_demesne_province = {
			NOT = {
				has_province_modifier = dwarf_slaves
			}
		}
		NOT = {
			has_character_flag = wh_druchii.116_block
		}
	}

	immediate = {
		log = "work event id = wh_druchii.116 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTDARKELF.7.a # 500 gold? Sounds like a bargain... dwarf slaves live for at least 20 years.
		random_demesne_province = {
			add_province_modifier = {
				name = dwarf_slaves
				duration = 7300
			}
		}
	}

	option = {
		name = NO_NOT_RIGHT_NOW
	}

	option = {
		name = EVTOPTDARKELF.4.b # Do not bother me with this again.
		trigger = {
			ai = no
		}
		set_character_flag = wh_druchii.116_block
	}
}

# All druchii males are asked to serve a 100 years in the blackguards. 150 - 200
character_event = {
	id = wh_druchii.150
	desc = EVTDESCdruchiiinv22
	picture = "GFX_evt_dark_elf_soldiers"
	border = GFX_event_normal_frame_religion
	only_men = yes
	only_capable = yes
	prisoner = no
	religion = cytharai
	is_triggered_only = yes

	trigger = {
		NOT = {
			trait = disinherited
		}
		trait = creature_elf
		is_ruler = no
		is_heretic = no
		is_title_active = d_blackguard
		is_title_active = e_naggaroth
		liege = {
			holy_order = no
			liege = {
				holy_order = no
			}
		}
	}

	immediate = {
		log = "work event id = wh_druchii.150 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTAdruchiiinv22
		ai_chance = {
			factor = 100
		}
		liege = {
			character_event = {
				id = wh_druchii.151
			}
		}
	}
}

# Young elf should be drafted
character_event = {
	id = wh_druchii.151
	desc = EVTDESCdruchiiinv22001
	picture = "GFX_evt_dark_elf_soldiers"
	border = GFX_event_normal_frame_religion
	is_triggered_only = yes

	immediate = {
		log = "work event id = wh_druchii.151 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTAdruchiiinv22001
		ai_chance = {
			factor = 100
		}
		piety = 50
		FROM = {
			character_event = {
				id = wh_druchii.152
			}
		}
	}

	option = {
		name = EVTOPTBdruchiiinv22001
		wealth = -200
		piety = -150
		prestige = -100
		FROM = {
			character_event = {
				id = wh_druchii.153
			}
		}
	}
}

# Young elf joins the blackguard
character_event = {
	id = wh_druchii.152
	desc = EVTDESCdruchiiinv22002
	picture = "GFX_evt_dark_elf_soldiers"
	border = GFX_event_normal_frame_religion
	is_triggered_only = yes

	immediate = {
		log = "work event id = wh_druchii.152 for [Root.GetBestName]"
	}

	option = {
		name = EXCELLENT
		hidden_tooltip = {
			random_list = {
				70 = {
					modifier = {
						factor = 0.5
						trait = fragile
					}
					modifier = {
						factor = 0.75
						trait = weak
					}
					modifier = {
						factor = 0.85
						trait = soft
					}
					modifier = {
						factor = 1.25
						trait = hardy
					}
					modifier = {
						factor = 1.5
						trait = tough
					}
					modifier = {
						factor = 1.75
						trait = strong
					}
					modifier = {
						factor = 0.5
						trait = craven
					}
					modifier = {
						factor = 1.15
						trait = diligent
					}
					modifier = {
						factor = 0.85
						trait = drunkard
					}
					modifier = {
						factor = 0.85
						trait = addict
					}
					modifier = {
						factor = 1.75
						trait = brave
					}
					modifier = {
						factor = 0.85
						trait = fat
					}
					modifier = {
						factor = 0.85
						trait = undernourished
					}
					modifier = {
						factor = 1.5
						trait = ambitious
					}
					modifier = {
						factor = 0.85
						trait = content
					}
					modifier = {
						factor = 1.85
						trait = duelist
					}
					modifier = {
						factor = 1.5
						trait = hunter
					}
					modifier = {
						factor = 0.5
						trait = wounded
					}
					modifier = {
						factor = 0.25
						trait = maimed
					}
					modifier = {
						factor = 0.75
						trait = infirm
					}
					modifier = {
						factor = 0.25
						trait = blinded
					}
					modifier = {
						factor = 1.25
						trait = tall
					}
					modifier = {
						factor = 0.5
						trait = dwarf
					}
					modifier = {
						factor = 0.5
						trait = hunchback
					}
					modifier = {
						factor = 0.75
						trait = clubfooted
					}
					modifier = {
						factor = 1.25
						martial = 15
					}
					modifier = {
						factor = 0.85
						trait = stressed
					}
					modifier = {
						factor = 0.75
						trait = depressed
					}
					modifier = {
						factor = 0.95
						trait = dim
					}
					modifier = {
						factor = 0.9
						trait = dumb
					}
					modifier = {
						factor = 0.85
						trait = slow
					}
					modifier = {
						factor = 0.8
						trait = idiot
					}
					modifier = {
						factor = 0.75
						trait = imbecile
					}
					modifier = {
						factor = 1.15
						trait = bright
					}
					modifier = {
						factor = 1.2
						trait = smart
					}
					modifier = {
						factor = 1.25
						trait = quick
					}
					modifier = {
						factor = 1.3
						trait = brilliant
					}
					modifier = {
						factor = 1.35
						trait = genius
					}
					modifier = {
						factor = 0.85
						trait = slothful
					}
					modifier = {
						factor = 0.9
						trait = kind
					}
					modifier = {
						factor = 0.9
						trait = humble
					}
					modifier = {
						factor = 0.9
						trait = shy
					}
					modifier = {
						factor = 1.1
						trait = misguided_warrior
					}
					modifier = {
						factor = 1.35
						trait = tough_soldier
					}
					modifier = {
						factor = 1.5
						trait = skilled_tactician
					}
					modifier = {
						factor = 1.75
						trait = brilliant_strategist
					}
					modifier = {
						factor = 1.35
						trait = zealous
					}
					modifier = {
						factor = 1.15
						trait = cruel
					}
					modifier = {
						factor = 0.95
						trait = just
					}
					modifier = {
						factor = 0.85
						trait = complacent
					}
					modifier = {
						factor = 1.5
						trait = robust
					}
					modifier = {
						factor = 0.75
						trait = feeble
					}
					character_event = {
						id = wh_druchii.154
						days = 18750
					}
				}
				30 = {
					character_event = {
						id = wh_druchii.156
						days = 2150
						random = 1500
					}
				}
			}

		}
		d_blackguard = {
			holder_scope = {
				ROOT = {
					move_character = PREV
					hidden_tooltip = {
						clear_wealth = PREV
					}
					spouse = {
						remove_spouse = spouse
						hidden_tooltip = {
							character_event = {
								id = SoA.2863
							}
						}
					}
					add_trait = disinherited
					any_spouse = {
						remove_spouse = PREV
					}
					if = {
						limit = {
							trait = in_hiding
						}
						remove_trait = in_hiding
						clr_character_flag = do_not_disturb
						add_character_modifier = {
							name = went_out_of_hiding_timer
							duration = 180
							hidden = yes
						}
						# Notify plotters and family
						hidden_tooltip = {
							character_event = {
								id = CM.6400
							}
						}
					}
				}
			}
		}
	}
}

# Liege buys his son's way out of the draft
character_event = {
	id = wh_druchii.153
	desc = EVTDESCdruchiiinv22003
	picture = "GFX_evt_dark_elf_soldiers"
	border = GFX_event_normal_frame_religion
	is_triggered_only = yes

	immediate = {
		log = "work event id = wh_druchii.153 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTAdruchiiinv22003
		e_naggaroth = {
			holder_scope = {
				opinion = {
					who = FROM
					modifier = opinion_refused_request_holy_order
				}
			}
		}
	}
}

# 50 years have passed, do you want to come back?
character_event = {
	id = wh_druchii.154
	desc = EVTDESCdruchiiinv22004
	picture = "GFX_evt_dark_elf_soldiers"
	border = GFX_event_normal_frame_religion
	is_triggered_only = yes

	immediate = {
		log = "work event id = wh_druchii.154 for [Root.GetBestName]"
		random = {
			chance = 30
			add_trait = cruel
		}
		random = {
			chance = 30
			add_trait = brave
		}
		random = {
			chance = 10
			add_trait = robust
		}
		random = {
			chance = 5
			add_trait = zealous
		}
		random = {
			chance = 50
			add_trait = scarred
		}
		random = {
			chance = 5
			add_trait = maimed
		}
		random = {
			chance = 5
			change_variable = {
				which = "lunatic_counter"
				value = 4
			}
			# lunacy counter
			hidden_tooltip = {
				character_event = {
					id = mutation.1005
				}
			}
		}
	}

	option = {
		name = EVTOPTAdruchiiinv22004
		prestige = 100
		add_trait = druchi_black_guard
		remove_trait = disinherited
		hidden_tooltip = {
			if = {
				limit = {
					is_close_relative = FROMFROM
				}
				FROMFROM = {
					character_event = {
						id = wh_druchii.155
						days = 15
						random = 7
					}
				}
			}
		}
		ai_chance = {
			factor = 30
			modifier = {
				factor = 0.25
				trait = craven
			}
			modifier = {
				factor = 0.75
				trait = ambitious
			}
			modifier = {
				factor = 0.75
				trait = deceitful
			}
		}
	}

	option = {
		name = EVTOPTBdruchiiinv22004
		move_character = FROMFROM
		remove_trait = disinherited
		prestige = -50
		ai_chance = {
			factor = 70
			modifier = {
				factor = 0.75
				trait = brave
			}
			modifier = {
				factor = 0.75
				trait = content
			}
			modifier = {
				factor = 0.75
				trait = shy
			}
		}
	}
}

# Notify liege the relative is not coming back
character_event = {
	id = wh_druchii.155
	desc = EVTDESCdruchiiinv22005
	picture = "GFX_evt_dark_elf_soldiers"
	border = GFX_event_normal_frame_religion
	ai = no
	is_triggered_only = yes

	immediate = {
		log = "work event id = wh_druchii.155 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTAdruchiiinv22005
	}
}

# Druchii blackguard dies during draft
character_event = {
	id = wh_druchii.156
	desc = EVTDESCdruchiiinv22006
	picture = "GFX_evt_dark_elf_soldiers"
	border = GFX_event_normal_frame_religion
	is_triggered_only = yes

	immediate = {
		log = "work event id = wh_druchii.156 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTAdruchiiinv22006
		death = {
			death_reason = death_battle
		}
	}
}

# Young elf wants to be a Witch 200 - 250
character_event = {
	id = wh_druchii.200
	desc = EVTDESCdruchiiinv23
	picture = "GFX_evt_witch_elf"
	border = GFX_event_normal_frame_religion
	is_triggered_only = yes

	immediate = {
		log = "work event id = wh_druchii.200 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTAdruchiiinv23
		ai_chance = {
			factor = 100
		}
		piety = 50
		FROM = {
			character_event = {
				id = wh_druchii.201
			}
		}
	}

	option = {
		name = EVTOPTBdruchiiinv23
		piety = -250
	}
}

# Become witch, start training.
character_event = {
	id = wh_druchii.201
	desc = EVTDESCdruchiiinv23001
	picture = "GFX_evt_witch_elf"
	border = GFX_event_normal_frame_religion
	is_triggered_only = yes

	immediate = {
		log = "work event id = wh_druchii.201 for [Root.GetBestName]"
		any_lover = {
			remove_lover = ROOT
		}
		any_spouse = {
			remove_spouse = ROOT
		}
		add_trait = druchi_witch_elf
		random = {
			chance = 15
			add_trait = zealous
		}
		clear_wealth = ROOT
		religion = cytharai
	}

	option = {
		name = EVTOPTAdruchiiinv23001
		hidden_tooltip = {
			random_list = {
				65 = {
					modifier = {
						factor = 1.5
						trait = zealous
					}
					modifier = {
						factor = 0.75
						trait = cynical
					}
					modifier = {
						factor = 0.5
						trait = fragile
					}
					modifier = {
						factor = 0.75
						trait = weak
					}
					modifier = {
						factor = 0.85
						trait = soft
					}
					modifier = {
						factor = 1.25
						trait = hardy
					}
					modifier = {
						factor = 1.5
						trait = tough
					}
					modifier = {
						factor = 1.75
						trait = strong
					}
					modifier = {
						factor = 0.5
						trait = craven
					}
					modifier = {
						factor = 1.15
						trait = diligent
					}
					modifier = {
						factor = 0.85
						trait = drunkard
					}
					modifier = {
						factor = 0.85
						trait = addict
					}
					modifier = {
						factor = 1.75
						trait = brave
					}
					modifier = {
						factor = 0.85
						trait = fat
					}
					modifier = {
						factor = 0.85
						trait = undernourished
					}
					modifier = {
						factor = 1.5
						trait = ambitious
					}
					modifier = {
						factor = 0.85
						trait = content
					}
					modifier = {
						factor = 1.85
						trait = duelist
					}
					modifier = {
						factor = 1.5
						trait = hunter
					}
					modifier = {
						factor = 0.5
						trait = wounded
					}
					modifier = {
						factor = 0.25
						trait = maimed
					}
					modifier = {
						factor = 0.75
						trait = infirm
					}
					modifier = {
						factor = 0.25
						trait = blinded
					}
					modifier = {
						factor = 1.25
						trait = tall
					}
					modifier = {
						factor = 0.5
						trait = dwarf
					}
					modifier = {
						factor = 0.5
						trait = hunchback
					}
					modifier = {
						factor = 0.75
						trait = clubfooted
					}
					modifier = {
						factor = 1.25
						martial = 15
					}
					modifier = {
						factor = 0.85
						trait = stressed
					}
					modifier = {
						factor = 0.75
						trait = depressed
					}
					modifier = {
						factor = 0.95
						trait = dim
					}
					modifier = {
						factor = 0.9
						trait = dumb
					}
					modifier = {
						factor = 0.85
						trait = slow
					}
					modifier = {
						factor = 0.8
						trait = idiot
					}
					modifier = {
						factor = 0.75
						trait = imbecile
					}
					modifier = {
						factor = 1.15
						trait = bright
					}
					modifier = {
						factor = 1.2
						trait = smart
					}
					modifier = {
						factor = 1.25
						trait = quick
					}
					modifier = {
						factor = 1.3
						trait = brilliant
					}
					modifier = {
						factor = 1.35
						trait = genius
					}
					modifier = {
						factor = 0.85
						trait = slothful
					}
					modifier = {
						factor = 0.9
						trait = kind
					}
					modifier = {
						factor = 0.9
						trait = humble
					}
					modifier = {
						factor = 0.9
						trait = shy
					}
					modifier = {
						factor = 1.1
						trait = misguided_warrior
					}
					modifier = {
						factor = 1.35
						trait = tough_soldier
					}
					modifier = {
						factor = 1.5
						trait = skilled_tactician
					}
					modifier = {
						factor = 1.75
						trait = brilliant_strategist
					}
					modifier = {
						factor = 1.35
						trait = zealous
					}
					modifier = {
						factor = 1.15
						trait = cruel
					}
					modifier = {
						factor = 0.95
						trait = just
					}
					modifier = {
						factor = 0.85
						trait = complacent
					}
					modifier = {
						factor = 1.5
						trait = robust
					}
					modifier = {
						factor = 0.75
						trait = feeble
					}
					# End training
					character_event = {
						id = wh_druchii.203
						days = 3650
					}
					# cruel
					random = {
						chance = 45
						character_event = {
							id = wh_druchii.204 days = 350 random = 150
						}
					}
					# brave
					random = {
						chance = 35
						character_event = {
							id = wh_druchii.205 days = 650 random = 150
						}
					}
					# robust
					random = {
						chance = 30
						character_event = {
							id = wh_druchii.206 days = 750 random = 250
						}
					}
					# zealous
					random = {
						chance = 60
						character_event = {
							id = wh_druchii.207 days = 950 random = 450
						}
					}
					# scarred
					random = {
						chance = 25
						character_event = {
							id = wh_druchii.208 days = 1150 random = 350
						}
					}
					# homosexual
					random = {
						chance = 20
						character_event = {
							id = wh_druchii.209 days = 150 random = 650
						}
					}
					# martial
					random = {
						chance = 60
						character_event = {
							id = wh_druchii.210 days = 1350 random = 250
						}
					}
					random = {
						chance = 15
						character_event = {
							id = wh_druchii.210 days = 1650 random = 750
						}
					}
					random = {
						chance = 5
						character_event = {
							id = wh_druchii.210 days = 1950 random = 850
						}
					}
					random = {
						chance = 5
						character_event = {
							id = wh_druchii.211 days = 1450 random = 650
						}
					}
					# maimed
					random = {
						chance = 5
						character_event = {
							id = wh_druchii.211 days = 1450 random = 650
						}
					}
					# lunatic
					random = {
						chance = 60
						character_event = {
							id = wh_druchii.212 days = 2150 random = 750
						}
					}
					random = {
						chance = 15
						character_event = {
							id = wh_druchii.212 days = 2450 random = 750
						}
					}
				}
				35 = {
					character_event = {
						id = wh_druchii.202
						days = 2150
						random = 1500
					}
				}
			}
		}
	}
}

# Druchii witch dies during training
character_event = {
	id = wh_druchii.202
	desc = EVTDESCdruchiiinv23002
	picture = "GFX_evt_witch_elf"
	border = GFX_event_normal_frame_religion
	is_triggered_only = yes

	immediate = {
		log = "work event id = wh_druchii.202 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTAdruchiiinv23002
		death = {
			death_reason = death_battle
		}
	}
}

# Druchii witch training goes on well
character_event = {
	id = wh_druchii.203
	desc = EVTDESCdruchiiinv23003
	picture = "GFX_evt_witch_elf"
	border = GFX_event_normal_frame_religion
	is_triggered_only = yes

	immediate = {
		log = "work event id = wh_druchii.203 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTAdruchiiinv23003
		piety = 250
		change_martial = 1
		change_stewardship = -3
		prestige = 100
		if = {
			limit = {
				is_female = no
			}
			remove_trait = disinherited
			diplomatic_immunity = no
			add_trait = druchi_assassin
		}
	}
}

# Witch Elf training: cruelty
character_event = {
	id = wh_druchii.204
	desc = EVTDESCdruchiiinv23004
	picture = "GFX_evt_witch_elf"
	border = GFX_event_normal_frame_religion
	is_triggered_only = yes

	immediate = {
		log = "work event id = wh_druchii.204 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTAdruchiiinv23004
		add_trait = cruel
	}
}

# Witch Elf training: bravery
character_event = {
	id = wh_druchii.205
	desc = EVTDESCdruchiiinv23005
	picture = "GFX_evt_witch_elf"
	border = GFX_event_normal_frame_religion
	is_triggered_only = yes

	immediate = {
		log = "work event id = wh_druchii.205 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTAdruchiiinv23005
		add_trait = brave
	}
}

# Witch Elf training: robust
character_event = {
	id = wh_druchii.206
	desc = EVTDESCdruchiiinv23006
	picture = "GFX_evt_witch_elf"
	border = GFX_event_normal_frame_religion
	is_triggered_only = yes

	immediate = {
		log = "work event id = wh_druchii.206 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTAdruchiiinv23006
		hidden_tooltip = {
			remove_trait = undernourished
			remove_trait = fat
		}
		if = {
			limit = {
				NOT = {
					trait = robust
				}
			}
			add_trait = robust
		}
		if = {
			limit = {
				trait = robust
			}
			change_martial = 2
		}
	}
}

# Witch Elf training: zealotry
character_event = {
	id = wh_druchii.207
	desc = EVTDESCdruchiiinv23007
	picture = "GFX_evt_witch_elf"
	border = GFX_event_normal_frame_religion
	is_triggered_only = yes

	immediate = {
		log = "work event id = wh_druchii.207 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTAdruchiiinv23007
		add_trait = zealous
	}
}

# Witch Elf training: scarred
character_event = {
	id = wh_druchii.208
	desc = EVTDESCdruchiiinv23008
	picture = "GFX_evt_witch_elf"
	border = GFX_event_normal_frame_religion
	is_triggered_only = yes

	immediate = {
		log = "work event id = wh_druchii.208 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTAdruchiiinv23008
		add_trait = scarred
	}
}

# Witch Elf training: homosexuality
character_event = {
	id = wh_druchii.209
	desc = EVTDESCdruchiiinv23009
	picture = "GFX_evt_witch_elf"
	border = GFX_event_normal_frame_religion
	is_triggered_only = yes

	immediate = {
		log = "work event id = wh_druchii.209 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTAdruchiiinv23009
		if = {
			limit = {
				NOT = {
					trait = homosexual
				}
			}
			add_trait = homosexual
		}
		if = {
			limit = {
				trait = homosexual
			}
			add_trait = lustful
		}
	}
}

# Witch Elf training: martial
character_event = {
	id = wh_druchii.210
	desc = EVTDESCdruchiiinv23010
	picture = "GFX_evt_witch_elf"
	border = GFX_event_normal_frame_religion
	is_triggered_only = yes

	immediate = {
		log = "work event id = wh_druchii.210 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTAdruchiiinv23010
		change_martial = 1
	}
}

# Witch Elf training: maimed
character_event = {
	id = wh_druchii.211
	desc = EVTDESCdruchiiinv23011
	picture = "GFX_evt_witch_elf"
	border = GFX_event_normal_frame_religion
	is_triggered_only = yes

	immediate = {
		log = "work event id = wh_druchii.211 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTAdruchiiinv23011
		add_trait = maimed
	}
}

# Witch Elf training: lunacy
character_event = {
	id = wh_druchii.212
	desc = EVTDESCdruchiiinv23012
	picture = "GFX_evt_witch_elf"
	border = GFX_event_normal_frame_religion
	is_triggered_only = yes

	immediate = {
		log = "work event id = wh_druchii.212 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTAdruchiiinv23012
		hidden_tooltip = {
			change_variable = {
				which = "lunatic_counter"
				value = 2
			}
			random = {
				chance = 10
				change_variable = {
					which = "lunatic_counter"
					value = 4
				}
			}
			random = {
				chance = 5
				change_variable = {
					which = "lunatic_counter"
					value = 6
				}
			}
			character_event = {
				id = mutation.1005
			}
		}
	}
}

# Elven baby is stolen by the Witches to be trained as an Assassin - first hidden event on birth. 250 - 300
character_event = {
	id = wh_druchii.250
	hide_window = yes
	religion_group = cytharai_group
	only_men = yes
	is_triggered_only = yes

	trigger = {
		location = {
			religion = cytharai
		}
	}

	immediate = {
		log = "work event id = wh_druchii.250 for [Root.GetBestName]"
		character_event = {
			id = wh_druchii.251
			days = 10
			random = 20
		}
	}
}

# Kidnapping
character_event = {
	id = wh_druchii.251
	desc = EVTDESCdruchiiinv24001
	picture = "GFX_evt_witch_elf"
	border = GFX_event_normal_frame_religion
	is_triggered_only = yes

	immediate = {
		log = "work event id = wh_druchii.251 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTAdruchiiinv24001
		diplomatic_immunity = yes
		abdicate = yes
		clear_wealth = ROOT
		religion = cytharai
		add_trait = in_hiding
		add_trait = disinherited
		father = {
			character_event = {
				id = wh_druchii.252
			}
		}
		mother = {
			character_event = {
				id = wh_druchii.252
			}
		}
		hidden_tooltip = {
			random_list = {
				85 = {
					modifier = {
						factor = 1.5
						trait = zealous
					}
					modifier = {
						factor = 0.75
						trait = cynical
					}
					modifier = {
						factor = 0.5
						trait = fragile
					}
					modifier = {
						factor = 0.75
						trait = weak
					}
					modifier = {
						factor = 0.85
						trait = soft
					}
					modifier = {
						factor = 1.25
						trait = hardy
					}
					modifier = {
						factor = 1.5
						trait = tough
					}
					modifier = {
						factor = 1.75
						trait = strong
					}
					modifier = {
						factor = 0.5
						trait = craven
					}
					modifier = {
						factor = 1.15
						trait = diligent
					}
					modifier = {
						factor = 0.85
						trait = drunkard
					}
					modifier = {
						factor = 0.85
						trait = addict
					}
					modifier = {
						factor = 1.75
						trait = brave
					}
					modifier = {
						factor = 0.85
						trait = fat
					}
					modifier = {
						factor = 0.85
						trait = undernourished
					}
					modifier = {
						factor = 1.5
						trait = ambitious
					}
					modifier = {
						factor = 0.85
						trait = content
					}
					modifier = {
						factor = 1.85
						trait = duelist
					}
					modifier = {
						factor = 1.5
						trait = hunter
					}
					modifier = {
						factor = 0.5
						trait = wounded
					}
					modifier = {
						factor = 0.25
						trait = maimed
					}
					modifier = {
						factor = 0.75
						trait = infirm
					}
					modifier = {
						factor = 0.25
						trait = blinded
					}
					modifier = {
						factor = 1.25
						trait = tall
					}
					modifier = {
						factor = 0.5
						trait = dwarf
					}
					modifier = {
						factor = 0.5
						trait = hunchback
					}
					modifier = {
						factor = 0.75
						trait = clubfooted
					}
					modifier = {
						factor = 1.25
						martial = 15
					}
					modifier = {
						factor = 0.85
						trait = stressed
					}
					modifier = {
						factor = 0.75
						trait = depressed
					}
					modifier = {
						factor = 0.95
						trait = dim
					}
					modifier = {
						factor = 0.9
						trait = dumb
					}
					modifier = {
						factor = 0.85
						trait = slow
					}
					modifier = {
						factor = 0.8
						trait = idiot
					}
					modifier = {
						factor = 0.75
						trait = imbecile
					}
					modifier = {
						factor = 1.15
						trait = bright
					}
					modifier = {
						factor = 1.2
						trait = smart
					}
					modifier = {
						factor = 1.25
						trait = quick
					}
					modifier = {
						factor = 1.3
						trait = brilliant
					}
					modifier = {
						factor = 1.35
						trait = genius
					}
					modifier = {
						factor = 0.85
						trait = slothful
					}
					modifier = {
						factor = 0.9
						trait = kind
					}
					modifier = {
						factor = 0.9
						trait = humble
					}
					modifier = {
						factor = 0.9
						trait = shy
					}
					modifier = {
						factor = 1.1
						trait = misguided_warrior
					}
					modifier = {
						factor = 1.35
						trait = tough_soldier
					}
					modifier = {
						factor = 1.5
						trait = skilled_tactician
					}
					modifier = {
						factor = 1.75
						trait = brilliant_strategist
					}
					modifier = {
						factor = 1.35
						trait = zealous
					}
					modifier = {
						factor = 1.15
						trait = cruel
					}
					modifier = {
						factor = 0.95
						trait = just
					}
					modifier = {
						factor = 0.85
						trait = complacent
					}
					modifier = {
						factor = 1.5
						trait = robust
					}
					modifier = {
						factor = 0.75
						trait = feeble
					}
					character_event = {
						id = wh_druchii.203 days = 36500
					} # End training - 20 years
					random = {
						chance = 45
						character_event = {
							id = wh_druchii.204 days = 3500 random = 150
						}
					} # cruel
					random = {
						chance = 35
						character_event = {
							id = wh_druchii.205 days = 6500 random = 1500
						}
					} # brave
					random = {
						chance = 30
						character_event = {
							id = wh_druchii.206 days = 7500 random = 2500
						}
					} # robust
					random = {
						chance = 60
						character_event = {
							id = wh_druchii.207 days = 9500 random = 4500
						}
					} # zealous
					random = {
						chance = 25
						character_event = {
							id = wh_druchii.208 days = 11500 random = 3500
						}
					} # scarred
					random = {
						chance = 20
						character_event = {
							id = wh_druchii.209 days = 1500 random = 6500
						}
					} # homosexual
					random = {
						chance = 60
						character_event = {
							id = wh_druchii.210 days = 13500 random = 2500
						}
					} # martial1
					random = {
						chance = 30
						character_event = {
							id = wh_druchii.210 days = 16500 random = 5500
						}
					} # martial2
					random = {
						chance = 15
						character_event = {
							id = wh_druchii.210 days = 16500 random = 7500
						}
					} # martial3
					random = {
						chance = 5
						character_event = {
							id = wh_druchii.210 days = 19500 random = 8500
						}
					} # martial4
					random = {
						chance = 5
						character_event = {
							id = wh_druchii.211 days = 14500 random = 6500
						}
					} # maimed
					random = {
						chance = 60
						character_event = {
							id = wh_druchii.212 days = 21500 random = 7500
						}
					} # lunatic
					random = {
						chance = 30
						character_event = {
							id = wh_druchii.212 days = 21500 random = 7500
						}
					} # lunatic
					random = {
						chance = 15
						character_event = {
							id = wh_druchii.212 days = 21500 random = 7500
						}
					} # lunatic

				}
				15 = {
					character_event = {
						id = wh_druchii.202 days = 7500 random = 1500
					}
				}
			}
		}
	}
}

# Notify parent of kidnapping
character_event = {
	id = wh_druchii.252
	desc = EVTDESCdruchiiinv24002
	picture = "GFX_evt_witch_elf"
	border = GFX_event_normal_frame_religion
	is_triggered_only = yes

	immediate = {
		log = "work event id = wh_druchii.252 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTAdruchiiinv24002
		if = {
			limit = {
				religion = cytharai
			}
			piety = 150
		}
	}
}

# 300 - 350
# Hire the services of a Sorceress
character_event = {
	id = wh_druchii.300
	title = SORCERESS
	desc = darkelf25 # For 500 gold, you can hire the services of a Sorceress. She will serve in your armies, and act as your advisor on magical issues
	picture = "GFX_evt_sorceress"
	is_triggered_only = yes

	immediate = {
		log = "work event id = wh_druchii.300 for [Root.GetBestName]"
	}

	option = {
		name = darkelf25A
		random_playable_ruler = {
			limit = {
				any_courtier = {
					trait = druchi_sorceress
					is_landed = no
					is_married = no
					nor = {
						has_character_modifier = magic_power_4
						has_character_flag = hired_sorceress
					}
				}
			}
			random_courtier = {
				limit = {
					trait = druchi_sorceress
					is_landed = no
					is_married = no
					nor = {
						has_character_modifier = magic_power_4
						has_character_flag = hired_sorceress
					}
				}
				character_event = {
					id = wh_druchii.301
					days = 7
				}
			}
		}
	}

	option = {
		name = NO
		trigger = {
			ai = no
		}
	}
}

# Sorceress is asked if she accepts
character_event = {
	id = wh_druchii.301
	title = SORCERESS
	desc = darkelf26 # A ruler has offered to rent your services as Sorceress for 500 gold. Do you wish to accept this offer?
	picture = "GFX_evt_sorceress"
	is_triggered_only = yes

	immediate = {
		log = "work event id = wh_druchii.301 for [Root.GetBestName]"
	}

	option = {
		name = YES
		FROM = {
			character_event = {
				id = wh_druchii.302
			}
		}
		set_character_flag = hired_sorceress
	}

	option = {
		name = NO
		trigger = {
			ai = no
		}
	}
}

# Sorceress accepts
character_event = {
	id = wh_druchii.302
	title = SORCERESS
	desc = darkelf27 # Of course, I accept your offer my liege. Rest assured, I will serve you in all ways, and while our contract lasts I devote myself to your house, saving only my first allegiance to Malekith and Morathi.
	picture = "GFX_evt_sorceress"
	min_age = 16
	is_triggered_only = yes

	immediate = {
		log = "work event id = wh_druchii.302 for [Root.GetBestName]"
		reverse_banish = FROM
	}

	option = {
		name = EXCELLENT
		wealth = -500
		FROM = {
			wealth = 500
		}
	}
}

# Unlanded Druchi girls with the magic potential will have the choice to go to Ghrond and become sorceresses or hide their potential on_yearly_pulse
character_event = {
	id = wh_druchii.303
	title = GHROND
	desc = EVTDESCdarkelfmagic2
	picture = "GFX_evt_sorceress"
	min_age = 16
	only_women = yes
	prisoner = no
	capable_only = yes
	culture_group = druchi_group
	is_triggered_only = yes
	min_age = 16

	trigger = {
		top_liege = {
			trait = malekith
		}
		wh_has_any_magic_potential_reveal_trigger = yes
		NOT = {
			trait = druchi_sorceress
		}
		# Is everything in place?
		c_ghrond = {
			holder_scope = {
				religion_group = cytharai_group
				trait = druchi_sorceress
				top_liege = {
					has_landed_title = e_naggaroth
				}
			}
		}
		e_naggaroth = {
			holder_scope = {
				trait = malekith
			}
		}
	}

	immediate = {
		log = "work event id = wh_druchii.2 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTAdarkelfmagic2 # No reason to hide it.
		k_ghrond = {
			holder_scope = {
				character_event = {
					id = wh_druchii.306
				}
			}
		}
		tooltip = {
			abdicate = yes
			add_trait = mage_apprentice
			add_trait = celibate
			add_trait = disinherited
		}
	}

	option = {
		name = EVTOPTBdarkelfmagic2 # Hide potential
		trigger = {
			ai = no
		}
		wh_hide_magic_potential_effect = yes
		hidden_tooltip = {
			random_list = {
				70 = {
					modifier = {
						factor = 0.45
						has_character_flag = magic_potential_flag_4
					}
					modifier = {
						factor = 0.75
						has_character_flag = magic_potential_flag_3
					}
					modifier = {
						factor = 0.95
						has_character_flag = magic_potential_flag_2
					}
					modifier = {
						factor = 1.25
						has_character_flag = magic_potential_flag_1
					}
					modifier = {
						factor = 1.75
						trait = deceitful
					}
					modifier = {
						factor = 1.5
						trait = paranoid
					}
					modifier = {
						factor = 0.75
						trait = trusting
					}
					modifier = {
						factor = 0.5
						trait = honest
					}
				}
				30 = {
					# discovered anyway and forced to go
					character_event = {
						id = wh_druchii.304
						days = 200
						random = 400
					}
				}
			}
		}
	}
}

# Potential discovered anyway
character_event = {
	id = wh_druchii.304
	title = GHROND
	desc = EVTDESCdarkelfmagic2005
	picture = "GFX_evt_sorceress"
	min_age = 16
	only_women = yes
	prisoner = no
	capable_only = yes
	culture_group = druchi_group

	trigger = {
		NOT = {
			trait = druchi_sorceress
		}
		top_liege = {
			trait = malekith
		}
		wh_has_any_magic_potential_hide_trigger = yes
		# Is everything in place?
		c_ghrond = {
			holder_scope = {
				religion_group = cytharai_group
				trait = druchi_sorceress
				top_liege = {
					has_landed_title = e_naggaroth
				}
			}
		}
		e_naggaroth = {
			holder_scope = {
				trait = malekith
			}
		}
	}

	mean_time_to_happen = {
		years = 40
		modifier = {
			factor = 0.45
			has_character_flag = magic_potential_flag_4
		}
		modifier = {
			factor = 0.75
			has_character_flag = magic_potential_flag_3
		}
		modifier = {
			factor = 0.95
			has_character_flag = magic_potential_flag_2
		}
		modifier = {
			factor = 1.25
			has_character_flag = magic_potential_flag_1
		}
		modifier = {
			factor = 1.75
			trait = deceitful
		}
		modifier = {
			factor = 1.5
			trait = paranoid
		}
		modifier = {
			factor = 0.75
			trait = trusting
		}
		modifier = {
			factor = 0.5
			trait = honest
		}
	}

	immediate = {
		log = "work event id = wh_druchii.304 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTAdarkelfmagic20005
		wh_reveal_magic_potential_effect = yes
		k_ghrond = {
			holder_scope = {
				character_event = {
					id = wh_druchii.306
				}
			}
		}
		prestige = -200
		tooltip = {
			abdicate = yes
			add_trait = mage_apprentice
			add_trait = celibate
			add_trait = disinherited
		}
	}
}

# Notify parents
character_event = {
	id = wh_druchii.305
	title = SORCERESS
	desc = EVTDESCdarkelfmagic3
	picture = "GFX_evt_sorceress"
	is_triggered_only = yes

	immediate = {
		log = "work event id = wh_druchii.305 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTAdarkelfmagic3
		prestige = 100
	}
}

# The Matriarch of Ghrond receives the new apprentice
character_event = {
	id = wh_druchii.306
	title = SORCERESS
	desc = EVTDESCdarkelfmagic4 # A daughter of a noble house shows talent for sorcery, and asks for your permission to be taught amongst the Covens of Ghrond. What do you say?
	picture = "GFX_evt_sorceress"
	notification = yes
	is_triggered_only = yes

	immediate = {
		log = "work event id = wh_druchii.306 for [Root.GetBestName]"
		from = {
			abdicate = yes
			add_trait = mage_apprentice
			add_trait = celibate
			add_trait = disinherited
			remove_trait = druchi_witch_elf
			move_character = ROOT
			character_event = {
				id = wh_druchii.307
				days = 160
			}
			father = {
				character_event = {
					id = wh_druchii.305
				}
			}
			mother = {
				character_event = {
					id = wh_druchii.305
				}
			}
		}
	}

	option = {
		name = EVTOPTAdarkelfmagic4 # We will welcome this new apprentice sorceress
	}
}

# Yearly event to gain traits and learning
character_event = {
	id = wh_druchii.307
	title = SORCERESS
	desc = EVTDESCdarkelfmagic5
	picture = "GFX_evt_sorceress"
	is_triggered_only = yes

	immediate = {
		log = "work event id = wh_druchii.307 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTAdarkelfmagic5
		prestige = 25
		hidden_tooltip = {
			diplomatic_immunity = yes
			if = {
				limit = {
					check_variable = {
						which = "sorceresses_studies"
						value = 10
					}
				}
				set_variable = {
					which = "sorceresses_studies"
					value = 0
				}
				# graduation or punishment
				character_event = {
					id = wh_druchii.308
				}
				break = yes
			}
			change_variable = {
				which = "sorceresses_studies"
				value = 1
			}
			character_event = {
				id = wh_druchii.307
				days = 365
			}
			random_list = {
				# good year
				10 = {
					add_trait = deceitful
					change_learning = 1
				}
				10 = {
					add_trait = ambitious
					change_learning = 1
				}
				10 = {
					add_trait = cruel
					change_learning = 1
				}
				10 = {
					add_trait = homosexual
					change_learning = 1
				}
				10 = {
					religion = atharti
					change_learning = 1
				}
				# bad year
				10 = {
					random_list = {
						10 = {
							add_trait = craven
						}
						10 = {
							add_trait = slothful
						}
						10 = {
							add_trait = paranoid
						}
						10 = {
							add_trait = lustful
						}
						5 = {
							add_trait = addict
						}
						5 = {
							change_variable = {
								which = "lunatic_counter"
								value = 1
							}
							# lunacy counter
							character_event = {
								id = mutation.1005
							}
						}
					}
			 		modifier = {
						factor = 0.5
						trait = genius
					}
			 		modifier = {
						factor = 0.65
						trait = brilliant
					}
			 		modifier = {
						factor = 0.75
						trait = smart
					}
			 		modifier = {
						factor = 0.85
						trait = quick
					}
			 		modifier = {
						factor = 0.95
						trait = bright
					}
			 		modifier = {
						factor = 1.25
						trait = dim
					}
			 		modifier = {
						factor = 1.35
						trait = dumb
					}
			 		modifier = {
						factor = 1.5
						trait = slow
					}
			 		modifier = {
						factor = 1.75
						trait = idiot
					}
			 		modifier = {
						factor = 2
						trait = imbecile
					}
			 		modifier = {
						factor = 0.95
						trait = magic_potential_2
					}
			 		modifier = {
						factor = 0.85
						trait = magic_potential_3
					}
			 		modifier = {
						factor = 0.65
						trait = magic_potential_4
					}
			 		modifier = {
						factor = 1.25
						trait = slothful
					}
			 		modifier = {
						factor = 1.35
						trait = content
					}
			 		modifier = {
						factor = 1.25
						trait = drunkard
					}
			 		modifier = {
						factor = 1.25
						trait = addict
					}
			 		modifier = {
						factor = 1.25
						trait = gluttonous
					}
			 		modifier = {
						factor = 1.25
						trait = lustful
					}
				}
			}
		}
	}
}

# Check if the Sorceress has managed to achieve her goals
character_event = {
	id = wh_druchii.308
	title = SORCERESS
	desc = {
		text = EVTDESCAdarkelfmagic6
		trigger = {
			learning = 14
			NOT = {
				trait = incapable
			}
		}
	}
	desc = {
		text = EVTDESCBdarkelfmagic6
		trigger = {
			OR = {
				NOT = {
					learning = 14
				}
				trait = incapable
			}
		}
	}
	picture = "GFX_evt_sorceress"
	is_triggered_only = yes

	immediate = {
		log = "work event id = wh_druchii.308 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTAdarkelfmagic6
		trigger = {
			learning = 14
			NOT = {
				trait = incapable
			}
		}
		hidden_tooltip = {
			remove_trait = druchi_witch_elf
			diplomatic_immunity = no
		}
		remove_trait = mage_apprentice
		add_trait = druchi_sorceress
		add_trait = lore_dark_magic
		prestige = 200
		z_magic_power_sequential_addition = yes
		father = {
			character_event = {
				id = wh_druchii.309
			}
		}
		mother = {
			character_event = {
				id = wh_druchii.309
			}
		}
	}

	option = {
		name = EVTOPTBdarkelfmagic6
		trigger = {
			OR = {
				NOT = {
					learning = 14
				}
				trait = incapable
			}
		}
		hidden_tooltip = {
			remove_trait = druchi_witch_elf
			diplomatic_immunity = no
		}
		remove_trait = mage_apprentice
		prestige = -200
		add_trait = hollowed
		father = {
			character_event = {
				id = wh_druchii.310
			}
		}
		mother = {
			character_event = {
				id = wh_druchii.310
			}
		}
		e_naggaroth = {
			holder_scope = {
				ROOT = {
					move_character = PREV
				}
			}
		}
	}
}

# Notify parents of successful daughter
character_event = {
	id = wh_druchii.309
	title = SORCERESS
	desc = EVTDESCdarkelfmagic6005
	picture = "GFX_evt_sorceress"
	is_triggered_only = yes

	immediate = {
		log = "work event id = wh_druchii.309 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTAdarkelfmagic6005
		prestige = 150
	}
}

# Notify parents of failed daughter
character_event = {
	id = wh_druchii.310
	title = SORCERESS
	desc = EVTDESCdarkelfmagic6006
	picture = "GFX_evt_sorceress"
	is_triggered_only = yes

	immediate = {
		log = "work event id = wh_druchii.310 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTAdarkelfmagic6006
		prestige = -250
	}
}

# Raids 350 - 400
# normal quest menu
character_event = {
	id = wh_druchii.350
	title = RAIDING
	desc = EVTDESCDARKELF.8 # You are a noble of Naggaroth, and you can outfit an expedition to go raiding abroad for the glory of Khaine and the Witch King. Do you wish to start looking for a ship and crew?
	picture = "GFX_evt_large_army"
	is_triggered_only = yes

	immediate = {
		log = "work event id = wh_druchii.350 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTDARKELF.8.a # Certainly, I shall return with slaves and plunder!
		add_trait = on_dark_elf_raid
		wealth = -50
	}

	option = {
		name = NOT_RIGHT_NOW
	}
}

# gateway event for raiding
character_event = {
	id = wh_druchii.351
	hide_window = yes
	only_playable = yes
	min_age = 16
	prisoner = no
	culture_group = druchi_group
	is_triggered_only = yes

	trigger = {
		trait = on_dark_elf_raid
	}

	immediate = {
		log = "work event id = wh_druchii.351 for [Root.GetBestName]"
		character_event = {
			id = wh_druchii.352
		}
		character_event = {
			id = wh_druchii.353
			days = 1
		}
		random_list = {
			10 = {
				character_event = {
					id = wh_druchii.355
					days = 2
					random = 360
				}
			}
			10 = {
				character_event = {
					id = wh_druchii.358
					days = 2
					random = 360
				}
			}
			5 = {
				character_event = {
					id = wh_druchii.362
					days = 2
					random = 360
				}
			}
		}
	}
}

# stop raid if character becomes maimed or wounded
character_event = {
	id = wh_druchii.352
	title = RAIDING
	desc = {
		text = EVTDESCDARKELF.9
		trigger = {
			trait = maimed
		}
	}
	desc = {
		text = EVTDESCDARKELF.23
		trigger = {
			trait = wounded
		}
	}
	picture = "GFX_evt_merchant_ship_at_sea_republic"
	only_playable = yes
	culture_group = druchi_group
	is_triggered_only = yes

	trigger = {
		trait = on_dark_elf_raid
		or = {
			trait = maimed
			trait = wounded
		}
	}

	immediate = {
		log = "work event id = wh_druchii.352 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTDARKELF.9.a # Curses! But hate will carry me on...
		remove_trait = on_dark_elf_raid
	}
}

# end of raid if have money
character_event = {
	id = wh_druchii.353
	title = RAIDING
	desc = EVTDESCDARKELF.10 # You have raided for a long time now and amassed great wealth. Perhaps it is time to stop, before your luck runs out?
	picture = "GFX_evt_kraken"
	only_playable = yes
	culture_group = druchi_group
	is_triggered_only = yes

	trigger = {
		trait = on_dark_elf_raid
		wealth = 1000
		not = {
			has_character_flag = wh_druchii.353_block
		}
	}

	immediate = {
		log = "work event id = wh_druchii.353 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTDARKELF.10.a # Yes, time to go home and put this wealth to good use.
		remove_trait = on_dark_elf_raid
	}

	option = {
		name = NO_I_MUST_CONTINUE_RAIDING
		trigger = {
			ai = no
		}
		set_character_flag = wh_druchii.353_block
	}
}

# menu event for stop questing decision
character_event = {
	id = wh_druchii.354
	title = RAIDING
	desc = EVTDESCDARKELF.11 # Do you wish to stop raiding?
	picture = "GFX_evt_merchant_ship_at_sea_republic"
	is_triggered_only = yes

	immediate = {
		log = "work event id = wh_druchii.354 for [Root.GetBestName]"
	}

	option = {
		name = YES
		remove_trait = on_dark_elf_raid
	}

	option = {
		name = NO
	}
}

# now for the actual raiding events
# bretonnian village
character_event = {
	id = wh_druchii.355
	title = RAIDING
	desc = EVTDESCDARKELF.12 # Off the coast of Bretonnia one night you spot lights ahead; it seems to be a small village. Do you want to go in and and pillage it?
	picture = "GFX_evt_merchant_ship_at_sea_republic"
	only_playable = yes
	min_age = 16
	prisoner = no
	culture_group = druchi_group
	is_triggered_only = yes

	trigger = {
		trait = on_dark_elf_raid
	}

	immediate = {
		log = "work event id = wh_druchii.355 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTDARKELF.12.a # Inform the crew - we bathe in blood tonight!
		if = {
			limit = {
				NOT = {
					martial = 10
				}
			}
			random_list = {
				50 = {
					character_event = {
						id = wh_druchii.357
					}
				}
				50 = {
					character_event = {
						id = wh_druchii.356
					}
				}
			}
		}
		if = {
			limit = {
				martial = 10
			}
			character_event = {
				id = wh_druchii.356
			}
		}
	}

	option = {
		name = NO_I_SEEK_GREATER_TARGETS
	}
}

# raid success
character_event = {
	id = wh_druchii.356
	title = RAIDING
	desc = EVTDESCDARKELF.13 # You silently sail up to the village, and then stealthily slip your warriors around it before unleashing a great war cry - the slaughter is glorious, and you take many slaves as captives!
	picture = "GFX_evt_burning_house"
	is_triggered_only = yes

	immediate = {
		log = "work event id = wh_druchii.356 for [Root.GetBestName]"
	}

	option = {
		name = BLOOD_AND_SOULS_FOR_KHAINE
		wealth = 25
		random = {
			chance = 5
			add_trait = wounded
		}
		if = {
			limit = {
				NOT = {
					martial = 10
				}
			}
			random = {
				chance = 20
				change_martial = 1
			}
		}
	}
}

# raid defeat
character_event = {
	id = wh_druchii.357
	title = RAIDING
	desc = EVTDESCDARKELF.14 # You get your warband ashore, but as soon as you approach the village an alarm goes off, and you see a movement from a large encampment of patrolling knights of the realm. Curses - this village is too heavily defended!
	picture = "GFX_evt_bretonnians"
	is_triggered_only = yes

	immediate = {
		log = "work event id = wh_druchii.357 for [Root.GetBestName]"
	}

	option = {
		name = BACK_TO_THE_SHIPS_QUICKLY
		random_list = {
			60 = {
			}
			25 = {
				add_trait = wounded
			}
			10 = {
				add_trait = maimed
			}
			5 = {
				if = {
					limit = {
						is_invincible_trigger = yes
					}
					antideath_effect = yes
					break = yes
				}
				death = {
					death_reason = death_battle
				}
			}
		}
	}
}

# orc band
character_event = {
	id = wh_druchii.358
	title = RAIDING
	desc = EVTDESCDARKELF.15 # You come across a merchant convoy of human ships. There are 3 of them, but it looks like they are not warships. Prepare to board them?
	picture = "GFX_evt_merchant_ship_at_sea_republic"
	only_playable = yes
	min_age = 16
	prisoner = no
	culture_group = druchi_group
	is_triggered_only = yes

	trigger = {
		trait = on_dark_elf_raid
	}

	immediate = {
		log = "work event id = wh_druchii.358 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTDARKELF.15.a # Men - full sail! Prepare for boarding action!
		character_event = {
			id = wh_druchii.359
		}
	}

	option = {
		name = EVTOPTDARKELF.15.b # No, attacking 3 ships is too risky.
		trigger = {
			ai = no
		}
	}
}

character_event = {
	id = wh_druchii.359
	title = RAIDING
	desc = EVTDESCDARKELF.16 # Spotting your sail, the ships turn towards you - brave fools, they are actually going to try and fight you...
	picture = "GFX_evt_merchant_ship_at_sea_republic"
	is_triggered_only = yes

	immediate = {
		log = "work event id = wh_druchii.359 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTDARKELF.16.a # Bolt throwers, prepare to cut down their masts!
		if = {
			limit = {
				NOT = {
					martial = 15
				}
			}
			random_list = {
				75 = {
					character_event = {
						id = wh_druchii.361
					}
				}
				25 = {
					character_event = {
						id = wh_druchii.360
					}
				}
			}
		}
		if = {
			limit = {
				martial = 15
			}
			character_event = {
				id = wh_druchii.360
			}
		}
	}

	option = {
		name = EVTOPTDARKELF.16.b # Damn. Three on one, all attacking us. Time to withdraw.
		trigger = {
			ai = no
		}
		prestige = -50
	}
}

# engagement success
character_event = {
	id = wh_druchii.360
	title = RAIDING
	desc = EVTDESCDARKELF.17 # Your bolt throwers expertly disable the sails of two of the ships, leaving them dead in the water. Your crew board the other ship, and one by one, the others fall to. This is a great victory!
	picture = "GFX_evt_merchant_ship_at_sea_republic"
	is_triggered_only = yes

	immediate = {
		log = "work event id = wh_druchii.360 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTDARKELF.17.a # And they had a rich cargo too!
		wealth = 35
		prestige = 50
		random = {
			chance = 5
			add_trait = wounded
		}
		if = {
			limit = {
				NOT = {
					martial = 15
				}
			}
			random = {
				chance = 25
				change_martial = 1
			}
		}
	}
}

# engagement failure
character_event = {
	id = wh_druchii.361
	title = RAIDING
	desc = EVTDESCDARKELF.18 # Your bolt throwers failed to disable the approaching ships, and one of them carried a catapult which sends great rocks your way. If one of them hits, it could be the end of you...
	picture = "GFX_evt_merchant_ship_at_sea_republic"
	is_triggered_only = yes

	immediate = {
		log = "work event id = wh_druchii.361 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTDARKELF.18.a # Turn about, we'll outsail these scows!
		random_list = {
			55 = {
			}
			35 = {
				add_trait = wounded
			}
			5 = {
				add_trait = maimed
			}
			5 = {
				if = {
					limit = {
						is_invincible_trigger = yes
					}
					antideath_effect = yes
					break = yes
				}
				death = {
					death_reason = death_battle
				}
			}
		}
	}
}

# random attack by high elf patrols
character_event = {
	id = wh_druchii.362
	title = RAIDING
	desc = EVTDESCDARKELF.19 # Curses! An Eagle Ship from Ulthuan has spotted your sail, and is fast approaching. You can't outrun this warship from your vile cousins, you'll have to hope you can repel their attack...
	picture = "GFX_evt_merchant_ship_at_sea_republic"
	only_playable = yes
	min_age = 16
	prisoner = no
	culture_group = druchi_group
	is_triggered_only = yes

	trigger = {
		trait = on_dark_elf_raid
	}

	immediate = {
		log = "work event id = wh_druchii.362 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTDARKELF.19.a # Prepare to repel boarders - bolt throwers, fire at will!
		if = {
			limit = {
				NOT = {
					martial = 15
				}
			}
			random_list = {
				50 = {
					character_event = {
						id = wh_druchii.364
					}
				}
				50 = {
					character_event = {
						id = wh_druchii.363
					}
				}
			}
		}
		if = {
			limit = {
				martial = 15
			}
			random_list = {
				20 = {
					character_event = {
						id = wh_druchii.364
					}
				}
				80 = {
					character_event = {
						id = wh_druchii.363
					}
				}
			}
		}
	}
}

# defence vs high elves success
character_event = {
	id = wh_druchii.363
	title = RAIDING
	desc = EVTDESCDARKELF.21 # Your vile cousins catch up to you but you managed to disable their bolt thrower with your own counter-strikes. A fierce boarding action ensues, but the hatred and power of your crew overcomes the attempt, and soon the high elves are all dead!
	picture = "GFX_evt_kraken"
	is_triggered_only = yes

	immediate = {
		log = "work event id = wh_druchii.363 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPTDARKELF.21.a # We claim their ship, it will fetch a good price.
		wealth = 20
		random = {
			chance = 5
			add_trait = wounded
		}
		if = {
			limit = {
				NOT = {
					martial = 20
				}
			}
			random = {
				chance = 25
				change_martial = 1
			}
		}
	}
}

# high elves win
character_event = {
	id = wh_druchii.364
	title = RAIDING
	desc = EVTDESCDARKELF.22 # A deadly shooting match ensues, you manage to do serious damage to their sails, but your own ship has been battered as well. It's time to attempt one last shot at their main mast, otherwise it looks like you won't be able to flee...
	picture = "GFX_evt_kraken"
	is_triggered_only = yes

	immediate = {
		log = "work event id = wh_druchii.364 for [Root.GetBestName]"
	}

	option = {
		prestige = -50
		name = ILL_TAKE_THAT_SHOT_MYSELF
		random_list = {
			45 = {
			}
			25 = {
				add_trait = wounded
			}
			10 = {
				add_trait = maimed
			}
			20 = {
				if = {
					limit = {
						is_invincible_trigger = yes
					}
					antideath_effect = yes
					break = yes

				}
				death = {
					death_reason = death_battle
				}
			}
		}
	}
}

# feast 400 - 450
